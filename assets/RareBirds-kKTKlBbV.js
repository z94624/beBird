const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BO03zjt7.js","assets/index-CWVACXir.css"])))=>i.map(i=>d[i]);
var gr=Object.defineProperty;var yr=(t,o,a)=>o in t?gr(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a;var ve=(t,o,a)=>yr(t,typeof o!="symbol"?o+"":o,a);import{r as w,s as _r,t as un,a as b,u as br,i as cn,n as Lr,w as ge,b as Cr,d as to,e as K,g as Ft,f as Sr,h as oo,j as no,k as Mt,P as dn,p as Z,m as pn,q as Mr,v as wr,x as F,y as mn,z as rt,A as kr,B as hn,o as j,C as W,D,c as Pe,F as He,E as Ne,G as At,Q as Nt,H as V,I as T,J as zo,K as X,R as Eo,L as fn,M as vn,N as gn,O as zt,S as St,_ as ro,T as jo,U as at,V as st,W as B,X as xr,Y as Fo,Z as Ro,$ as Or,a0 as Tr,a1 as $r,a2 as Pr,a3 as Dt,a4 as Dr,a5 as de,a6 as J,a7 as pe,a8 as oe,a9 as z,aa as yn,ab as ue,ac as it,ad as ao,ae as Ir,af as Br,ag as Ar,ah as Nr,ai as so,aj as ce,ak as zr,al as Er,am as jr,an as _n,ao as lt,ap as ut,aq as Fr,ar as Wt,as as Rr,at as Vr,au as ct,av as bn,aw as Rt,ax as Vt,ay as Ln,az as Hr,aA as Cn,aB as qr,aC as Gr,aD as Zr,aE as Ur,aF as Yr,aG as Wr,aH as Qr,aI as Xr,aJ as ot,aK as Jr,aL as Kr,aM as ea,aN as ta,aO as oa,aP as Sn,aQ as na,aR as Mn,aS as ra,aT as aa,aU as sa,aV as Vo,aW as ia,aX as la}from"./index-BO03zjt7.js";import{Q as ua}from"./QForm-CzOoHzFu.js";function ca(t){var o;const a=to(t);return(o=a==null?void 0:a.$el)!=null?o:a}const wn=cn?window:void 0,io=cn?window.navigator:void 0;function lo(...t){let o,a,s,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([a,s,l]=t,o=wn):[o,a,s,l]=t,!o)return Lr;Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]);const e=[],n=()=>{e.forEach(c=>c()),e.length=0},r=(c,u,m,p)=>(c.addEventListener(u,m,p),()=>c.removeEventListener(u,m,p)),i=ge(()=>[ca(o),to(l)],([c,u])=>{if(n(),!c)return;const m=Cr(u)?{...u}:u;e.push(...a.flatMap(p=>s.map(h=>r(c,p,h,m))))},{immediate:!0,flush:"post"}),d=()=>{i(),n()};return un(d),d}function da(){const t=w(!1),o=Ft();return o&&K(()=>{t.value=!0},o),t}function uo(t){const o=da();return b(()=>(o.value,!!t()))}function Ho(t,o={}){const{controls:a=!1,navigator:s=io}=o,l=uo(()=>s&&"permissions"in s);let e;const n=typeof t=="string"?{name:t}:t,r=w(),i=()=>{e&&(r.value=e.state)},d=Sr(async()=>{if(l.value){if(!e)try{e=await s.permissions.query(n),lo(e,"change",i),i()}catch{r.value="prompt"}return e}});return d(),a?{state:r,isSupported:l,query:d}:r}function pa(t={}){const{navigator:o=io,read:a=!1,source:s,copiedDuring:l=1500,legacy:e=!1}=t,n=uo(()=>o&&"clipboard"in o),r=Ho("clipboard-read"),i=Ho("clipboard-write"),d=b(()=>n.value||e),c=w(""),u=w(!1),m=br(()=>u.value=!1,l);function p(){n.value&&f(r.value)?o.clipboard.readText().then(g=>{c.value=g}):c.value=k()}d.value&&a&&lo(["copy","cut"],p);async function h(g=to(s)){d.value&&g!=null&&(n.value&&f(i.value)?await o.clipboard.writeText(g):y(g),c.value=g,u.value=!0,m.start())}function y(g){const M=document.createElement("textarea");M.value=g??"",M.style.position="absolute",M.style.opacity="0",document.body.appendChild(M),M.select(),document.execCommand("copy"),M.remove()}function k(){var g,M,I;return(I=(M=(g=document==null?void 0:document.getSelection)==null?void 0:g.call(document))==null?void 0:M.toString())!=null?I:""}function f(g){return g==="granted"||g==="prompt"}return{isSupported:d,text:c,copied:u,copy:h}}function ma(t={}){const{enableHighAccuracy:o=!0,maximumAge:a=3e4,timeout:s=27e3,navigator:l=io,immediate:e=!0}=t,n=uo(()=>l&&"geolocation"in l),r=w(null),i=_r(null),d=w({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function c(h){r.value=h.timestamp,d.value=h.coords,i.value=null}let u;function m(){n.value&&(u=l.geolocation.watchPosition(c,h=>i.value=h,{enableHighAccuracy:o,maximumAge:a,timeout:s}))}e&&m();function p(){u&&l&&l.geolocation.clearWatch(u)}return un(()=>{p()}),{isSupported:n,coords:d,locatedAt:r,error:i,resume:m,pause:p}}function ha(t={}){const{window:o=wn}=t;if(!o)return w(["en"]);const a=o.navigator,s=w(a.languages);return lo(o,"languagechange",()=>{s.value=a.languages}),s}const fa="M12 18C12 14.69 14.69 12 18 12C19.09 12 20.12 12.3 21 12.81V12L18.92 6C18.72 5.42 18.16 5 17.5 5H6.5C5.84 5 5.28 5.42 5.08 6L3 12V20C3 20.55 3.45 21 4 21H5C5.55 21 6 20.55 6 20V19H12.09C12.04 18.67 12 18.34 12 18M6.5 6.5H17.5L19 11H5L6.5 6.5M6.5 16C5.67 16 5 15.33 5 14.5S5.67 13 6.5 13 8 13.67 8 14.5 7.33 16 6.5 16M19 21V19H15V17H19V15L22 18L19 21",va="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z",ga="M20,18H18V9.25L12,13L6,9.25V18H4V6H5.2L12,10.25L18.8,6H20M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z",ya="/beBird/assets/lineLogo-CG_4J39D.svg",_a="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20height='72'%20viewBox='0%200%2072%2072'%20width='72'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M36,72%20L36,72%20C55.882251,72%2072,55.882251%2072,36%20L72,36%20C72,16.117749%2055.882251,-3.65231026e-15%2036,0%20L36,0%20C16.117749,3.65231026e-15%20-2.4348735e-15,16.117749%200,36%20L0,36%20C2.4348735e-15,55.882251%2016.117749,72%2036,72%20Z'%20fill='%23007FFF'/%3e%3cpath%20d='M36,12%20C22.7451429,12%2012,21.9491852%2012,34.2222222%20C12,41.2155556%2015.4899876,47.4534815%2020.9440994,51.526963%20L20.9440994,60%20L29.1158758,55.5151111%20C31.2967453,56.1186667%2033.6071553,56.4444444%2036,56.4444444%20C49.2548571,56.4444444%2060,46.4952593%2060,34.2222222%20C60,21.9491852%2049.2548571,12%2036,12%20L36,12%20Z%20M38.3850932,41.9259259%20L32.2732919,35.4074074%20L20.3478261,41.9259259%20L33.4658385,28%20L39.7267081,34.5185185%20L51.5031056,28%20L38.3850932,41.9259259%20L38.3850932,41.9259259%20Z'%20fill='%23FFF'/%3e%3c/g%3e%3c/svg%3e",ba="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20shape-rendering='geometricPrecision'%20text-rendering='geometricPrecision'%20image-rendering='optimizeQuality'%20fill-rule='evenodd'%20clip-rule='evenodd'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M256%200c141.385%200%20256%20114.615%20256%20256S397.385%20512%20256%20512%200%20397.385%200%20256%20114.615%200%20256%200z'/%3e%3cpath%20fill='%23fff'%20fill-rule='nonzero'%20d='M318.64%20157.549h33.401l-72.973%2083.407%2085.85%20113.495h-67.222l-52.647-68.836-60.242%2068.836h-33.423l78.052-89.212-82.354-107.69h68.924l47.59%2062.917%2055.044-62.917zm-11.724%20176.908h18.51L205.95%20176.493h-19.86l120.826%20157.964z'/%3e%3c/svg%3e",La="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20shape-rendering='geometricPrecision'%20text-rendering='geometricPrecision'%20image-rendering='optimizeQuality'%20fill-rule='evenodd'%20clip-rule='evenodd'%20viewBox='0%200%20512%20512'%3e%3cdefs%3e%3clinearGradient%20id='prefix__a'%20gradientUnits='userSpaceOnUse'%20x1='256'%20y1='3.84'%20x2='256'%20y2='512'%3e%3cstop%20offset='0'%20stop-color='%232AABEE'/%3e%3cstop%20offset='1'%20stop-color='%23229ED9'/%3e%3c/linearGradient%3e%3c/defs%3e%3ccircle%20fill='url(%23prefix__a)'%20cx='256'%20cy='256'%20r='256'/%3e%3cpath%20fill='%23fff'%20d='M115.88%20253.3c74.63-32.52%20124.39-53.95%20149.29-64.31%2071.1-29.57%2085.87-34.71%2095.5-34.88%202.12-.03%206.85.49%209.92%202.98%202.59%202.1%203.3%204.94%203.64%206.93.34%202%20.77%206.53.43%2010.08-3.85%2040.48-20.52%20138.71-29%20184.05-3.59%2019.19-10.66%2025.62-17.5%2026.25-14.86%201.37-26.15-9.83-40.55-19.27-22.53-14.76-35.26-23.96-57.13-38.37-25.28-16.66-8.89-25.81%205.51-40.77%203.77-3.92%2069.27-63.5%2070.54-68.9.16-.68.31-3.2-1.19-4.53s-3.71-.87-5.3-.51c-2.26.51-38.25%2024.3-107.98%2071.37-10.22%207.02-19.48%2010.43-27.77%2010.26-9.14-.2-26.72-5.17-39.79-9.42-16.03-5.21-28.77-7.97-27.66-16.82.57-4.61%206.92-9.32%2019.04-14.14z'/%3e%3c/svg%3e",Ca="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20height='72'%20viewBox='0%200%2072%2072'%20width='72'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M36,72%20L36,72%20C55.882251,72%2072,55.882251%2072,36%20L72,36%20C72,16.117749%2055.882251,-3.65231026e-15%2036,0%20L36,0%20C16.117749,3.65231026e-15%20-2.4348735e-15,16.117749%200,36%20L0,36%20C2.4348735e-15,55.882251%2016.117749,72%2036,72%20Z'%20fill='%2303ACEB'/%3e%3cpath%20d='M36.2045973,21.3635462%20C42.8260221,21.7532442%2046.70372,24.678887%2047.0810669,27.4106502%20C47.2653974,29.196281%2046.0831725,30.5844588%2044.0323741,30.5844588%20C41.0377259,30.5844588%2040.7317951,26.5740598%2035.5753641,26.5740598%20C33.2485524,26.5740598%2031.2846113,27.5453965%2031.2846113,29.6528674%20C31.2846113,34.056842%2047.8097035,31.498601%2047.8097035,41.1945185%20C47.8097035,46.7840666%2043.3558519,50.4454824%2036.7074048,50.4454824%20C30.8609405,50.4454824%2024.9835936,47.7835158%2025.0135111,43.1992333%20C25.023162,41.8159025%2026.0509739,40.5469607%2027.4175294,40.5469607%20C30.8609405,40.5469607%2030.8290928,45.6857388%2036.3117214,45.6857388%20C40.1575715,45.6857388%2041.4710476,43.5782679%2041.4710476,42.1086607%20C41.4710476,36.8041155%2024.8475171,40.0564454%2024.8475171,30.0784331%20C24.8475171,24.678887%2029.2646956,20.9544603%2036.2045973,21.3635462%20M15.4534129,36.0159951%20C15.4534129,47.4044813%2024.6438849,56.6389654%2035.9835936,56.6389654%20C37.2999649,56.6389654%2038.5854536,56.5100355%2039.8313739,56.2715636%20C41.6370416,57.3679526%2043.7534655,58%2046.0194771,58%20C52.6351114,57.9980612%2058,52.6091784%2058,45.9620172%20C58,43.6315847%2057.337954,41.4581947%2056.1981927,39.6134306%20C56.4018249,38.4453061%2056.5147394,37.2432528%2056.5147394,36.0159951%20C56.5147394,24.6255701%2047.3223373,15.3939941%2035.9835936,15.3939941%20C34.6932795,15.3939941%2033.4299877,15.5190465%2032.203369,15.7478244%20C30.3899807,14.6388332%2028.2600456,14%2025.9824531,14%20C19.3648886,14%2014,19.3888828%2014,26.036044%20C14,28.3538743%2014.6543253,30.5156315%2015.7834708,32.3526405%20C15.5701878,33.5420917%2015.4534129,34.7645024%2015.4534129,36.0159951'%20fill='%23FFF'/%3e%3c/g%3e%3c/svg%3e",Sa=t=>oo.get(`/product/checklist/view/${t}`),kn=no("product",()=>{const{$notify:t,$loading:o}=Mt(),a=w();return{getViewChecklistInfo:l=>(o.on(),Sa(l).then(e=>(console.log("checklistInfo",e),a.value=e,Promise.resolve(e))).catch(e=>(t.error("失敗：取得記錄清單詳細資訊"),Promise.reject(e))).finally(()=>{o.off()})),checklistInfo:a}}),xn=864e5,Ma=36e5,Jt=6e4,On="YYYY-MM-DDTHH:mm:ss.SSSZ",wa=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,ka=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Qt={};function xa(t,o){const a="("+o.days.join("|")+")",s=t+a;if(Qt[s]!==void 0)return Qt[s];const l="("+o.daysShort.join("|")+")",e="("+o.months.join("|")+")",n="("+o.monthsShort.join("|")+")",r={};let i=0;const d=t.replace(ka,u=>{switch(i++,u){case"YY":return r.YY=i,"(-?\\d{1,2})";case"YYYY":return r.YYYY=i,"(-?\\d{1,4})";case"M":return r.M=i,"(\\d{1,2})";case"Mo":return r.M=i++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return r.M=i,"(\\d{2})";case"MMM":return r.MMM=i,n;case"MMMM":return r.MMMM=i,e;case"D":return r.D=i,"(\\d{1,2})";case"Do":return r.D=i++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return r.D=i,"(\\d{2})";case"H":return r.H=i,"(\\d{1,2})";case"HH":return r.H=i,"(\\d{2})";case"h":return r.h=i,"(\\d{1,2})";case"hh":return r.h=i,"(\\d{2})";case"m":return r.m=i,"(\\d{1,2})";case"mm":return r.m=i,"(\\d{2})";case"s":return r.s=i,"(\\d{1,2})";case"ss":return r.s=i,"(\\d{2})";case"S":return r.S=i,"(\\d{1})";case"SS":return r.S=i,"(\\d{2})";case"SSS":return r.S=i,"(\\d{3})";case"A":return r.A=i,"(AM|PM)";case"a":return r.a=i,"(am|pm)";case"aa":return r.aa=i,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"do":return i++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return i++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return i++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return r.Z=i,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return r.ZZ=i,"(Z|[+-]\\d{2}\\d{2})";case"X":return r.X=i,"(-?\\d+)";case"x":return r.x=i,"(-?\\d{4,})";default:return i--,u[0]==="["&&(u=u.substring(1,u.length-1)),u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:r,regex:new RegExp("^"+d)};return Qt[s]=c,c}function Tn(t,o){return t!==void 0?t:o!==void 0?o.date:Mr.date}function qo(t,o=""){const a=t>0?"-":"+",s=Math.abs(t),l=Math.floor(s/60),e=s%60;return a+Z(l)+o+Z(e)}function Oa(t,o,a){let s=t.getFullYear(),l=t.getMonth();const e=t.getDate();return o.year!==void 0&&(s+=a*o.year,delete o.year),o.month!==void 0&&(l+=a*o.month,delete o.month),t.setDate(1),t.setMonth(2),t.setFullYear(s),t.setMonth(l),t.setDate(Math.min(e,po(t))),o.date!==void 0&&(t.setDate(t.getDate()+a*o.date),delete o.date),t}function Ta(t,o,a){const s=o.year!==void 0?o.year:t[`get${a}FullYear`](),l=o.month!==void 0?o.month-1:t[`get${a}Month`](),e=new Date(s,l+1,0).getDate(),n=Math.min(e,o.date!==void 0?o.date:t[`get${a}Date`]());return t[`set${a}Date`](1),t[`set${a}Month`](2),t[`set${a}FullYear`](s),t[`set${a}Month`](l),t[`set${a}Date`](n),delete o.year,delete o.month,delete o.date,t}function co(t,o,a){const s=$n(o),l=new Date(t),e=s.year!==void 0||s.month!==void 0||s.date!==void 0?Oa(l,s,a):l;for(const n in s){const r=wr(n);e[`set${r}`](e[`get${r}`]()+a*s[n])}return e}function $n(t){const o={...t};return t.years!==void 0&&(o.year=t.years,delete o.years),t.months!==void 0&&(o.month=t.months,delete o.months),t.days!==void 0&&(o.date=t.days,delete o.days),t.day!==void 0&&(o.date=t.day,delete o.day),t.hour!==void 0&&(o.hours=t.hour,delete o.hour),t.minute!==void 0&&(o.minutes=t.minute,delete o.minute),t.second!==void 0&&(o.seconds=t.second,delete o.second),t.millisecond!==void 0&&(o.milliseconds=t.millisecond,delete o.millisecond),o}function Pn(t,o,a){const s=$n(o),l=a===!0?"UTC":"",e=new Date(t),n=s.year!==void 0||s.month!==void 0||s.date!==void 0?Ta(e,s,l):e;for(const r in s){const i=r.charAt(0).toUpperCase()+r.slice(1);n[`set${l}${i}`](s[r])}return n}function $a(t,o,a){const s=Pa(t,o,a),l=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),e=l.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===e?l:co(l,{minutes:s.timezoneOffset-e},1)}function Pa(t,o,a,s,l){const e={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(t==null||t===""||typeof t!="string")return e;o===void 0&&(o=On);const n=Tn(a,dn.props),r=n.months,i=n.monthsShort,{regex:d,map:c}=xa(o,n),u=t.match(d);if(u===null)return e;let m="";if(c.X!==void 0||c.x!==void 0){const p=parseInt(u[c.X!==void 0?c.X:c.x],10);if(isNaN(p)===!0||p<0)return e;const h=new Date(p*(c.X!==void 0?1e3:1));e.year=h.getFullYear(),e.month=h.getMonth()+1,e.day=h.getDate(),e.hour=h.getHours(),e.minute=h.getMinutes(),e.second=h.getSeconds(),e.millisecond=h.getMilliseconds()}else{if(c.YYYY!==void 0)e.year=parseInt(u[c.YYYY],10);else if(c.YY!==void 0){const p=parseInt(u[c.YY],10);e.year=p<0?p:2e3+p}if(c.M!==void 0){if(e.month=parseInt(u[c.M],10),e.month<1||e.month>12)return e}else c.MMM!==void 0?e.month=i.indexOf(u[c.MMM])+1:c.MMMM!==void 0&&(e.month=r.indexOf(u[c.MMMM])+1);if(c.D!==void 0){if(e.day=parseInt(u[c.D],10),e.year===null||e.month===null||e.day<1)return e;const p=new Date(e.year,e.month,0).getDate();if(e.day>p)return e}c.H!==void 0?e.hour=parseInt(u[c.H],10)%24:c.h!==void 0&&(e.hour=parseInt(u[c.h],10)%12,(c.A&&u[c.A]==="PM"||c.a&&u[c.a]==="pm"||c.aa&&u[c.aa]==="p.m.")&&(e.hour+=12),e.hour=e.hour%24),c.m!==void 0&&(e.minute=parseInt(u[c.m],10)%60),c.s!==void 0&&(e.second=parseInt(u[c.s],10)%60),c.S!==void 0&&(e.millisecond=parseInt(u[c.S],10)*10**(3-u[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(m=c.Z!==void 0?u[c.Z].replace(":",""):u[c.ZZ],e.timezoneOffset=(m[0]==="+"?-1:1)*(60*m.slice(1,3)+1*m.slice(3,5)))}return e.dateHash=Z(e.year,6)+"/"+Z(e.month)+"/"+Z(e.day),e.timeHash=Z(e.hour)+":"+Z(e.minute)+":"+Z(e.second)+m,e}function Da(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function Ia(t,o){return Pn(new Date,t,o)}function Ba(t){const o=new Date(t).getDay();return o===0?7:o}function It(t){const o=new Date(t.getFullYear(),t.getMonth(),t.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const a=new Date(o.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const s=o.getTimezoneOffset()-a.getTimezoneOffset();o.setHours(o.getHours()-s);const l=(o-a)/(xn*7);return 1+Math.floor(l)}function Aa(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Xt(t,o){const a=new Date(t);return o===!0?Aa(a):a.getTime()}function Na(t,o,a,s={}){const l=Xt(o,s.onlyDate),e=Xt(a,s.onlyDate),n=Xt(t,s.onlyDate);return(n>l||s.inclusiveFrom===!0&&n===l)&&(n<e||s.inclusiveTo===!0&&n===e)}function za(t,o){return co(t,o,1)}function Ea(t,o){return co(t,o,-1)}function we(t,o,a){const s=new Date(t),l=`set${a===!0?"UTC":""}`;switch(o){case"year":case"years":s[`${l}Month`](0);case"month":case"months":s[`${l}Date`](1);case"day":case"days":case"date":s[`${l}Hours`](0);case"hour":case"hours":s[`${l}Minutes`](0);case"minute":case"minutes":s[`${l}Seconds`](0);case"second":case"seconds":s[`${l}Milliseconds`](0)}return s}function ja(t,o,a){const s=new Date(t),l=`set${a===!0?"UTC":""}`;switch(o){case"year":case"years":s[`${l}Month`](11);case"month":case"months":s[`${l}Date`](po(s));case"day":case"days":case"date":s[`${l}Hours`](23);case"hour":case"hours":s[`${l}Minutes`](59);case"minute":case"minutes":s[`${l}Seconds`](59);case"second":case"seconds":s[`${l}Milliseconds`](999)}return s}function Fa(t){let o=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(a=>{o=Math.max(o,new Date(a))}),o}function Ra(t){let o=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(a=>{o=Math.min(o,new Date(a))}),o}function $t(t,o,a){return(t.getTime()-t.getTimezoneOffset()*Jt-(o.getTime()-o.getTimezoneOffset()*Jt))/a}function Dn(t,o,a="days"){const s=new Date(t),l=new Date(o);switch(a){case"years":case"year":return s.getFullYear()-l.getFullYear();case"months":case"month":return(s.getFullYear()-l.getFullYear())*12+s.getMonth()-l.getMonth();case"days":case"day":case"date":return $t(we(s,"day"),we(l,"day"),xn);case"hours":case"hour":return $t(we(s,"hour"),we(l,"hour"),Ma);case"minutes":case"minute":return $t(we(s,"minute"),we(l,"minute"),Jt);case"seconds":case"second":return $t(we(s,"second"),we(l,"second"),1e3)}}function Bt(t){return Dn(t,we(t,"year"),"days")+1}function Va(t){return pn(t)===!0?"date":typeof t=="number"?"number":"string"}function Ha(t,o,a){const s=new Date(t);if(o){const l=new Date(o);if(s<l)return l}if(a){const l=new Date(a);if(s>l)return l}return s}function qa(t,o,a){const s=new Date(t),l=new Date(o);if(a===void 0)return s.getTime()===l.getTime();switch(a){case"second":case"seconds":if(s.getSeconds()!==l.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==l.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==l.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==l.getDate())return!1;case"month":case"months":if(s.getMonth()!==l.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==l.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${a}`)}return!0}function po(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function tt(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const Go={YY(t,o,a){const s=this.YYYY(t,o,a)%100;return s>=0?Z(s):"-"+Z(Math.abs(s))},YYYY(t,o,a){return a??t.getFullYear()},M(t){return t.getMonth()+1},Mo(t){return tt(t.getMonth()+1)},MM(t){return Z(t.getMonth()+1)},MMM(t,o){return o.monthsShort[t.getMonth()]},MMMM(t,o){return o.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return tt(this.Q(t))},D(t){return t.getDate()},Do(t){return tt(t.getDate())},DD(t){return Z(t.getDate())},DDD(t){return Bt(t)},DDDo(t){return tt(Bt(t))},DDDD(t){return Z(Bt(t),3)},d(t){return t.getDay()},do(t){return tt(t.getDay())},dd(t,o){return o.days[t.getDay()].slice(0,2)},ddd(t,o){return o.daysShort[t.getDay()]},dddd(t,o){return o.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return It(t)},wo(t){return tt(It(t))},ww(t){return Z(It(t))},H(t){return t.getHours()},HH(t){return Z(t.getHours())},h(t){const o=t.getHours();return o===0?12:o>12?o%12:o},hh(t){return Z(this.h(t))},m(t){return t.getMinutes()},mm(t){return Z(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return Z(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return Z(Math.floor(t.getMilliseconds()/10))},SSS(t){return Z(t.getMilliseconds(),3)},A(t){return t.getHours()<12?"AM":"PM"},a(t){return t.getHours()<12?"am":"pm"},aa(t){return t.getHours()<12?"a.m.":"p.m."},Z(t,o,a,s){const l=s??t.getTimezoneOffset();return qo(l,":")},ZZ(t,o,a,s){const l=s??t.getTimezoneOffset();return qo(l)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Ga(t,o,a,s,l){if(t!==0&&!t||t===1/0||t===-1/0)return;const e=new Date(t);if(isNaN(e))return;o===void 0&&(o=On);const n=Tn(a,dn.props);return o.replace(wa,(r,i)=>r in Go?Go[r](e,n,s,l):i===void 0?r:i.split("\\]").join("]"))}function Za(t){return pn(t)===!0?new Date(t.getTime()):t}const Zo={isValid:Da,extractDate:$a,buildDate:Ia,getDayOfWeek:Ba,getWeekOfYear:It,isBetweenDates:Na,addToDate:za,subtractFromDate:Ea,adjustDate:Pn,startOfDate:we,endOfDate:ja,getMaxDate:Fa,getMinDate:Ra,getDateDiff:Dn,getDayOfYear:Bt,inferDateFormat:Va,getDateBetween:Ha,isSameDate:qa,daysInMonth:po,formatDate:Ga,clone:Za},Ua=t=>{const o=Zo.extractDate(t,"YYYY-MM-DD HH:mm");return Zo.getDateDiff(new Date,o,"days")},In=(t,o)=>`http://maps.google.com/?ie=UTF8&t=p&z=13&q=${t},${o}&ll=${t},${o}`,Ya={class:"w-full flex no-wrap items-center gap-4"},Wa={class:"bg-secondary w-[33.33px] h-[33.33px] m-[3.335px] flex justify-center items-center",style:{"border-radius":"50%"}},Qa=F({__name:"RbMarkerDetailFeed",props:{notableObs:{},userComName:{}},setup(t){const o=t,{t:a}=mn(),{copy:s}=pa(),{$notify:l}=Mt(),e=kn(),{checklistInfo:n}=rt(e),r=b(()=>o.notableObs),i=b(()=>r.value?`https://ebird.org/checklist/${r.value.subId}`:"https://ebird.org/home"),d=b(()=>{var y;return(y=n.value)==null?void 0:y.obs.find(k=>{var f;return k.speciesCode===((f=r.value)==null?void 0:f.speciesCode)})}),c=b(()=>{var R,Y;if(!r.value)return"";const{comName:y,howMany:k,obsDt:f,locName:g,lat:M,lng:I}=r.value,A=In(M,I);return`${o.userComName} (${y}) (${k})<br />
- ${f} by ${(R=n.value)==null?void 0:R.userDisplayName}<br />
- ${g}<br />
- Map: <a href="${A}">${A}</a><br />
- checklist: <a href="${i.value}">${i.value}</a><br />
- Note: ${(Y=d.value)==null?void 0:Y.comments}<br />
(Source: <a href="https://z94624.github.io/beBird/">https://z94624.github.io/beBird/</a>)`}),u=b(()=>kr(c.value)),h=[{icon:"content_copy",name:"Copy",onClick:()=>{s(u.value||i.value).then(()=>{l.info(a("info_listInfoCopied"))})}},{icon:ga,iconColor:"#d44638",name:"Email",network:"email"},{icon:va,iconColor:"#1877F2",name:"Facebook",network:"facebook"},{icon:_a,customIcon:!0,name:"Messenger",network:"messenger"},{icon:ya,customIcon:!0,name:"LINE",network:"line"},{icon:ba,customIcon:!0,name:"Twitter",network:"twitter"},{icon:La,customIcon:!0,name:"Telegram",network:"telegram"},{icon:Ca,customIcon:!0,name:"Skype",network:"skype"},{icon:"more_horiz",name:"More",onClick:()=>{navigator.share&&navigator.share({title:o.userComName,text:u.value,url:i.value})}}];return(y,k)=>{const f=hn("ShareNetwork");return j(),W(gn,{dense:"",separator:""},{default:D(()=>[(j(),Pe(He,null,Ne(h,(g,M)=>(j(),Pe(He,{key:M},[g.onClick?At((j(),W(Nt,{key:0,clickable:"",onClick:g.onClick},{default:D(()=>[V("div",Ya,[V("div",Wa,[T(zo,{name:g.customIcon?`img:${g.icon}`:g.icon,color:"primary",size:"xs"},null,8,["name"])]),V("span",null,X(g.name),1)])]),_:2},1032,["onClick"])),[[Eo]]):At((j(),W(Nt,{key:1,clickable:""},{default:D(()=>{var I;return[T(f,{description:u.value,hashtags:y.userComName,network:g.network,title:`${y.userComName} [${((I=r.value)==null?void 0:I.sciName)??"{sciName}"}]`,url:i.value,class:"w-full flex no-wrap items-center gap-4"},{default:D(()=>[T(zo,{class:fn([g.customIcon?"m-[3.335px]":""]),name:g.customIcon?`img:${g.icon}`:g.icon,size:g.customIcon?"33.33px":"40px",style:vn({color:g.iconColor})},null,8,["class","name","size","style"]),V("span",null,X(g.name),1)]),_:2},1032,["description","hashtags","network","title","url"])]}),_:2},1024)),[[Eo]])],64))),64))]),_:1})}}}),Xa={class:"flex items-center gap-1"},Ja={class:"comName-font"},Ka={class:"sciName-font"},es=F({__name:"Checklist",props:{info:{},notableSpeciesCode:{}},setup(t){const o=t,a=s=>s===o.notableSpeciesCode;return(s,l)=>(j(),W(gn,{class:"flex flex-col gap-1"},{default:D(()=>[(j(!0),Pe(He,null,Ne(s.info.obs,(e,n)=>(j(),W(Nt,{key:n,active:a(e.speciesCode),class:fn([[`${a(e.speciesCode)?"notableItem":"normalItem"}`],"birdItem"]),href:`https://ebird.org/species/${e.speciesCode}`,target:"_blank"},{default:D(()=>[T(zt,{avatar:""},{default:D(()=>[St(X(e.howManyStr),1)]),_:2},1024),T(zt,null,{default:D(()=>{var r,i;return[V("div",Xa,[V("div",Ja,X(((r=e.tax)==null?void 0:r.comName)??e.speciesCode),1),V("div",Ka,X(((i=e.tax)==null?void 0:i.sciName)??e.speciesCode),1)])]}),_:2},1024)]),_:2},1032,["active","class","href"]))),128))]),_:1}))}}),ts=ro(es,[["__scopeId","data-v-2bcc7365"]]),os=t=>oo.get("/ref/taxonomy/ebird",{params:t});class ns{constructor(o){ve(this,"cat");ve(this,"fmt",jo.JSON);ve(this,"locale",at.ENGLISH);ve(this,"species");ve(this,"version");if(!o)return;const{cat:a=void 0,fmt:s=jo.JSON,locale:l=at.ENGLISH,species:e=void 0,version:n=void 0}=o;this.cat=a,this.fmt=s,this.locale=l,this.species=e,this.version=n}}const Bn=no("taxonomy",()=>{const{$notify:t,$loading:o}=Mt(),a=w([]);return{getEbirdTaxonomyInfo:async(l,e)=>(o.on(),os(new ns({locale:l,species:e})).then(n=>(a.value=n,Promise.resolve(n))).catch(n=>(t.error("失敗：取得物種資訊"),Promise.reject(n))).finally(()=>{o.off()})),taxInfo:a}}),An=no("preferredLanguage",()=>{const t=ha(),o=b(()=>t.value.filter(e=>e.includes("-")).map(e=>e.split("-")[0])),a=b(()=>o.value.includes(at.CHINESE)?at.CHINESE:o.value[0]),s=b(()=>t.value.filter(e=>e.includes("-")).map(e=>e.split("-")[1])),l=b(()=>s.value.includes(st.COUNTRYCODE_OF_TAIWAN)?st.COUNTRYCODE_OF_TAIWAN:s.value[0]);return{userLangs:t,userLangCodes:o,userLangCode:a,userCountryCodes:s,userCountryCode:l}}),rs=F({__name:"RbMarkerDetailList",props:{notableObs:{}},setup(t){const o=t,a=kn(),{checklistInfo:s}=rt(a),l=Bn(),e=An(),{userLangCode:n}=rt(e),r=b(()=>{var i;return(i=s.value)==null?void 0:i.obs.map(d=>d.speciesCode)});return K(()=>{o.notableObs&&a.getViewChecklistInfo(o.notableObs.subId).then(()=>{r.value&&l.getEbirdTaxonomyInfo(n.value,r.value.join(",")).then(i=>{s.value.obs=s.value.obs.map(d=>({...d,tax:i.find(c=>c.speciesCode===d.speciesCode)}))})})}),(i,d)=>{var u;const c=ts;return j(),W(c,{info:B(s)||[],notableSpeciesCode:(u=i.notableObs)==null?void 0:u.speciesCode},null,8,["info","notableSpeciesCode"])}}}),as={class:"flex no-wrap gap-1"},ss={class:"text-3xl"},is={class:"flex flex-col"},ls={class:"text-xs italic"},us={class:"text-xs"},cs=F({__name:"RbMarkerDetailDialog",setup(t,{expose:o}){const{isOpen:a,open:s,onOpen:l,close:e,onClose:n}=xr(),r=w(),i=w(),d=w("list"),c=b(()=>{var u;if(!(!r.value||!i.value))return((u=i.value[r.value.speciesCode])==null?void 0:u.comName)??r.value.comName});return l((u,m)=>{r.value=u,i.value=m}),n(()=>{r.value=void 0,i.value=void 0,d.value="list"}),o({open:s,close:e}),(u,m)=>{const p=$r,h=rs,y=Qa,k=Pr;return j(),W(k,{modelValue:B(a),"onUpdate:modelValue":m[2]||(m[2]=f=>Tr(a)?a.value=f:null),onClose:B(e)},{title:D(()=>{var f,g;return[V("div",as,[V("div",ss,X(c.value),1),V("div",is,[V("div",ls,X(((f=r.value)==null?void 0:f.sciName)??""),1),V("div",us,X(((g=r.value)==null?void 0:g.comName)??""),1)])])]}),content:D(()=>[T(p,{modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=f=>d.value=f),align:"justify",dense:"",style:{position:"sticky",top:"50px","z-index":"1"}},{default:D(()=>[T(Fo,{icon:"list_alt",name:"list"}),T(Fo,{icon:"rss_feed",name:"feed"})]),_:1},8,["modelValue"]),T(Or,{modelValue:d.value,"onUpdate:modelValue":m[1]||(m[1]=f=>d.value=f),animated:"","keep-alive":""},{default:D(()=>[T(Ro,{name:"list"},{default:D(()=>[T(h,{notableObs:r.value},null,8,["notableObs"])]),_:1}),T(Ro,{name:"feed"},{default:D(()=>[T(y,{notableObs:r.value,userComName:c.value},null,8,["notableObs","userComName"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onClose"])}}});let ds=0,bt;function Uo(t,o){bt===void 0&&(bt=document.createElement("div"),bt.style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(bt));const a=t.getBoundingClientRect(),s=bt.getBoundingClientRect(),{marginLeft:l,marginRight:e,marginTop:n,marginBottom:r}=window.getComputedStyle(t),i=parseInt(l,10)+parseInt(e,10),d=parseInt(n,10)+parseInt(r,10);return{left:a.left-s.left,top:a.top-s.top,width:a.right-a.left,height:a.bottom-a.top,widthM:a.right-a.left+(o===!0?0:i),heightM:a.bottom-a.top+(o===!0?0:d),marginH:o===!0?i:0,marginV:o===!0?d:0}}function Pt(t){return{width:t.scrollWidth,height:t.scrollHeight}}const Yo=["Top","Right","Bottom","Left"],Wo=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],ps=/-block|-inline|block-|inline-/,ms=/(-block|-inline|block-|inline-).*:/;function Qo(t,o){const a=window.getComputedStyle(t),s={};for(let l=0;l<o.length;l++){const e=o[l];if(a[e]==="")if(e==="cssText"){const n=a.length;let r="";for(let i=0;i<n;i++)ps.test(a[i])!==!0&&(r+=a[i]+": "+a[a[i]]+"; ");s[e]=r}else if(["borderWidth","borderStyle","borderColor"].indexOf(e)!==-1){const n=e.replace("border","");let r="";for(let i=0;i<Yo.length;i++){const d="border"+Yo[i]+n;r+=a[d]+" "}s[e]=r}else if(e==="borderRadius"){let n="",r="";for(let i=0;i<Wo.length;i++){const d=a[Wo[i]].split(" ");n+=d[0]+" ",r+=(d[1]===void 0?d[0]:d[1])+" "}s[e]=n+"/ "+r}else s[e]=a[e];else e==="cssText"?s[e]=a[e].split(";").filter(n=>ms.test(n)!==!0).join(";"):s[e]=a[e]}return s}const hs=["absolute","fixed","relative","sticky"];function Xo(t){let o=t,a=0;for(;o!==null&&o!==document;){const{position:s,zIndex:l}=window.getComputedStyle(o),e=Number(l);e>a&&(o===t||hs.includes(s)===!0)&&(a=e),o=o.parentNode}return a}function fs(t){return{from:t.from,to:t.to!==void 0?t.to:t.from}}function vs(t){return typeof t=="number"?t={duration:t}:typeof t=="function"&&(t={onEnd:t}),{...t,waitFor:t.waitFor===void 0?0:t.waitFor,duration:isNaN(t.duration)===!0?300:parseInt(t.duration,10),easing:typeof t.easing=="string"&&t.easing.length!==0?t.easing:"ease-in-out",delay:isNaN(t.delay)===!0?0:parseInt(t.delay,10),fill:typeof t.fill=="string"&&t.fill.length!==0?t.fill:"none",resize:t.resize===!0,useCSS:t.useCSS===!0||t.usecss===!0,hideFromClone:t.hideFromClone===!0||t.hidefromclone===!0,keepToClone:t.keepToClone===!0||t.keeptoclone===!0,tween:t.tween===!0,tweenFromOpacity:isNaN(t.tweenFromOpacity)===!0?.6:parseFloat(t.tweenFromOpacity),tweenToOpacity:isNaN(t.tweenToOpacity)===!0?.5:parseFloat(t.tweenToOpacity)}}function Jo(t){const o=typeof t;return o==="function"?t():o==="string"?document.querySelector(t):t}function Ko(t){return t&&t.ownerDocument===document&&t.parentNode!==null}function gs(t){let o=()=>!1,a=!1,s=!0;const l=fs(t),e=vs(t),n=Jo(l.from);if(Ko(n)!==!0)return o;typeof n.qMorphCancel=="function"&&n.qMorphCancel();let r,i,d,c;const u=n.parentNode,m=n.nextElementSibling,p=Uo(n,e.resize),{width:h,height:y}=Pt(u),{borderWidth:k,borderStyle:f,borderColor:g,borderRadius:M,backgroundColor:I,transform:A,position:R,cssText:Y}=Qo(n,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),ne=n.classList.toString(),C=n.style.cssText,_=n.cloneNode(!0),O=e.tween===!0?n.cloneNode(!0):void 0;O!==void 0&&(O.className=O.classList.toString().split(" ").filter(S=>/^bg-/.test(S)===!1).join(" ")),e.hideFromClone===!0&&_.classList.add("q-morph--internal"),_.setAttribute("aria-hidden","true"),_.style.transition="none",_.style.animation="none",_.style.pointerEvents="none",u.insertBefore(_,m),n.qMorphCancel=()=>{a=!0,_.remove(),O!==void 0&&O.remove(),e.hideFromClone===!0&&_.classList.remove("q-morph--internal"),n.qMorphCancel=void 0};const ie=()=>{const S=Jo(l.to);if(a===!0||Ko(S)!==!0){typeof n.qMorphCancel=="function"&&n.qMorphCancel();return}n!==S&&typeof S.qMorphCancel=="function"&&S.qMorphCancel(),e.keepToClone!==!0&&S.classList.add("q-morph--internal"),_.classList.add("q-morph--internal");const{width:xe,height:ze}=Pt(u),{width:Ie,height:Le}=Pt(S.parentNode);e.hideFromClone!==!0&&_.classList.remove("q-morph--internal"),S.qMorphCancel=()=>{a=!0,_.remove(),O!==void 0&&O.remove(),e.hideFromClone===!0&&_.classList.remove("q-morph--internal"),e.keepToClone!==!0&&S.classList.remove("q-morph--internal"),n.qMorphCancel=void 0,S.qMorphCancel=void 0};const Oe=()=>{if(a===!0){typeof S.qMorphCancel=="function"&&S.qMorphCancel();return}e.hideFromClone!==!0&&(_.classList.add("q-morph--internal"),_.innerHTML="",_.style.left=0,_.style.right="unset",_.style.top=0,_.style.bottom="unset",_.style.transform="none"),e.keepToClone!==!0&&S.classList.remove("q-morph--internal");const re=S.parentNode,{width:ye,height:$}=Pt(re),P=S.cloneNode(e.keepToClone);P.setAttribute("aria-hidden","true"),e.keepToClone!==!0&&(P.style.left=0,P.style.right="unset",P.style.top=0,P.style.bottom="unset",P.style.transform="none",P.style.pointerEvents="none"),P.classList.add("q-morph--internal");const te=S===n&&u===re?_:S.nextElementSibling;re.insertBefore(P,te);const{borderWidth:q,borderStyle:Ze,borderColor:Ue,borderRadius:Ye,backgroundColor:ft,transform:vt,position:xt,cssText:gt}=Qo(S,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),Ot=S.classList.toString(),Tt=S.style.cssText;S.style.cssText=gt,S.style.transform="none",S.style.animation="none",S.style.transition="none",S.className=Ot.split(" ").filter(x=>/^bg-/.test(x)===!1).join(" ");const Q=Uo(S,e.resize),_e=p.left-Q.left,me=p.top-Q.top,Ee=p.width/(Q.width>0?Q.width:10),We=p.height/(Q.height>0?Q.height:100),be=h-xe,he=y-ze,je=ye-Ie,Fe=$-Le,Ce=Math.max(p.widthM,be),Se=Math.max(p.heightM,he),Te=Math.max(Q.widthM,je),Be=Math.max(Q.heightM,Fe),Ae=n===S&&["absolute","fixed"].includes(xt)===!1&&["absolute","fixed"].includes(R)===!1;let Qe=xt==="fixed",Xe=re;for(;Qe!==!0&&Xe!==document;)Qe=window.getComputedStyle(Xe).position==="fixed",Xe=Xe.parentNode;if(e.hideFromClone!==!0&&(_.style.display="block",_.style.flex="0 0 auto",_.style.opacity=0,_.style.minWidth="unset",_.style.maxWidth="unset",_.style.minHeight="unset",_.style.maxHeight="unset",_.classList.remove("q-morph--internal")),e.keepToClone!==!0&&(P.style.display="block",P.style.flex="0 0 auto",P.style.opacity=0,P.style.minWidth="unset",P.style.maxWidth="unset",P.style.minHeight="unset",P.style.maxHeight="unset"),P.classList.remove("q-morph--internal"),typeof e.classes=="string"&&(S.className+=" "+e.classes),typeof e.style=="string")S.style.cssText+=" "+e.style;else if(Dt(e.style)===!0)for(const x in e.style)S.style[x]=e.style[x];const Je=Xo(_),Ke=Xo(S),et=Qe===!0?document.documentElement:{scrollLeft:0,scrollTop:0};S.style.position=Qe===!0?"fixed":"absolute",S.style.left=`${Q.left-et.scrollLeft}px`,S.style.right="unset",S.style.top=`${Q.top-et.scrollTop}px`,S.style.margin=0,e.resize===!0&&(S.style.minWidth="unset",S.style.maxWidth="unset",S.style.minHeight="unset",S.style.maxHeight="unset",S.style.overflow="hidden",S.style.overflowX="hidden",S.style.overflowY="hidden"),document.body.appendChild(S),O!==void 0&&(O.style.cssText=Y,O.style.transform="none",O.style.animation="none",O.style.transition="none",O.style.position=S.style.position,O.style.left=`${p.left-et.scrollLeft}px`,O.style.right="unset",O.style.top=`${p.top-et.scrollTop}px`,O.style.margin=0,O.style.pointerEvents="none",e.resize===!0&&(O.style.minWidth="unset",O.style.maxWidth="unset",O.style.minHeight="unset",O.style.maxHeight="unset",O.style.overflow="hidden",O.style.overflowX="hidden",O.style.overflowY="hidden"),document.body.appendChild(O));const v=x=>{n===S&&s!==!0?(S.style.cssText=C,S.className=ne):(S.style.cssText=Tt,S.className=Ot),P.parentNode===re&&re.insertBefore(S,P),_.remove(),P.remove(),O!==void 0&&O.remove(),o=()=>!1,n.qMorphCancel=void 0,S.qMorphCancel=void 0,typeof e.onEnd=="function"&&e.onEnd(s===!0?"to":"from",x===!0)};if(e.useCSS!==!0&&typeof S.animate=="function"){const x=e.resize===!0?{transform:`translate(${_e}px, ${me}px)`,width:`${Ce}px`,height:`${Se}px`}:{transform:`translate(${_e}px, ${me}px) scale(${Ee}, ${We})`},N=e.resize===!0?{width:`${Te}px`,height:`${Be}px`}:{},E=e.resize===!0?{width:`${Ce}px`,height:`${Se}px`}:{},G=e.resize===!0?{transform:`translate(${-1*_e}px, ${-1*me}px)`,width:`${Te}px`,height:`${Be}px`}:{transform:`translate(${-1*_e}px, ${-1*me}px) scale(${1/Ee}, ${1/We})`},fe=O!==void 0?{opacity:e.tweenToOpacity}:{backgroundColor:I},Re=O!==void 0?{opacity:1}:{backgroundColor:ft};c=S.animate([{margin:0,borderWidth:k,borderStyle:f,borderColor:g,borderRadius:M,zIndex:Je,transformOrigin:"0 0",...x,...fe},{margin:0,borderWidth:q,borderStyle:Ze,borderColor:Ue,borderRadius:Ye,zIndex:Ke,transformOrigin:"0 0",transform:vt,...N,...Re}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay}),i=O===void 0?void 0:O.animate([{opacity:e.tweenFromOpacity,margin:0,borderWidth:k,borderStyle:f,borderColor:g,borderRadius:M,zIndex:Je,transformOrigin:"0 0",transform:A,...E},{opacity:0,margin:0,borderWidth:q,borderStyle:Ze,borderColor:Ue,borderRadius:Ye,zIndex:Ke,transformOrigin:"0 0",...G}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay}),r=e.hideFromClone===!0||Ae===!0?void 0:_.animate([{margin:`${he<0?he/2:0}px ${be<0?be/2:0}px`,width:`${Ce+p.marginH}px`,height:`${Se+p.marginV}px`},{margin:0,width:0,height:0}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay}),d=e.keepToClone===!0?void 0:P.animate([Ae===!0?{margin:`${he<0?he/2:0}px ${be<0?be/2:0}px`,width:`${Ce+p.marginH}px`,height:`${Se+p.marginV}px`}:{margin:0,width:0,height:0},{margin:`${Fe<0?Fe/2:0}px ${je<0?je/2:0}px`,width:`${Te+Q.marginH}px`,height:`${Be+Q.marginV}px`}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay});const le=yt=>{r!==void 0&&r.cancel(),i!==void 0&&i.cancel(),d!==void 0&&d.cancel(),c.cancel(),c.removeEventListener("finish",le),c.removeEventListener("cancel",le),v(yt),r=void 0,i=void 0,d=void 0,c=void 0};n.qMorphCancel=()=>{n.qMorphCancel=void 0,a=!0,le()},S.qMorphCancel=()=>{S.qMorphCancel=void 0,a=!0,le()},c.addEventListener("finish",le),c.addEventListener("cancel",le),o=yt=>a===!0||c===void 0?!1:yt===!0?(le(!0),!0):(s=s!==!0,r!==void 0&&r.reverse(),i!==void 0&&i.reverse(),d!==void 0&&d.reverse(),c.reverse(),!0)}else{const x=`q-morph-anim-${++ds}`,N=document.createElement("style"),E=e.resize===!0?`
            transform: translate(${_e}px, ${me}px);
            width: ${Ce}px;
            height: ${Se}px;
          `:`transform: translate(${_e}px, ${me}px) scale(${Ee}, ${We});`,G=e.resize===!0?`
            width: ${Te}px;
            height: ${Be}px;
          `:"",fe=e.resize===!0?`
            width: ${Ce}px;
            height: ${Se}px;
          `:"",Re=e.resize===!0?`
            transform: translate(${-1*_e}px, ${-1*me}px);
            width: ${Te}px;
            height: ${Be}px;
          `:`transform: translate(${-1*_e}px, ${-1*me}px) scale(${1/Ee}, ${1/We});`,le=O!==void 0?`opacity: ${e.tweenToOpacity};`:`background-color: ${I};`,yt=O!==void 0?"opacity: 1;":`background-color: ${ft};`,mr=O===void 0?"":`
            @keyframes ${x}-from-tween {
              0% {
                opacity: ${e.tweenFromOpacity};
                margin: 0;
                border-width: ${k};
                border-style: ${f};
                border-color: ${g};
                border-radius: ${M};
                z-index: ${Je};
                transform-origin: 0 0;
                transform: ${A};
                ${fe}
              }

              100% {
                opacity: 0;
                margin: 0;
                border-width: ${q};
                border-style: ${Ze};
                border-color: ${Ue};
                border-radius: ${Ye};
                z-index: ${Ke};
                transform-origin: 0 0;
                ${Re}
              }
            }
          `,hr=e.hideFromClone===!0||Ae===!0?"":`
            @keyframes ${x}-from {
              0% {
                margin: ${he<0?he/2:0}px ${be<0?be/2:0}px;
                width: ${Ce+p.marginH}px;
                height: ${Se+p.marginV}px;
              }

              100% {
                margin: 0;
                width: 0;
                height: 0;
              }
            }
          `,fr=Ae===!0?`
            margin: ${he<0?he/2:0}px ${be<0?be/2:0}px;
            width: ${Ce+p.marginH}px;
            height: ${Se+p.marginV}px;
          `:`
            margin: 0;
            width: 0;
            height: 0;
          `,vr=e.keepToClone===!0?"":`
            @keyframes ${x}-to {
              0% {
                ${fr}
              }

              100% {
                margin: ${Fe<0?Fe/2:0}px ${je<0?je/2:0}px;
                width: ${Te+Q.marginH}px;
                height: ${Be+Q.marginV}px;
              }
            }
          `;N.innerHTML=`
          @keyframes ${x} {
            0% {
              margin: 0;
              border-width: ${k};
              border-style: ${f};
              border-color: ${g};
              border-radius: ${M};
              background-color: ${I};
              z-index: ${Je};
              transform-origin: 0 0;
              ${E}
              ${le}
            }

            100% {
              margin: 0;
              border-width: ${q};
              border-style: ${Ze};
              border-color: ${Ue};
              border-radius: ${Ye};
              background-color: ${ft};
              z-index: ${Ke};
              transform-origin: 0 0;
              transform: ${vt};
              ${G}
              ${yt}
            }
          }

          ${hr}

          ${mr}

          ${vr}
        `,document.head.appendChild(N);let Me="normal";_.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Me} ${e.fill} ${x}-from`,O!==void 0&&(O.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Me} ${e.fill} ${x}-from-tween`),P.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Me} ${e.fill} ${x}-to`,S.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Me} ${e.fill} ${x}`;const Ve=_t=>{_t===Object(_t)&&_t.animationName!==x||(S.removeEventListener("animationend",Ve),S.removeEventListener("animationcancel",Ve),v(),N.remove())};n.qMorphCancel=()=>{n.qMorphCancel=void 0,a=!0,Ve()},S.qMorphCancel=()=>{S.qMorphCancel=void 0,a=!0,Ve()},S.addEventListener("animationend",Ve),S.addEventListener("animationcancel",Ve),o=_t=>a===!0||!S||!_||!P?!1:_t===!0?(Ve(),!0):(s=s!==!0,Me=Me==="normal"?"reverse":"normal",_.style.animationDirection=Me,O.style.animationDirection=Me,P.style.animationDirection=Me,S.style.animationDirection=Me,!0)}};e.waitFor>0||e.waitFor==="transitionend"||e.waitFor===Object(e.waitFor)&&typeof e.waitFor.then=="function"?(e.waitFor>0?new Promise(ye=>setTimeout(ye,e.waitFor)):e.waitFor==="transitionend"?new Promise(ye=>{const $=()=>{P!==null&&(clearTimeout(P),P=null),S&&(S.removeEventListener("transitionend",$),S.removeEventListener("transitioncancel",$)),ye()};let P=setTimeout($,400);S.addEventListener("transitionend",$),S.addEventListener("transitioncancel",$)}):e.waitFor).then(Oe).catch(()=>{typeof S.qMorphCancel=="function"&&S.qMorphCancel()}):Oe()};return typeof t.onToggle=="function"&&t.onToggle(),requestAnimationFrame(ie),S=>o(S)}const Et={},ys=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],_s=["resize","useCSS","hideFromClone","keepToClone","tween"];function nt(t,o){t.clsAction!==o&&(t.clsAction=o,t.el.classList[o]("q-morph--invisible"))}function Nn(t){if(t.animating===!0||t.queue.length<2)return;const[o,a]=t.queue;t.animating=!0,o.animating=!0,a.animating=!0,nt(o,"remove"),nt(a,"remove");const s=gs({from:o.el,to:a.el,onToggle(){nt(o,"add"),nt(a,"remove")},...a.opts,onEnd(l,e){a.opts.onEnd!==void 0&&a.opts.onEnd(l,e),e!==!0&&(o.animating=!1,a.animating=!1,t.animating=!1,t.cancel=void 0,t.queue.shift(),Nn(t))}});t.cancel=()=>{s(!0),t.cancel=void 0}}function zn(t,o){const a=o.opts;_s.forEach(s=>{a[s]=t[s]===!0})}function bs(t,o){const a=typeof t=="string"&&t.length!==0?t.split(":"):[];o.name=a[0],o.group=a[1],Object.assign(o.opts,{duration:isNaN(a[2])===!0?300:parseFloat(a[2]),waitFor:a[3]})}function Ls(t,o){t.group!==void 0&&(o.group=t.group),t.name!==void 0&&(o.name=t.name);const a=o.opts;ys.forEach(s=>{t[s]!==void 0&&(a[s]=t[s])})}function Cs(t,o){if(o.name===t){const a=Et[o.group];a===void 0?(Et[o.group]={name:o.group,model:t,queue:[o],animating:!1},nt(o,"remove")):a.model!==t&&(a.model=t,a.queue.push(o),a.animating===!1&&a.queue.length===2&&Nn(a));return}o.animating===!1&&nt(o,"add")}function en(t,o){let a;Object(o)===o?(a=""+o.model,Ls(o,t),zn(o,t)):a=""+o,a!==t.model?(t.model=a,Cs(a,t)):t.animating===!1&&t.clsAction!==void 0&&t.el.classList[t.clsAction]("q-morph--invisible")}const tn=Dr({name:"morph",mounted(t,o){const a={el:t,animating:!1,opts:{}};zn(o.modifiers,a),bs(o.arg,a),en(a,o.value),t.__qmorph=a},updated(t,o){en(t.__qmorph,o.value)},beforeUnmount(t){const o=t.__qmorph,a=Et[o.group];a!==void 0&&a.queue.indexOf(o)!==-1&&(a.queue=a.queue.filter(l=>l!==o),a.queue.length===0&&(a.cancel!==void 0&&a.cancel(),delete Et[o.group])),o.clsAction==="add"&&t.classList.remove("q-morph--invisible"),delete t.__qmorph}}),Kt=(t,o)=>{for(const a of Object.keys(o))t.on(a,o[a])},mo=t=>{for(const o of Object.keys(t)){const a=t[o];a&&$e(a.cancel)&&a.cancel()}},En=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),$e=t=>typeof t=="function",ae=(t,o,a)=>{for(const s in a){const l="set"+En(s);t[l]?ge(()=>a[s],(e,n)=>{t[l](e,n)}):o[l]&&ge(()=>a[s],e=>{o[l](e)})}},H=(t,o,a={})=>{const s={...a};for(const l in t){const e=o[l],n=t[l];e&&(e&&e.custom===!0||n!==void 0&&(s[l]=n))}return s},ke=t=>{const o={},a={};for(const s in t)if(s.startsWith("on")&&!s.startsWith("onUpdate")&&s!=="onReady"){const l=s.slice(2).toLocaleLowerCase();o[l]=t[s]}else a[s]=t[s];return{listeners:o,attrs:a}},jn=async t=>{const o=await Promise.all([J(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),J(()=>import("./marker-icon-C2eJqgqv.js"),[]),J(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},Lt=t=>{const o=w((...s)=>console.warn(`Method ${t} has been invoked without being replaced`)),a=(...s)=>o.value(...s);return a.wrapped=o,ue(t,a),a},Ct=(t,o)=>t.wrapped.value=o,ee=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,U=t=>{const o=de(t);if(o===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return o},Fn=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:ee,assertInject:U,bindEventHandlers:Kt,cancelDebounces:mo,capitalizeFirstLetter:En,isFunction:$e,propsBinder:ae,propsToLeafletOptions:H,provideLeafletWrapper:Lt,remapEvents:ke,resetWebpackIcon:jn,updateLeafletWrapper:Ct},Symbol.toStringTag,{value:"Module"})),se=Symbol("useGlobalLeaflet"),De=Symbol("addLayer"),wt=Symbol("removeLayer"),kt=Symbol("registerControl"),ho=Symbol("registerLayerControl"),fo=Symbol("canSetParentHtml"),vo=Symbol("setParentHtml"),go=Symbol("setIcon"),yo=Symbol("bindPopup"),_o=Symbol("bindTooltip"),bo=Symbol("unbindPopup"),Lo=Symbol("unbindTooltip"),Rn=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:De,BindPopupInjection:yo,BindTooltipInjection:_o,CanSetParentHtmlInjection:fo,RegisterControlInjection:kt,RegisterLayerControlInjection:ho,RemoveLayerInjection:wt,SetIconInjection:go,SetParentHtmlInjection:vo,UnbindPopupInjection:bo,UnbindTooltipInjection:Lo,UseGlobalLeafletInjection:se},Symbol.toStringTag,{value:"Module"})),dt={options:{type:Object,default:()=>({}),custom:!0}},pt=t=>({options:t.options,methods:{}}),Ss=Object.freeze(Object.defineProperty({__proto__:null,componentProps:dt,setupComponent:pt},Symbol.toStringTag,{value:"Module"})),qe={...dt,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},mt=(t,o,a)=>{const s=U(De),l=U(wt),{options:e,methods:n}=pt(t),r=H(t,qe,e),i=()=>s({leafletObject:o.value}),d=()=>l({leafletObject:o.value}),c={...n,setAttribution(u){d(),o.value.options.attribution=u,t.visible&&i()},setName(){d(),t.visible&&i()},setLayerType(){d(),t.visible&&i()},setVisible(u){o.value&&(u?i():d())},bindPopup(u){if(!o.value||!$e(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(u)},bindTooltip(u){if(!o.value||!$e(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(u)},unbindTooltip(){o.value&&($e(o.value.closeTooltip)&&o.value.closeTooltip(),$e(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&($e(o.value.closePopup)&&o.value.closePopup(),$e(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(u){a.emit("update:visible",u)}};return ue(yo,c.bindPopup),ue(_o,c.bindTooltip),ue(bo,c.unbindPopup),ue(Lo,c.unbindTooltip),ao(()=>{c.unbindPopup(),c.unbindTooltip(),d()}),{options:r,methods:c}},Ht=(t,o)=>{if(t&&o.default)return z("div",{style:{display:"none"}},o.default())},Ms=Object.freeze(Object.defineProperty({__proto__:null,layerProps:qe,render:Ht,setupLayer:mt},Symbol.toStringTag,{value:"Module"})),Co={...qe,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Vn=(t,o,a)=>{const{options:s,methods:l}=mt(t,o,a);return{options:H(t,Co,s),methods:l}},ws=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:Co,setupInteractiveLayer:Vn},Symbol.toStringTag,{value:"Module"})),qt={...Co,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},So=(t,o,a)=>{const{options:s,methods:l}=Vn(t,o,a),e=H(t,qt,s),n=U(wt),r={...l,setStroke(i){o.value.setStyle({stroke:i})},setColor(i){o.value.setStyle({color:i})},setWeight(i){o.value.setStyle({weight:i})},setOpacity(i){o.value.setStyle({opacity:i})},setLineCap(i){o.value.setStyle({lineCap:i})},setLineJoin(i){o.value.setStyle({lineJoin:i})},setDashArray(i){o.value.setStyle({dashArray:i})},setDashOffset(i){o.value.setStyle({dashOffset:i})},setFill(i){o.value.setStyle({fill:i})},setFillColor(i){o.value.setStyle({fillColor:i})},setFillOpacity(i){o.value.setStyle({fillOpacity:i})},setFillRule(i){o.value.setStyle({fillRule:i})},setClassName(i){o.value.setStyle({className:i})}};return it(()=>{n({leafletObject:o.value})}),{options:e,methods:r}},ks=Object.freeze(Object.defineProperty({__proto__:null,pathProps:qt,setupPath:So},Symbol.toStringTag,{value:"Module"})),Gt={...qt,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},Mo=(t,o,a)=>{const{options:s,methods:l}=So(t,o,a),e=H(t,Gt,s),n={...l,setRadius(r){o.value.setRadius(r)},setLatLng(r){o.value.setLatLng(r)}};return{options:e,methods:n}},xs=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:Gt,setupCircleMarker:Mo},Symbol.toStringTag,{value:"Module"})),wo={...Gt,radius:{type:Number}},Hn=(t,o,a)=>{const{options:s,methods:l}=Mo(t,o,a),e=H(t,wo,s),n={...l};return{options:e,methods:n}},Os=Object.freeze(Object.defineProperty({__proto__:null,circleProps:wo,setupCircle:Hn},Symbol.toStringTag,{value:"Module"})),Ts=F({name:"LCircle",props:wo,setup(t,o){const a=w(),s=w(!1),l=de(se),e=U(De),{options:n,methods:r}=Hn(t,a,o);return K(async()=>{const{circle:i}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(i(t.latLng,n));const{listeners:d}=ke(o.attrs);a.value.on(d),ae(r,a.value,t),e({...t,...r,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),{ready:s,leafletObject:a}},render(){return Ht(this.ready,this.$slots)}}),on=F({name:"LCircleMarker",props:Gt,setup(t,o){const a=w(),s=w(!1),l=de(se),e=U(De),{options:n,methods:r}=Mo(t,a,o);return K(async()=>{const{circleMarker:i}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(i(t.latLng,n));const{listeners:d}=ke(o.attrs);a.value.on(d),ae(r,a.value,t),e({...t,...r,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),{ready:s,leafletObject:a}},render(){return Ht(this.ready,this.$slots)}}),Ge={...dt,position:{type:String}},ht=(t,o)=>{const{options:a,methods:s}=pt(t),l=H(t,Ge,a),e={...s,setPosition(n){o.value&&o.value.setPosition(n)}};return ao(()=>{o.value&&o.value.remove()}),{options:l,methods:e}},qn=t=>t.default?z("div",{ref:"root"},t.default()):null,$s=Object.freeze(Object.defineProperty({__proto__:null,controlProps:Ge,renderLControl:qn,setupControl:ht},Symbol.toStringTag,{value:"Module"}));F({name:"LControl",props:{...Ge,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,o){const a=w(),s=w(),l=de(se),e=U(kt),{options:n,methods:r}=ht(t,a);return K(async()=>{const{Control:i,DomEvent:d}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),c=i.extend({onAdd(){return s.value}});a.value=pe(new c(n)),ae(r,a.value,t),e({leafletObject:a.value}),t.disableClickPropagation&&s.value&&d.disableClickPropagation(s.value),t.disableScrollPropagation&&s.value&&d.disableScrollPropagation(s.value),oe(()=>o.emit("ready",a.value))}),{root:s,leafletObject:a}},render(){return qn(this.$slots)}});const Gn={...Ge,prefix:{type:String}},Ps=(t,o)=>{const{options:a,methods:s}=ht(t,o),l=H(t,Gn,a),e={...s,setPrefix(n){o.value.setPrefix(n)}};return{options:l,methods:e}},Ds=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:Gn,setupControlAttribution:Ps},Symbol.toStringTag,{value:"Module"})),ko={...Ge,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Zn=(t,o)=>{const{options:a}=ht(t,o);return{options:H(t,ko,a),methods:{addLayer(s){s.layerType==="base"?o.value.addBaseLayer(s.leafletObject,s.name):s.layerType==="overlay"&&o.value.addOverlay(s.leafletObject,s.name)},removeLayer(s){o.value.removeLayer(s.leafletObject)}}}},Is=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:ko,setupControlLayers:Zn},Symbol.toStringTag,{value:"Module"})),Bs=F({name:"LControlLayers",props:ko,setup(t,o){const a=w(),s=de(se),l=U(ho),{options:e,methods:n}=Zn(t,a);return K(async()=>{const{control:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r.layers(void 0,void 0,e)),ae(n,a.value,t),l({...t,...n,leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),xo={...Ge,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Un=(t,o)=>{const{options:a,methods:s}=ht(t,o);return{options:H(t,xo,a),methods:s}},As=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:xo,setupControlScale:Un},Symbol.toStringTag,{value:"Module"})),Ns=F({name:"LControlScale",props:xo,setup(t,o){const a=w(),s=de(se),l=U(kt),{options:e,methods:n}=Un(t,a);return K(async()=>{const{control:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r.scale(e)),ae(n,a.value,t),l({leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),Oo={...Ge,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Yn=(t,o)=>{const{options:a,methods:s}=ht(t,o);return{options:H(t,Oo,a),methods:s}},zs=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:Oo,setupControlZoom:Yn},Symbol.toStringTag,{value:"Module"})),Es=F({name:"LControlZoom",props:Oo,setup(t,o){const a=w(),s=de(se),l=U(kt),{options:e,methods:n}=Yn(t,a);return K(async()=>{const{control:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r.zoom(e)),ae(n,a.value,t),l({leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),Zt={...qe},To=(t,o,a)=>{const{options:s,methods:l}=mt(t,o,a),e=H(t,Zt,s),n={...l,addLayer(r){o.value.addLayer(r.leafletObject)},removeLayer(r){o.value.removeLayer(r.leafletObject)}};return ue(De,n.addLayer),ue(wt,n.removeLayer),{options:e,methods:n}},js=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:Zt,setupLayerGroup:To},Symbol.toStringTag,{value:"Module"})),Wn={...Zt},Fs=(t,o,a)=>{const{options:s,methods:l}=To(t,o,a),e=H(t,Wn,s),n={...l};return{options:e,methods:n}},Rs=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:Wn,setupFeatureGroup:Fs},Symbol.toStringTag,{value:"Module"})),Qn={...Zt,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},Vs=(t,o,a)=>{const{options:s,methods:l}=To(t,o,a),e=H(t,Qn,s);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(e.style=t.optionsStyle);const n={...l,setGeojson(r){o.value.clearLayers(),o.value.addData(r)},setOptionsStyle(r){o.value.setStyle(r)},getGeoJSONData(){return o.value.toGeoJSON()},getBounds(){return o.value.getBounds()}};return{options:e,methods:n}},Hs=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:Qn,setupGeoJSON:Vs},Symbol.toStringTag,{value:"Module"})),Ut={...qe,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},$o=(t,o,a)=>{const{options:s,methods:l}=mt(t,o,a),e=H(t,Ut,s),n={...l,setTileComponent(){var r;(r=o.value)==null||r.redraw()}};return ao(()=>{o.value.off()}),{options:e,methods:n}},Xn=(t,o,a,s)=>t.extend({initialize(l){this.tileComponents={},this.on("tileunload",this._unloadTile),a.setOptions(this,l)},createTile(l){const e=this._tileCoordsToKey(l);this.tileComponents[e]=o.create("div");const n=z({setup:s,props:["coords"]},{coords:l});return Ir(n,this.tileComponents[e]),this.tileComponents[e]},_unloadTile(l){const e=this._tileCoordsToKey(l.coords);this.tileComponents[e]&&(this.tileComponents[e].innerHTML="",this.tileComponents[e]=void 0)}}),qs=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Xn,gridLayerProps:Ut,setupGridLayer:$o},Symbol.toStringTag,{value:"Module"}));F({props:{...Ut,childRender:{type:Function,required:!0}},setup(t,o){const a=w(),s=w(null),l=w(!1),e=de(se),n=U(De),{options:r,methods:i}=$o(t,a,o);return K(async()=>{const{GridLayer:d,DomUtil:c,Util:u}=e?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),m=Xn(d,c,u,t.childRender);a.value=pe(new m(r));const{listeners:p}=ke(o.attrs);a.value.on(p),ae(i,a.value,t),n({...t,...i,leafletObject:a.value}),l.value=!0,oe(()=>o.emit("ready",a.value))}),{root:s,ready:l,leafletObject:a}},render(){return this.ready?z("div",{style:{display:"none"},ref:"root"}):null}});const eo={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Gs=Object.freeze(Object.defineProperty({__proto__:null,iconProps:eo},Symbol.toStringTag,{value:"Module"})),Zs=F({name:"LIcon",props:{...eo,...dt},setup(t,o){const a=w(),s=de(se),l=U(fo),e=U(vo),n=U(go);let r,i,d,c,u;const m=(k,f,g)=>{const M=k&&k.innerHTML;if(!f){g&&u&&l()&&e(M);return}const{listeners:I}=ke(o.attrs);u&&i(u,I);const{options:A}=pt(t),R=H(t,eo,A);M&&(R.html=M),u=R.html?d(R):c(R),r(u,I),n(u)},p=()=>{oe(()=>m(a.value,!0,!1))},h=()=>{oe(()=>m(a.value,!1,!0))},y={setIconUrl:p,setIconRetinaUrl:p,setIconSize:p,setIconAnchor:p,setPopupAnchor:p,setTooltipAnchor:p,setShadowUrl:p,setShadowRetinaUrl:p,setShadowAnchor:p,setBgPos:p,setClassName:p,setHtml:p};return K(async()=>{const{DomEvent:k,divIcon:f,icon:g}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);r=k.on,i=k.off,d=f,c=g,ae(y,{},t),new MutationObserver(h).observe(a.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),p()}),{root:a}},render(){const t=this.$slots.default?this.$slots.default():void 0;return z("div",{ref:"root"},t)}}),Jn={...qe,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},Us=(t,o,a)=>{const{options:s,methods:l}=mt(t,o,a),e=H(t,Jn,s),n={...l,setOpacity(r){return o.value.setOpacity(r)},setUrl(r){return o.value.setUrl(r)},setBounds(r){return o.value.setBounds(r)},getBounds(){return o.value.getBounds()},getElement(){return o.value.getElement()},bringToFront(){return o.value.bringToFront()},bringToBack(){return o.value.bringToBack()},setZIndex(r){return o.value.setZIndex(r)}};return{options:e,methods:n}},Ys=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Jn,setupImageOverlay:Us},Symbol.toStringTag,{value:"Module"}));function Kn(t,o,a){var s,l,e;o===void 0&&(o=50),a===void 0&&(a={});var n=(s=a.isImmediate)!=null&&s,r=(l=a.callback)!=null&&l,i=a.maxWait,d=Date.now(),c=[];function u(){if(i!==void 0){var p=Date.now()-d;if(p+o>=i)return i-p}return o}var m=function(){var p=[].slice.call(arguments),h=this;return new Promise(function(y,k){var f=n&&e===void 0;if(e!==void 0&&clearTimeout(e),e=setTimeout(function(){if(e=void 0,d=Date.now(),!n){var M=t.apply(h,p);r&&r(M),c.forEach(function(I){return(0,I.resolve)(M)}),c=[]}},u()),f){var g=t.apply(h,p);return r&&r(g),y(g)}c.push({resolve:y,reject:k})})};return m.cancel=function(p){e!==void 0&&clearTimeout(e),c.forEach(function(h){return(0,h.reject)(p)}),c=[]},m}const nn={...dt,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Ws=F({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:nn,setup(t,o){const a=w(),s=yn({ready:!1,layersToAdd:[],layersInControl:[]}),{options:l}=pt(t),e=H(t,nn,l),{listeners:n,attrs:r}=ke(o.attrs),i=Lt(De),d=Lt(wt),c=Lt(kt),u=Lt(ho);ue(se,t.useGlobalLeaflet);const m=b(()=>{const f={};return t.noBlockingAnimations&&(f.animate=!1),f}),p=b(()=>{const f=m.value;return t.padding&&(f.padding=t.padding),t.paddingTopLeft&&(f.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(f.paddingBottomRight=t.paddingBottomRight),f}),h={moveend:Kn(f=>{s.leafletRef&&(o.emit("update:zoom",s.leafletRef.getZoom()),o.emit("update:center",s.leafletRef.getCenter()),o.emit("update:bounds",s.leafletRef.getBounds()))}),overlayadd(f){const g=s.layersInControl.find(M=>M.name===f.name);g&&g.updateVisibleProp(!0)},overlayremove(f){const g=s.layersInControl.find(M=>M.name===f.name);g&&g.updateVisibleProp(!1)}};K(async()=>{t.useGlobalLeaflet&&(ee.L=ee.L||await J(()=>import("./index-BO03zjt7.js").then(C=>C.l),__vite__mapDeps([0,1])));const{map:f,CRS:g,Icon:M,latLngBounds:I,latLng:A,stamp:R}=t.useGlobalLeaflet?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{e.beforeMapMount&&await e.beforeMapMount()}catch(C){console.error(`The following error occurred running the provided beforeMapMount hook ${C.message}`)}await jn(M);const Y=typeof e.crs=="string"?g[e.crs]:e.crs;e.crs=Y||g.EPSG3857;const ne={addLayer(C){C.layerType!==void 0&&(s.layerControl===void 0?s.layersToAdd.push(C):s.layersInControl.find(_=>R(_.leafletObject)===R(C.leafletObject))||(s.layerControl.addLayer(C),s.layersInControl.push(C))),C.visible!==!1&&s.leafletRef.addLayer(C.leafletObject)},removeLayer(C){C.layerType!==void 0&&(s.layerControl===void 0?s.layersToAdd=s.layersToAdd.filter(_=>_.name!==C.name):(s.layerControl.removeLayer(C.leafletObject),s.layersInControl=s.layersInControl.filter(_=>R(_.leafletObject)!==R(C.leafletObject)))),s.leafletRef.removeLayer(C.leafletObject)},registerLayerControl(C){s.layerControl=C,s.layersToAdd.forEach(_=>{s.layerControl.addLayer(_)}),s.layersToAdd=[],c(C)},registerControl(C){s.leafletRef.addControl(C.leafletObject)},setZoom(C){const _=s.leafletRef.getZoom();C!==_&&s.leafletRef.setZoom(C,m.value)},setCrs(C){const _=s.leafletRef.getBounds();s.leafletRef.options.crs=C,s.leafletRef.fitBounds(_,{animate:!1,padding:[0,0]})},fitBounds(C){s.leafletRef.fitBounds(C,p.value)},setBounds(C){if(!C)return;const _=I(C);_.isValid()&&!(s.lastSetBounds||s.leafletRef.getBounds()).equals(_,0)&&(s.lastSetBounds=_,s.leafletRef.fitBounds(_))},setCenter(C){if(C==null)return;const _=A(C),O=s.lastSetCenter||s.leafletRef.getCenter();(O.lat!==_.lat||O.lng!==_.lng)&&(s.lastSetCenter=_,s.leafletRef.panTo(_,m.value))}};Ct(i,ne.addLayer),Ct(d,ne.removeLayer),Ct(c,ne.registerControl),Ct(u,ne.registerLayerControl),s.leafletRef=pe(f(a.value,e)),ae(ne,s.leafletRef,t),Kt(s.leafletRef,h),Kt(s.leafletRef,n),s.ready=!0,oe(()=>o.emit("ready",s.leafletRef))}),it(()=>{mo(h),s.leafletRef&&(s.leafletRef.off(),s.leafletRef.remove())});const y=b(()=>s.leafletRef),k=b(()=>s.ready);return{root:a,ready:k,leafletObject:y,attrs:r}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),z("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Qs=["Symbol(Comment)","Symbol(Text)"],Xs=["LTooltip","LPopup"],Po={...qe,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},er=(t,o,a)=>{const{options:s,methods:l}=mt(t,o,a),e=H(t,Po,s),n={...l,setDraggable(r){o.value.dragging&&(r?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(r){a.emit("update:latLng",r.latlng),a.emit("update:lat-lng",r.latlng)},setLatLng(r){if(r!=null&&o.value){const i=o.value.getLatLng();(!i||!i.equals(r))&&o.value.setLatLng(r)}}};return{options:e,methods:n}},tr=(t,o)=>{const a=o.slots.default&&o.slots.default();return a&&a.length&&a.some(Js)};function Js(t){return!(Qs.includes(t.type.toString())||Xs.includes(t.type.name))}const Ks=Object.freeze(Object.defineProperty({__proto__:null,markerProps:Po,setupMarker:er,shouldBlankIcon:tr},Symbol.toStringTag,{value:"Module"})),ei=F({name:"LMarker",props:Po,setup(t,o){const a=w(),s=w(!1),l=de(se),e=U(De);ue(fo,()=>{var d;return!!((d=a.value)!=null&&d.getElement())}),ue(vo,d=>{var c,u;const m=$e((c=a.value)==null?void 0:c.getElement)&&((u=a.value)==null?void 0:u.getElement());m&&(m.innerHTML=d)}),ue(go,d=>{var c;return((c=a.value)==null?void 0:c.setIcon)&&a.value.setIcon(d)});const{options:n,methods:r}=er(t,a,o),i={moveHandler:Kn(r.latLngSync)};return K(async()=>{const{marker:d,divIcon:c}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);tr(n,o)&&(n.icon=c({className:""})),a.value=pe(d(t.latLng,n));const{listeners:u}=ke(o.attrs);a.value.on(u),a.value.on("move",i.moveHandler),ae(r,a.value,t),e({...t,...r,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),it(()=>mo(i)),{ready:s,leafletObject:a}},render(){return Ht(this.ready,this.$slots)}}),Do={...qt,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},or=(t,o,a)=>{const{options:s,methods:l}=So(t,o,a),e=H(t,Do,s),n={...l,setSmoothFactor(r){o.value.setStyle({smoothFactor:r})},setNoClip(r){o.value.setStyle({noClip:r})},addLatLng(r){o.value.addLatLng(r)}};return{options:e,methods:n}},ti=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:Do,setupPolyline:or},Symbol.toStringTag,{value:"Module"})),jt={...Do},nr=(t,o,a)=>{const{options:s,methods:l}=or(t,o,a),e=H(t,jt,s),n={...l,toGeoJSON(r){return o.value.toGeoJSON(r)}};return{options:e,methods:n}},oi=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:jt,setupPolygon:nr},Symbol.toStringTag,{value:"Module"})),Io={...dt,content:{type:String,default:null}},Bo=(t,o)=>{const{options:a,methods:s}=pt(t),l={...s,setContent(e){o.value&&e!==null&&e!==void 0&&o.value.setContent(e)}};return{options:a,methods:l}},Ao=t=>t.default?z("div",{ref:"root"},t.default()):null,ni=Object.freeze(Object.defineProperty({__proto__:null,popperProps:Io,render:Ao,setupPopper:Bo},Symbol.toStringTag,{value:"Module"})),rr={...Io,latLng:{type:[Object,Array],default:()=>[]}},ar=(t,o)=>{const{options:a,methods:s}=Bo(t,o);return{options:a,methods:s}},ri=Object.freeze(Object.defineProperty({__proto__:null,popupProps:rr,setupPopup:ar},Symbol.toStringTag,{value:"Module"})),ai=F({name:"LPopup",props:rr,setup(t,o){const a=w(),s=w(null),l=de(se),e=U(yo),n=U(bo),{options:r,methods:i}=ar(t,a);return K(async()=>{const{popup:d}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(d(r)),t.latLng!==void 0&&a.value.setLatLng(t.latLng),ae(i,a.value,t);const{listeners:c}=ke(o.attrs);a.value.on(c),a.value.setContent(t.content||s.value||""),e(a.value),oe(()=>o.emit("ready",a.value))}),it(()=>{n()}),{root:s,leafletObject:a}},render(){return Ao(this.$slots)}}),sr={...jt,latLngs:{...jt.latLngs,required:!1},bounds:{type:Object,custom:!0}},si=(t,o,a)=>{const{options:s,methods:l}=nr(t,o,a),e=H(t,sr,s),n={...l,setBounds(r){o.value.setBounds(r)},setLatLngs(r){o.value.setBounds(r)}};return{options:e,methods:n}},ii=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:sr,setupRectangle:si},Symbol.toStringTag,{value:"Module"})),Yt={...Ut,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},No=(t,o,a)=>{const{options:s,methods:l}=$o(t,o,a),e=H(t,Yt,s),n={...l};return{options:e,methods:n}},li=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:No,tileLayerProps:Yt},Symbol.toStringTag,{value:"Module"})),ui=F({props:Yt,setup(t,o){const a=w(),s=de(se),l=U(De),{options:e,methods:n}=No(t,a,o);return K(async()=>{const{tileLayer:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r(t.url,e));const{listeners:i}=ke(o.attrs);a.value.on(i),ae(n,a.value,t),l({...t,...n,leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),ir={...Io},lr=(t,o)=>{const{options:a,methods:s}=Bo(t,o),l=U(Lo);return it(()=>{l()}),{options:a,methods:s}},ci=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:lr,tooltipProps:ir},Symbol.toStringTag,{value:"Module"})),di=F({name:"LTooltip",props:ir,setup(t,o){const a=w(),s=w(null),l=de(se),e=U(_o),{options:n,methods:r}=lr(t,a);return K(async()=>{const{tooltip:i}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(i(n)),ae(r,a.value,t);const{listeners:d}=ke(o.attrs);a.value.on(d),a.value.setContent(t.content||s.value||""),e(a.value),oe(()=>o.emit("ready",a.value))}),{root:s,leafletObject:a}},render(){return Ao(this.$slots)}}),ur={...Yt,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},pi=(t,o,a)=>{const{options:s,methods:l}=No(t,o,a);return{options:H(t,ur,s),methods:{...l}}},mi=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:pi,wmsTileLayerProps:ur},Symbol.toStringTag,{value:"Module"})),cr=Object.freeze(Object.defineProperty({__proto__:null,Circle:Os,CircleMarker:xs,Component:Ss,Control:$s,ControlAttribution:Ds,ControlLayers:Is,ControlScale:As,ControlZoom:zs,FeatureGroup:Rs,GeoJSON:Hs,GridLayer:qs,Icon:Gs,ImageOverlay:Ys,InteractiveLayer:ws,Layer:Ms,LayerGroup:js,Marker:Ks,Path:ks,Polygon:oi,Polyline:ti,Popper:ni,Popup:ri,Rectangle:ii,TileLayer:li,Tooltip:ci,WmsTileLayer:mi},Symbol.toStringTag,{value:"Module"}));var hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rn={exports:{}};(function(t,o){(function(a,s){s(o)})(hi,function(a){var s=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var n=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,n?this._withAnimation:this._noAnimation),this._markerCluster=n?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var n=e,r=this._zoom;if(e.__parent)for(;n.__parent._zoom>=r;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,n):this._animationAddLayerNonAnimated(e,n)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,n){if(!L.Util.isArray(e))return this.addLayer(e);var r=this._featureGroup,i=this._nonPointGroup,d=this.options.chunkedLoading,c=this.options.chunkInterval,u=this.options.chunkProgress,m=e.length,p=0,h=!0,y;if(this._map){var k=new Date().getTime(),f=L.bind(function(){var M=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();p<m;p++){if(d&&p%200===0){var I=new Date().getTime()-M;if(I>c)break}if(y=e[p],y instanceof L.LayerGroup){h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(y,e),m=e.length;continue}if(!y.getLatLng){i.addLayer(y),n||this.fire("layeradd",{layer:y});continue}if(!this.hasLayer(y)&&(this._addLayer(y,this._maxZoom),n||this.fire("layeradd",{layer:y}),y.__parent&&y.__parent.getChildCount()===2)){var A=y.__parent.getAllChildMarkers(),R=A[0]===y?A[1]:A[0];r.removeLayer(R)}}u&&u(p,m,new Date().getTime()-k),p===m?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(f,this.options.chunkDelay)},this);f()}else for(var g=this._needsClustering;p<m;p++){if(y=e[p],y instanceof L.LayerGroup){h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(y,e),m=e.length;continue}if(!y.getLatLng){i.addLayer(y);continue}this.hasLayer(y)||g.push(y)}return this},removeLayers:function(e){var n,r,i=e.length,d=this._featureGroup,c=this._nonPointGroup,u=!0;if(!this._map){for(n=0;n<i;n++){if(r=e[n],r instanceof L.LayerGroup){u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(r,e),i=e.length;continue}this._arraySplice(this._needsClustering,r),c.removeLayer(r),this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r})}return this}if(this._unspiderfy){this._unspiderfy();var m=e.slice(),p=i;for(n=0;n<p;n++){if(r=m[n],r instanceof L.LayerGroup){this._extractNonGroupLayers(r,m),p=m.length;continue}this._unspiderfyLayer(r)}}for(n=0;n<i;n++){if(r=e[n],r instanceof L.LayerGroup){u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(r,e),i=e.length;continue}if(!r.__parent){c.removeLayer(r),this.fire("layerremove",{layer:r});continue}this._removeLayer(r,!0,!0),this.fire("layerremove",{layer:r}),d.hasLayer(r)&&(d.removeLayer(r),r.clusterShow&&r.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var n=this._needsClustering.length-1;n>=0;n--)e.extend(this._needsClustering[n].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,n){var r=this._needsClustering.slice(),i=this._needsRemoving,d,c,u;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),c=r.length-1;c>=0;c--){for(d=!0,u=i.length-1;u>=0;u--)if(i[u].layer===r[c]){d=!1;break}d&&e.call(n,r[c])}this._nonPointGroup.eachLayer(e,n)},getLayers:function(){var e=[];return this.eachLayer(function(n){e.push(n)}),e},getLayer:function(e){var n=null;return e=parseInt(e,10),this.eachLayer(function(r){L.stamp(r)===e&&(n=r)}),n},hasLayer:function(e){if(!e)return!1;var n,r=this._needsClustering;for(n=r.length-1;n>=0;n--)if(r[n]===e)return!0;for(r=this._needsRemoving,n=r.length-1;n>=0;n--)if(r[n].layer===e)return!1;return!!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,n){var r=this._map;typeof n!="function"&&(n=function(){});var i=function(){(r.hasLayer(e)||r.hasLayer(e.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",i,this),this.off("animationend",i,this),r.hasLayer(e)?n():e.__parent._icon&&(this.once("spiderfied",n,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?n():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),e.__parent.zoomToBounds())},onAdd:function(e){this._map=e;var n,r,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,n=0,r=this._needsRemoving.length;n<r;n++)i=this._needsRemoving[n],i.newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(n=0,r=this._needsRemoving.length;n<r;n++)i=this._needsRemoving[n],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),r=this._needsClustering,this._needsClustering=[],this.addLayers(r,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var n=e;n&&!n._icon;)n=n.__parent;return n||null},_arraySplice:function(e,n){for(var r=e.length-1;r>=0;r--)if(e[r]===n)return e.splice(r,1),!0},_removeFromGridUnclustered:function(e,n){for(var r=this._map,i=this._gridUnclustered,d=Math.floor(this._map.getMinZoom());n>=d&&i[n].removeObject(e,r.project(e.getLatLng(),n));n--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var n=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),n&&e.target.openPopup()}},_moveChild:function(e,n,r){e._latlng=n,this.removeLayer(e),e._latlng=r,this.addLayer(e)},_childMarkerDragEnd:function(e){var n=e.target.__dragStart;delete e.target.__dragStart,n&&this._moveChild(e.target,n,e.target._latlng)},_removeLayer:function(e,n,r){var i=this._gridClusters,d=this._gridUnclustered,c=this._featureGroup,u=this._map,m=Math.floor(this._map.getMinZoom());n&&this._removeFromGridUnclustered(e,this._maxZoom);var p=e.__parent,h=p._markers,y;for(this._arraySplice(h,e);p&&(p._childCount--,p._boundsNeedUpdate=!0,!(p._zoom<m));)n&&p._childCount<=1?(y=p._markers[0]===e?p._markers[1]:p._markers[0],i[p._zoom].removeObject(p,u.project(p._cLatLng,p._zoom)),d[p._zoom].addObject(y,u.project(y.getLatLng(),p._zoom)),this._arraySplice(p.__parent._childClusters,p),p.__parent._markers.push(y),y.__parent=p.__parent,p._icon&&(c.removeLayer(p),r||c.addLayer(y))):p._iconNeedsUpdate=!0,p=p.__parent;delete e.__parent},_isOrIsParent:function(e,n){for(;n;){if(e===n)return!0;n=n.parentNode}return!1},fire:function(e,n,r){if(n&&n.layer instanceof L.MarkerCluster){if(n.originalEvent&&this._isOrIsParent(n.layer._icon,n.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,n,r)},listens:function(e,n){return L.FeatureGroup.prototype.listens.call(this,e,n)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,n)},_defaultIconCreateFunction:function(e){var n=e.getChildCount(),r=" marker-cluster-";return n<10?r+="small":n<100?r+="medium":r+="large",new L.DivIcon({html:"<div><span>"+n+"</span></div>",className:"marker-cluster"+r,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,n=this.options.spiderfyOnMaxZoom,r=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom;(n||i||d)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),r&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var n=e.layer,r=n;if(!(e.type==="clusterkeypress"&&e.originalEvent&&e.originalEvent.keyCode!==13)){for(;r._childClusters.length===1;)r=r._childClusters[0];r._zoom===this._maxZoom&&r._childCount===n._childCount&&this.options.spiderfyOnMaxZoom?n.spiderfy():this.options.zoomToBoundsOnClick&&n.zoomToBounds(),this.options.spiderfyOnEveryZoom&&n.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var n=this._map;this._inZoomAnimation||(this._shownPolygon&&n.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),n.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick,i=this.options.spiderfyOnEveryZoom,d=this._map;(e||r||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),n=Math.floor(this._map.getMinZoom()),r=this.options.maxClusterRadius,i=r;typeof r!="function"&&(i=function(){return r}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var d=e;d>=n;d--)this._gridClusters[d]=new L.DistanceGrid(i(d)),this._gridUnclustered[d]=new L.DistanceGrid(i(d));this._topClusterLevel=new this._markerCluster(this,n-1)},_addLayer:function(e,n){var r=this._gridClusters,i=this._gridUnclustered,d=Math.floor(this._map.getMinZoom()),c,u;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);n>=d;n--){c=this._map.project(e.getLatLng(),n);var m=r[n].getNearObject(c);if(m){m._addChild(e),e.__parent=m;return}if(m=i[n].getNearObject(c),m){var p=m.__parent;p&&this._removeLayer(m,!1);var h=new this._markerCluster(this,n,m,e);r[n].addObject(h,this._map.project(h._cLatLng,n)),m.__parent=h,e.__parent=h;var y=h;for(u=n-1;u>p._zoom;u--)y=new this._markerCluster(this,u,y),r[u].addObject(y,this._map.project(m.getLatLng(),u));p._addChild(y),this._removeFromGridUnclustered(m,n);return}i[n].addObject(e,c)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(e){var n=this._maxLat;return n!==void 0&&(e.getNorth()>=n&&(e._northEast.lat=1/0),e.getSouth()<=-n&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,n){if(n===e)this._featureGroup.addLayer(e);else if(n._childCount===2){n._addToMap();var r=n.getAllChildMarkers();this._featureGroup.removeLayer(r[0]),this._featureGroup.removeLayer(r[1])}else n._updateIcon()},_extractNonGroupLayers:function(e,n){var r=e.getLayers(),i=0,d;for(n=n||[];i<r.length;i++){if(d=r[i],d instanceof L.LayerGroup){this._extractNonGroupLayers(d,n);continue}n.push(d)}return n},_overrideMarkerIcon:function(e){var n=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return n}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,n){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,n){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,n){this._animationAddLayerNonAnimated(e,n)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,n){var r=this._getExpandedVisibleBounds(),i=this._featureGroup,d=Math.floor(this._map.getMinZoom()),c;this._ignoreMove=!0,this._topClusterLevel._recursively(r,e,d,function(u){var m=u._latlng,p=u._markers,h;for(r.contains(m)||(m=null),u._isSingleParent()&&e+1===n?(i.removeLayer(u),u._recursivelyAddChildrenToMap(null,n,r)):(u.clusterHide(),u._recursivelyAddChildrenToMap(m,n,r)),c=p.length-1;c>=0;c--)h=p[c],r.contains(h._latlng)||i.removeLayer(h)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(r,n),i.eachLayer(function(u){!(u instanceof L.MarkerCluster)&&u._icon&&u.clusterShow()}),this._topClusterLevel._recursively(r,e,n,function(u){u._recursivelyRestoreChildPositions(n)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(r,e,d,function(u){i.removeLayer(u),u.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,n){this._animationZoomOutSingle(this._topClusterLevel,e-1,n),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,n){var r=this,i=this._featureGroup;i.addLayer(e),n!==e&&(n._childCount>2?(n._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(n.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),r._animationEnd()})):(this._forceLayout(),r._animationStart(),r._animationZoomOutSingle(n,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,n,r){var i=this._getExpandedVisibleBounds(),d=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,d,n+1,r);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(i,r),this._enqueue(function(){if(e._childCount===1){var u=e._markers[0];this._ignoreMove=!0,u.setLatLng(u.getLatLng()),this._ignoreMove=!1,u.clusterShow&&u.clusterShow()}else e._recursively(i,r,d,function(m){m._recursivelyRemoveChildrenFromMap(i,d,n+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var l=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,n,r,i){L.Marker.prototype.initialize.call(this,r?r._cLatLng||r.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=n,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,r&&this._addChild(r),i&&this._addChild(i)},getAllChildMarkers:function(e,n){e=e||[];for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r].getAllChildMarkers(e,n);for(var i=this._markers.length-1;i>=0;i--)n&&this._markers[i].__dragStart||e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var n=this._childClusters.slice(),r=this._group._map,i=r.getBoundsZoom(this._bounds),d=this._zoom+1,c=r.getZoom(),u;n.length>0&&i>d;){d++;var m=[];for(u=0;u<n.length;u++)m=m.concat(n[u]._childClusters);n=m}i>d?this._group._map.setView(this._latlng,d):i<=c?this._group._map.setView(this._latlng,c+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,n){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(n||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(n||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e=this._markers,n=this._childClusters,r=0,i=0,d=this._childCount,c,u,m,p;if(d!==0){for(this._resetBounds(),c=0;c<e.length;c++)m=e[c]._latlng,this._bounds.extend(m),r+=m.lat,i+=m.lng;for(c=0;c<n.length;c++)u=n[c],u._boundsNeedUpdate&&u._recalculateBounds(),this._bounds.extend(u._bounds),m=u._wLatLng,p=u._childCount,r+=m.lat*p,i+=m.lng*p;this._latlng=this._wLatLng=new L.LatLng(r/d,i/d),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,n,r){this._recursively(e,this._group._map.getMinZoom(),r-1,function(i){var d=i._markers,c,u;for(c=d.length-1;c>=0;c--)u=d[c],u._icon&&(u._setPos(n),u.clusterHide())},function(i){var d=i._childClusters,c,u;for(c=d.length-1;c>=0;c--)u=d[c],u._icon&&(u._setPos(n),u.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,n,r,i){this._recursively(e,i,n,function(d){d._recursivelyAnimateChildrenIn(e,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),r),d._isSingleParent()&&r-1===i?(d.clusterShow(),d._recursivelyRemoveChildrenFromMap(e,n,r)):d.clusterHide(),d._addToMap()})},_recursivelyBecomeVisible:function(e,n){this._recursively(e,this._group._map.getMinZoom(),n,null,function(r){r.clusterShow()})},_recursivelyAddChildrenToMap:function(e,n,r){this._recursively(r,this._group._map.getMinZoom()-1,n,function(i){if(n!==i._zoom)for(var d=i._markers.length-1;d>=0;d--){var c=i._markers[d];r.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),i._group._featureGroup.addLayer(c))}},function(i){i._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var n=this._markers.length-1;n>=0;n--){var r=this._markers[n];r._backupLatlng&&(r.setLatLng(r._backupLatlng),delete r._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,n,r,i){var d,c;this._recursively(e,n-1,r-1,function(u){for(c=u._markers.length-1;c>=0;c--)d=u._markers[c],(!i||!i.contains(d._latlng))&&(u._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())},function(u){for(c=u._childClusters.length-1;c>=0;c--)d=u._childClusters[c],(!i||!i.contains(d._latlng))&&(u._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())})},_recursively:function(e,n,r,i,d){var c=this._childClusters,u=this._zoom,m,p;if(n<=u&&(i&&i(this),d&&u===r&&d(this)),u<n||u<r)for(m=c.length-1;m>=0;m--)p=c[m],p._boundsNeedUpdate&&p._recalculateBounds(),e.intersects(p._bounds)&&p._recursively(e,n,r,i,d)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,n){var r=this._getCoord(n.x),i=this._getCoord(n.y),d=this._grid,c=d[i]=d[i]||{},u=c[r]=c[r]||[],m=L.Util.stamp(e);this._objectPoint[m]=n,u.push(e)},updateObject:function(e,n){this.removeObject(e),this.addObject(e,n)},removeObject:function(e,n){var r=this._getCoord(n.x),i=this._getCoord(n.y),d=this._grid,c=d[i]=d[i]||{},u=c[r]=c[r]||[],m,p;for(delete this._objectPoint[L.Util.stamp(e)],m=0,p=u.length;m<p;m++)if(u[m]===e)return u.splice(m,1),p===1&&delete c[r],!0},eachObject:function(e,n){var r,i,d,c,u,m,p,h=this._grid;for(r in h){u=h[r];for(i in u)for(m=u[i],d=0,c=m.length;d<c;d++)p=e.call(n,m[d]),p&&(d--,c--)}},getNearObject:function(e){var n=this._getCoord(e.x),r=this._getCoord(e.y),i,d,c,u,m,p,h,y,k=this._objectPoint,f=this._sqCellSize,g=null;for(i=r-1;i<=r+1;i++)if(u=this._grid[i],u){for(d=n-1;d<=n+1;d++)if(m=u[d],m)for(c=0,p=m.length;c<p;c++)h=m[c],y=this._sqDist(k[L.Util.stamp(h)],e),(y<f||y<=f&&g===null)&&(f=y,g=h)}return g},_getCoord:function(e){var n=Math.floor(e/this._cellSize);return isFinite(n)?n:e},_sqDist:function(e,n){var r=n.x-e.x,i=n.y-e.y;return r*r+i*i}},function(){L.QuickHull={getDistant:function(e,n){var r=n[1].lat-n[0].lat,i=n[0].lng-n[1].lng;return i*(e.lat-n[0].lat)+r*(e.lng-n[0].lng)},findMostDistantPointFromBaseLine:function(e,n){var r=0,i=null,d=[],c,u,m;for(c=n.length-1;c>=0;c--){if(u=n[c],m=this.getDistant(u,e),m>0)d.push(u);else continue;m>r&&(r=m,i=u)}return{maxPoint:i,newPoints:d}},buildConvexHull:function(e,n){var r=[],i=this.findMostDistantPointFromBaseLine(e,n);return i.maxPoint?(r=r.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints)),r=r.concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)),r):[e[0]]},getConvexHull:function(e){var n=!1,r=!1,i=!1,d=!1,c=null,u=null,m=null,p=null,h=null,y=null,k;for(k=e.length-1;k>=0;k--){var f=e[k];(n===!1||f.lat>n)&&(c=f,n=f.lat),(r===!1||f.lat<r)&&(u=f,r=f.lat),(i===!1||f.lng>i)&&(m=f,i=f.lng),(d===!1||f.lng<d)&&(p=f,d=f.lng)}r!==n?(y=u,h=c):(y=p,h=m);var g=[].concat(this.buildConvexHull([y,h],e),this.buildConvexHull([h,y],e));return g}}}(),L.MarkerCluster.include({getConvexHull:function(){var e=this.getAllChildMarkers(),n=[],r,i;for(i=e.length-1;i>=0;i--)r=e[i].getLatLng(),n.push(r);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var e=this.getAllChildMarkers(null,!0),n=this._group,r=n._map,i=r.latLngToLayerPoint(this._latlng),d;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?d=this._group.options.spiderfyShapePositions(e.length,i):e.length>=this._circleSpiralSwitchover?d=this._generatePointsSpiral(e.length,i):(i.y+=10,d=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,d)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,n){var r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),i=r/this._2PI,d=this._2PI/e,c=[],u,m;for(i=Math.max(i,35),c.length=e,u=0;u<e;u++)m=this._circleStartAngle+u*d,c[u]=new L.Point(n.x+i*Math.cos(m),n.y+i*Math.sin(m))._round();return c},_generatePointsSpiral:function(e,n){var r=this._group.options.spiderfyDistanceMultiplier,i=r*this._spiralLengthStart,d=r*this._spiralFootSeparation,c=r*this._spiralLengthFactor*this._2PI,u=0,m=[],p;for(m.length=e,p=e;p>=0;p--)p<e&&(m[p]=new L.Point(n.x+i*Math.cos(u),n.y+i*Math.sin(u))._round()),u+=d/i+p*5e-4,i+=c/u;return m},_noanimationUnspiderfy:function(){var e=this._group,n=e._map,r=e._featureGroup,i=this.getAllChildMarkers(null,!0),d,c;for(e._ignoreMove=!0,this.setOpacity(1),c=i.length-1;c>=0;c--)d=i[c],r.removeLayer(d),d._preSpiderfyLatlng&&(d.setLatLng(d._preSpiderfyLatlng),delete d._preSpiderfyLatlng),d.setZIndexOffset&&d.setZIndexOffset(0),d._spiderLeg&&(n.removeLayer(d._spiderLeg),delete d._spiderLeg);e.fire("unspiderfied",{cluster:this,markers:i}),e._ignoreMove=!1,e._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,n){var r=this._group,i=r._map,d=r._featureGroup,c=this._group.options.spiderLegPolylineOptions,u,m,p,h;for(r._ignoreMove=!0,u=0;u<e.length;u++)h=i.layerPointToLatLng(n[u]),m=e[u],p=new L.Polyline([this._latlng,h],c),i.addLayer(p),m._spiderLeg=p,m._preSpiderfyLatlng=m._latlng,m.setLatLng(h),m.setZIndexOffset&&m.setZIndexOffset(1e6),d.addLayer(m);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,n){var r=this,i=this._group,d=i._map,c=i._featureGroup,u=this._latlng,m=d.latLngToLayerPoint(u),p=L.Path.SVG,h=L.extend({},this._group.options.spiderLegPolylineOptions),y=h.opacity,k,f,g,M,I,A;for(y===void 0&&(y=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(h.opacity=0,h.className=(h.className||"")+" leaflet-cluster-spider-leg"):h.opacity=y,i._ignoreMove=!0,k=0;k<e.length;k++)f=e[k],A=d.layerPointToLatLng(n[k]),g=new L.Polyline([u,A],h),d.addLayer(g),f._spiderLeg=g,p&&(M=g._path,I=M.getTotalLength()+.1,M.style.strokeDasharray=I,M.style.strokeDashoffset=I),f.setZIndexOffset&&f.setZIndexOffset(1e6),f.clusterHide&&f.clusterHide(),c.addLayer(f),f._setPos&&f._setPos(m);for(i._forceLayout(),i._animationStart(),k=e.length-1;k>=0;k--)A=d.layerPointToLatLng(n[k]),f=e[k],f._preSpiderfyLatlng=f._latlng,f.setLatLng(A),f.clusterShow&&f.clusterShow(),p&&(g=f._spiderLeg,M=g._path,M.style.strokeDashoffset=0,g.setStyle({opacity:y}));this.setOpacity(.3),i._ignoreMove=!1,setTimeout(function(){i._animationEnd(),i.fire("spiderfied",{cluster:r,markers:e})},200)},_animationUnspiderfy:function(e){var n=this,r=this._group,i=r._map,d=r._featureGroup,c=e?i._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):i.latLngToLayerPoint(this._latlng),u=this.getAllChildMarkers(null,!0),m=L.Path.SVG,p,h,y,k,f,g;for(r._ignoreMove=!0,r._animationStart(),this.setOpacity(1),h=u.length-1;h>=0;h--)p=u[h],p._preSpiderfyLatlng&&(p.closePopup(),p.setLatLng(p._preSpiderfyLatlng),delete p._preSpiderfyLatlng,g=!0,p._setPos&&(p._setPos(c),g=!1),p.clusterHide&&(p.clusterHide(),g=!1),g&&d.removeLayer(p),m&&(y=p._spiderLeg,k=y._path,f=k.getTotalLength()+.1,k.style.strokeDashoffset=f,y.setStyle({opacity:0})));r._ignoreMove=!1,setTimeout(function(){var M=0;for(h=u.length-1;h>=0;h--)p=u[h],p._spiderLeg&&M++;for(h=u.length-1;h>=0;h--)p=u[h],p._spiderLeg&&(p.clusterShow&&p.clusterShow(),p.setZIndexOffset&&p.setZIndexOffset(0),M>1&&d.removeLayer(p),i.removeLayer(p._spiderLeg),delete p._spiderLeg);r._animationEnd(),r.fire("unspiderfied",{cluster:n,markers:u})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var n,r;for(n in e)for(r=e[n].__parent;r;)r._iconNeedsUpdate=!0,r=r.__parent},_refreshSingleMarkerModeMarkers:function(e){var n,r;for(n in e)r=e[n],this.hasLayer(r)&&r.setIcon(this._overrideMarkerIcon(r))}}),L.Marker.include({refreshIconOptions:function(e,n){var r=this.options.icon;return L.setOptions(r,e),this.setIcon(r),n&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=s,a.MarkerCluster=l,Object.defineProperty(a,"__esModule",{value:!0})})})(rn,rn.exports);const an=(t,o)=>{let a;return(...s)=>{const l=()=>(a=void 0,t.apply(void 0,s));clearTimeout(a),a=setTimeout(l,o)}},{featureGroupProps:fi,setupFeatureGroup:vi}=cr.FeatureGroup,{AddLayerInjection:gi,RemoveLayerInjection:yi}=Rn,{propsToLeafletOptions:_i}=Fn,bi=["layeradd","layerremove","click","dblclick","mousedown","mouseup","mouseover","mouseout","contextmenu"],sn=[...bi,"clusterclick","clustermouseover","clustermouseout","animationend","spiderfied","unspiderfied"],dr={...fi,maxClusterRadius:{type:[Number,Function],default:80},clusterPane:{type:String,default:"markerPane"},spiderfyOnEveryZoom:{type:Boolean,default:!1},spiderfyOnMaxZoom:{type:Boolean,default:!0},showCoverageOnHover:{type:Boolean,default:!0},zoomToBoundsOnClick:{type:Boolean,default:!0},singleMarkerMode:{type:Boolean,default:!1},disableClusteringAtZoom:{type:Number,default:null},removeOutsideVisibleBounds:{type:Boolean,default:!0},animate:{type:Boolean,default:!0},animateAddingMarkers:{type:Boolean,default:!1},spiderfyShapePositions:{type:Function,default:null},spiderfyDistanceMultiplier:{type:Number,default:1},spiderLegPolylineOptions:{type:Object,default:()=>({weight:1.5,color:"#222",opacity:.5})},chunkedLoading:{type:Boolean,default:!1},chunkInterval:{type:Number,default:200},chunkDelay:{type:Number,default:50},chunkProgress:{type:Function,default:null},polygonOptions:{type:Object,default:()=>({})},iconCreateFunction:{type:Function,default:null}},Li=(t,o,a)=>{const{options:s,methods:l}=vi(t,o,a),e=_i(t,dr,s);let n=[];const r=an(()=>{var u,m;n.length===1?(u=o.value)==null||u.addLayer(n[0]):(m=o.value)==null||m.addLayers(n),n=[]},0);let i=[];const d=an(()=>{var u,m;i.length===1?(u=o.value)==null||u.removeLayer(i[0]):(m=o.value)==null||m.removeLayers(i),i=[]},0),c={...l,addLayer(u){var m;if(t.animateAddingMarkers)return(m=o.value)==null?void 0:m.addLayer(u.leafletObject);n.push(u.leafletObject),r()},removeLayer(u){var m;if(t.animateAddingMarkers)return(m=o.value)==null?void 0:m.removeLayer(u.leafletObject);i.push(u.leafletObject),d()},setMaxClusterRadius(){throw new Error("Max cluster radius can't be set dynamically")},setClusterPane(){throw new Error("Cluster pane can't be set dynamically")},setSpiderfyOnEveryZoom(u){o.value&&(o.value._unbindEvents(),o.value.options.spiderfyOnEveryZoom=u,o.value._bindEvents())},setSpiderfyOnMaxZoom(u){o.value&&(o.value._unbindEvents(),o.value.options.spiderfyOnMaxZoom=u,o.value._bindEvents())},setShowCoverageOnHover(u){o.value&&(o.value._unbindEvents(),o.value.options.showCoverageOnHover=u,o.value._bindEvents())},setZoomToBoundsOnClick(u){o.value&&(o.value._unbindEvents(),o.value.options.zoomToBoundsOnClick=u,o.value._bindEvents())},setSingleMarkerMode(){throw new Error("Single marker mode can't be set dynamically")},setDisableClusteringAtZoom(){throw new Error("Disable Clustering at zoom can't be set dynamically")},setRemoveOutsideVisibleBounds(u){o.value&&(o.value.options.removeOutsideVisibleBounds=u)},setAnimate(){throw new Error("Animate can't be set dynamically")},setAnimateAddingMarkers(u){o.value&&(o.value.options.animateAddingMarkers=u)},setSpiderfyShapePositions(u){o.value&&(o.value.options.spiderfyShapePositions=u)},setSpiderfyDistanceMultiplier(u){o.value&&(o.value.options.spiderfyDistanceMultiplier=u)},setSpiderLegPolylineOptions(u){o.value&&(o.value.options.spiderLegPolylineOptions=u)},setChunkedLoading(u){o.value&&(o.value.options.chunkedLoading=u)},setChunkInterval(u){o.value&&(o.value.options.chunkInterval=u)},setChunkDelay(u){o.value&&(o.value.options.chunkDelay=u)},setChunkProgress(u){o.value&&(o.value.options.chunkProgress=u)},setPolygonOptions(u){o.value&&(o.value.options.polygonOptions=u)},setIconCreateFunction(u){o.value&&(o.value._unbindEvents(),o.value.options.iconCreateFunction=u,o.value._bindEvents())}};return ue(gi,c.addLayer),ue(yi,c.removeLayer),{options:e,methods:c}},{propsBinder:Ci,assertInject:Si,WINDOW_OR_GLOBAL:Mi}=Fn,{AddLayerInjection:wi}=Rn,{render:ki}=cr.Layer,xi={props:dr,emits:["ready",...sn],setup(t,o){const a=w(),s=w(!1),l=Si(wi),{methods:e,options:n}=Li(t,a,o);return K(async()=>{var r;const{markerClusterGroup:i}=Mi.L;a.value=pe(i(n));const d=u=>m=>o.emit(u,m),c=()=>{const u={};for(const m of sn)u[m]=d(m);return u};(r=a.value)==null||r.on(c()),Ci(e,a.value,t),l({...t,...e,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),{ready:s,leafletObject:a}},render(){return ki(this.ready,this.$slots)}},Oi={class:"fullContainer relative"},Ti={key:0,class:"searchMenuContainer w-[33%] shadow-3 rounded-borders relative"},$i={class:"bottomRightToolbar flex flex-col gap-1"},Pi={class:"mapContainer"},Di=F({__name:"VlMap",props:{markersNumber:{}},emits:["research"],setup(t,{expose:o,emit:a}){Br($=>({60185150:m.value}));const s=a,{coords:l,locatedAt:e,error:n,resume:r,pause:i}=ma(),{isMobile:d}=Ar(),c=Nr(),{mapCenter:u}=rt(c),m=w("10px"),p=w(!1),h=w(null),y=w(),k=w([st.LATITUDE_OF_TAIWAN,st.LONGITUDE_OF_TAIWAN]),f=w(8),g=w("btn"),M=w(!1),I=w(!1),A=w({textColor:"black",color:"white"}),R=b(()=>[l.value.latitude,l.value.longitude]),Y=yn({center:"",zoom:"",bounds:""}),ne={btn:"panel",panel:"btn"},C=[{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",visible:!0},{name:"OpenTopoMap",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",visible:!1},{name:"Esri_WorldImagery",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",visible:!1},{name:"CartoDB_DarkMatter",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",visible:!1},{name:"CartoDB_Voyager",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",visible:!1},{name:"OPNVKarte",url:"https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",visible:!1},{name:"CyclOSM",url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",visible:!1}];ge(l,()=>{xe(R.value)},{deep:!0});const _=()=>{M.value=!M.value},O=$=>{p.value=$},ie=()=>{A.value={textColor:"white",color:"primary"},r()},S=()=>{A.value={textColor:"black",color:"white"},i()},xe=$=>{k.value=$},ze=$=>{switch(u.value=$,Y.center){case"locate":Y.center="",setTimeout(()=>Ie(16),500),Y.zoom="locate";break}},Ie=$=>{f.value=$},Le=()=>{},Oe=()=>{},re=()=>{g.value=ne[g.value]},ye=()=>{I.value=!I.value,I.value?(ie(),Y.center="locate"):S()};return so(()=>{i()}),o({setUpdateLoadingState:O,updateCenter:xe,updateZoom:Ie}),($,P)=>{const te=_n;return j(),Pe("div",Oi,[At(T(te,{class:"map-top-right",color:"primary",fab:"",icon:"search",round:"",size:"lg",onClick:P[0]||(P[0]=q=>B(d)?_():re())},null,512),[[tn,g.value,"btn",{resize:!0}]]),B(d)?(j(),W(zr,{key:1,modelValue:M.value,"onUpdate:modelValue":P[1]||(P[1]=q=>M.value=q),behavior:"mobile",bordered:"",class:"p-3",overlay:"",side:"right"},{default:D(()=>[ce($.$slots,"search-menu",{},void 0,!0)]),_:3},8,["modelValue"])):At((j(),Pe("div",Ti,[T(te,{class:"absolute -left-2 -bottom-2",color:"white",icon:"arrow_outward",round:"",size:"sm","text-color":"primary",onClick:re}),ce($.$slots,"search-menu",{},void 0,!0)])),[[tn,g.value,"panel",{resize:!0}]]),T(te,{icon:B(Er),loading:p.value,style:vn({top:g.value==="btn"?`calc(${m.value} + 57.6px + 4px)`:`calc(${m.value} + 244px + 4px)`}),class:"researchBtn",color:"secondary",fab:"",round:"",size:"lg","text-color":"primary",onClick:P[2]||(P[2]=q=>s("research"))},null,8,["icon","loading","style"]),V("div",$i,[T(te,{color:A.value.color,"text-color":A.value.textColor,dense:"",icon:"my_location",padding:"6.425px",size:"sm",style:{"border-radius":"8px"},onClick:ye},null,8,["color","text-color"])]),V("div",Pi,[T(B(Ws),{center:k.value,"onUpdate:center":[P[3]||(P[3]=q=>k.value=q),ze],zoom:f.value,"onUpdate:zoom":[P[4]||(P[4]=q=>f.value=q),Le],ref_key:"mapRef",ref:h,options:{zoomControl:!1,preferCanvas:!0},"use-global-leaflet":!0,class:"map",onReady:P[5]||(P[5]=q=>y.value=q),"onUpdate:bounds":Oe},{default:D(()=>[T(B(Bs),{position:"bottomleft"}),(j(),Pe(He,null,Ne(C,q=>T(B(ui),{key:q.name,name:q.name,url:q.url,visible:q.visible,attribution:"© 2024 smoBEE & Cake","layer-type":"base","onUpdate:visible":q.onUpdateVisibility},null,8,["name","url","visible","onUpdate:visible"])),64)),T(B(Ns)),T(B(Es),{position:"bottomright"}),B(e)?(j(),Pe(He,{key:0},[T(B(Ts),{"lat-lng":R.value,radius:Math.ceil(B(l).accuracy/2),stroke:!1},null,8,["lat-lng","radius"]),T(B(on),{fillOpacity:1,"lat-lng":R.value,radius:6.5,stroke:!1,fillColor:"#fff"},null,8,["lat-lng"]),T(B(on),{fillOpacity:1,"lat-lng":R.value,radius:3.5,fillColor:"#3388ff"},null,8,["lat-lng"])],64)):jr("",!0),$.markersNumber<=100?ce($.$slots,"markers",{key:1},void 0,!0):(j(),W(B(xi),{key:2},{default:D(()=>[ce($.$slots,"markers",{},void 0,!0)]),_:3}))]),_:3},8,["center","zoom"])])])}}}),Ii=ro(Di,[["__scopeId","data-v-a5d63a0b"]]),Bi={class:"ellipsis-2-lines"},Ai={class:"remark"},Ni=F({__name:"VlPopup",props:{options:{},navigationUrl:{}},emits:["detail"],setup(t,{emit:o}){const a=o,s=t,l=lt();ut();const e=b(()=>({offset:[0,-25],closeButton:!1,...s.options||{}}));return(n,r)=>{const i=_n,d=bn;return j(),W(B(ai),ct(B(l),{options:e.value}),{default:D(()=>[T(Fr,{class:"popupCard flex flex-col gap-2",flat:""},{default:D(()=>[T(Wt,{class:"!px-2 !pt-2 !pb-0"},{default:D(()=>[V("div",Bi,[ce(n.$slots,"location",{},void 0,!0)])]),_:3}),T(Wt,{class:"!px-2 !py-0"},{default:D(()=>[ce(n.$slots,"content",{},void 0,!0)]),_:3}),T(Rr,{align:"center",class:"!px-2 !py-0 no-wrap"},{default:D(()=>[ce(n.$slots,"buttons",{},()=>[T(i,{label:n.$t("detail"),class:"flex-1",color:"info",icon:"o_info",size:"sm",onClick:r[0]||(r[0]=c=>a("detail"))},null,8,["label"]),T(d,{href:n.navigationUrl,icon:B(fa),label:n.$t("navigation"),color:"positive",size:"sm"},null,8,["href","icon","label"])],!0)]),_:3}),T(Vr),T(Wt,{class:"!px-2 !pt-0 !pb-2"},{default:D(()=>[V("div",Ai,[ce(n.$slots,"remark",{},void 0,!0)])]),_:3})]),_:3})]),_:3},16,["options"])}}}),zi=ro(Ni,[["__scopeId","data-v-7d3f9af3"]]),Ei=F({__name:"VlTooltip",props:{permanent:{type:Boolean},options:{}},setup(t){const o=t,a=lt(),s=ut(),l=b(()=>({offset:[0,-17],permanent:o.permanent,...o.options||{}}));return(e,n)=>(j(),W(B(di),ct(B(a),{options:l.value}),Rt({_:2},[Ne(Object.keys(B(s)),(r,i)=>({name:r,fn:D(()=>[ce(e.$slots,r)])}))]),1040,["options"]))}}),ji="/beBird/assets/twt-Bs4LEmw2.svg",Fi=F({__name:"VlIcon",setup(t){const o=lt(),a=ut();return(s,l)=>(j(),W(B(Zs),ct(B(o),{"icon-anchor":[7,35],"icon-size":[14,35],"icon-url":B(ji)}),Rt({_:2},[Ne(Object.keys(B(a)),(e,n)=>({name:e,fn:D(()=>[ce(s.$slots,e)])}))]),1040,["icon-url"]))}}),Ri=Vt({name:"QInnerLoading",props:{...Ln,...Hr,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(t,{slots:o}){const a=Ft(),s=Cn(t,a.proxy.$q),{transitionProps:l,transitionStyle:e}=qr(t),n=b(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(s.value===!0?" q-inner-loading--dark":"")),r=b(()=>"q-inner-loading__label"+(t.labelClass!==void 0?` ${t.labelClass}`:""));function i(){const c=[z(Zr,{size:t.size,color:t.color})];return t.label!==void 0&&c.push(z("div",{class:r.value,style:t.labelStyle},[t.label])),c}function d(){return t.showing===!0?z("div",{class:n.value,style:e.value},o.default!==void 0?o.default():i()):null}return()=>z(Gr,l.value,d)}}),Vi='<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>',Hi=Vt({name:"QSpinnerFacebook",props:Ur,setup(t){const{cSize:o,classes:a}=Yr(t);return()=>z("svg",{class:a.value,width:o.value,height:o.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:Vi})}}),qi=F({__name:"SubLoading",props:{show:{type:Boolean}},setup(t){const o=lt();return ut(),(a,s)=>(j(),W(B(Ri),ct(B(o),{showing:a.show,dark:""}),{default:D(()=>[ce(a.$slots,"default",{},()=>[T(B(Hi),{color:B(o).color||"secondary",size:"3em"},null,8,["color"])])]),_:3},16,["showing"]))}}),ln="q-slider__marker-labels",Gi=t=>({value:t}),Zi=({marker:t})=>z("div",{key:t.value,style:t.style,class:t.classes},t.label),pr=[34,37,40,33,39,38],Ui={...Ln,...Xr,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Yi=["pan","update:modelValue","change"];function Wi({updateValue:t,updatePosition:o,getDragging:a,formAttrs:s}){const{props:l,emit:e,slots:n,proxy:{$q:r}}=Ft(),i=Cn(l,r),d=ea(s),c=w(!1),u=w(!1),m=w(!1),p=w(!1),h=b(()=>l.vertical===!0?"--v":"--h"),y=b(()=>"-"+(l.switchLabelSide===!0?"switched":"standard")),k=b(()=>l.vertical===!0?l.reverse===!0:l.reverse!==(r.lang.rtl===!0)),f=b(()=>isNaN(l.innerMin)===!0||l.innerMin<l.min?l.min:l.innerMin),g=b(()=>isNaN(l.innerMax)===!0||l.innerMax>l.max?l.max:l.innerMax),M=b(()=>l.disable!==!0&&l.readonly!==!0&&f.value<g.value),I=b(()=>{if(l.step===0)return x=>x;const v=(String(l.step).trim().split(".")[1]||"").length;return x=>parseFloat(x.toFixed(v))}),A=b(()=>l.step===0?1:l.step),R=b(()=>M.value===!0?l.tabindex||0:-1),Y=b(()=>l.max-l.min),ne=b(()=>g.value-f.value),C=b(()=>gt(f.value)),_=b(()=>gt(g.value)),O=b(()=>l.vertical===!0?k.value===!0?"bottom":"top":k.value===!0?"right":"left"),ie=b(()=>l.vertical===!0?"height":"width"),S=b(()=>l.vertical===!0?"width":"height"),xe=b(()=>l.vertical===!0?"vertical":"horizontal"),ze=b(()=>{const v={role:"slider","aria-valuemin":f.value,"aria-valuemax":g.value,"aria-orientation":xe.value,"data-step":l.step};return l.disable===!0?v["aria-disabled"]="true":l.readonly===!0&&(v["aria-readonly"]="true"),v}),Ie=b(()=>`q-slider q-slider${h.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(l.vertical===!0?"row":"column")+(l.disable===!0?" disabled":" q-slider--enabled"+(M.value===!0?" q-slider--editable":""))+(m.value==="both"?" q-slider--focus":"")+(l.label||l.labelAlways===!0?" q-slider--label":"")+(l.labelAlways===!0?" q-slider--label-always":"")+(i.value===!0?" q-slider--dark":"")+(l.dense===!0?" q-slider--dense q-slider--dense"+h.value:""));function Le(v){const x="q-slider__"+v;return`${x} ${x}${h.value} ${x}${h.value}${y.value}`}function Oe(v){const x="q-slider__"+v;return`${x} ${x}${h.value}`}const re=b(()=>{const v=l.selectionColor||l.color;return"q-slider__selection absolute"+(v!==void 0?` text-${v}`:"")}),ye=b(()=>Oe("markers")+" absolute overflow-hidden"),$=b(()=>Oe("track-container")),P=b(()=>Le("pin")),te=b(()=>Le("label")),q=b(()=>Le("text-container")),Ze=b(()=>Le("marker-labels-container")+(l.markerLabelsClass!==void 0?` ${l.markerLabelsClass}`:"")),Ue=b(()=>"q-slider__track relative-position no-outline"+(l.trackColor!==void 0?` bg-${l.trackColor}`:"")),Ye=b(()=>{const v={[S.value]:l.trackSize};return l.trackImg!==void 0&&(v.backgroundImage=`url(${l.trackImg}) !important`),v}),ft=b(()=>"q-slider__inner absolute"+(l.innerTrackColor!==void 0?` bg-${l.innerTrackColor}`:"")),vt=b(()=>{const v=_.value-C.value,x={[O.value]:`${100*C.value}%`,[ie.value]:v===0?"2px":`${100*v}%`};return l.innerTrackImg!==void 0&&(x.backgroundImage=`url(${l.innerTrackImg}) !important`),x});function xt(v){const{min:x,max:N,step:E}=l;let G=x+v*(N-x);if(E>0){const fe=(G-f.value)%E;G+=(Math.abs(fe)>=E/2?(fe<0?-1:1)*E:0)-fe}return G=I.value(G),ot(G,f.value,g.value)}function gt(v){return Y.value===0?0:(v-l.min)/Y.value}function Ot(v,x){const N=Jr(v),E=l.vertical===!0?ot((N.top-x.top)/x.height,0,1):ot((N.left-x.left)/x.width,0,1);return ot(k.value===!0?1-E:E,C.value,_.value)}const Tt=b(()=>Wr(l.markers)===!0?l.markers:A.value),Q=b(()=>{const v=[],x=Tt.value,N=l.max;let E=l.min;do v.push(E),E+=x;while(E<N);return v.push(N),v}),_e=b(()=>{const v=` ${ln}${h.value}-`;return ln+`${v}${l.switchMarkerLabelsSide===!0?"switched":"standard"}${v}${k.value===!0?"rtl":"ltr"}`}),me=b(()=>l.markerLabels===!1?null:be(l.markerLabels).map((v,x)=>({index:x,value:v.value,label:v.label||v.value,classes:_e.value+(v.classes!==void 0?" "+v.classes:""),style:{...he(v.value),...v.style||{}}}))),Ee=b(()=>({markerList:me.value,markerMap:je.value,classes:_e.value,getStyle:he})),We=b(()=>{const v=ne.value===0?"2px":100*Tt.value/ne.value;return{...vt.value,backgroundSize:l.vertical===!0?`2px ${v}%`:`${v}% 2px`}});function be(v){if(v===!1)return null;if(v===!0)return Q.value.map(Gi);if(typeof v=="function")return Q.value.map(N=>{const E=v(N);return Dt(E)===!0?{...E,value:N}:{value:N,label:E}});const x=({value:N})=>N>=l.min&&N<=l.max;return Array.isArray(v)===!0?v.map(N=>Dt(N)===!0?N:{value:N}).filter(x):Object.keys(v).map(N=>{const E=v[N],G=Number(N);return Dt(E)===!0?{...E,value:G}:{value:G,label:E}}).filter(x)}function he(v){return{[O.value]:`${100*(v-l.min)/Y.value}%`}}const je=b(()=>{if(l.markerLabels===!1)return null;const v={};return me.value.forEach(x=>{v[x.value]=x}),v});function Fe(){if(n["marker-label-group"]!==void 0)return n["marker-label-group"](Ee.value);const v=n["marker-label"]||Zi;return me.value.map(x=>v({marker:x,...Ee.value}))}const Ce=b(()=>[[Qr,Se,void 0,{[xe.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Se(v){v.isFinal===!0?(p.value!==void 0&&(o(v.evt),v.touch===!0&&t(!0),p.value=void 0,e("pan","end")),c.value=!1,m.value=!1):v.isFirst===!0?(p.value=a(v.evt),o(v.evt),t(),c.value=!0,e("pan","start")):(o(v.evt),t())}function Te(){m.value=!1}function Be(v){o(v,a(v)),t(),u.value=!0,c.value=!0,document.addEventListener("mouseup",Ae,!0)}function Ae(){u.value=!1,c.value=!1,t(!0),Te(),document.removeEventListener("mouseup",Ae,!0)}function Qe(v){o(v,a(v)),t(!0)}function Xe(v){pr.includes(v.keyCode)&&t(!0)}function Je(v){if(l.vertical===!0)return null;const x=r.lang.rtl!==l.reverse?1-v:v;return{transform:`translateX(calc(${2*x-1} * ${l.thumbSize} / 2 + ${50-100*x}%))`}}function Ke(v){const x=b(()=>u.value===!1&&(m.value===v.focusValue||m.value==="both")?" q-slider--focus":""),N=b(()=>`q-slider__thumb q-slider__thumb${h.value} q-slider__thumb${h.value}-${k.value===!0?"rtl":"ltr"} absolute non-selectable`+x.value+(v.thumbColor.value!==void 0?` text-${v.thumbColor.value}`:"")),E=b(()=>({width:l.thumbSize,height:l.thumbSize,[O.value]:`${100*v.ratio.value}%`,zIndex:m.value===v.focusValue?2:void 0})),G=b(()=>v.labelColor.value!==void 0?` text-${v.labelColor.value}`:""),fe=b(()=>Je(v.ratio.value)),Re=b(()=>"q-slider__text"+(v.labelTextColor.value!==void 0?` text-${v.labelTextColor.value}`:""));return()=>{const le=[z("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[z("path",{d:l.thumbPath})]),z("div",{class:"q-slider__focus-ring fit"})];return(l.label===!0||l.labelAlways===!0)&&(le.push(z("div",{class:P.value+" absolute fit no-pointer-events"+G.value},[z("div",{class:te.value,style:{minWidth:l.thumbSize}},[z("div",{class:q.value,style:fe.value},[z("span",{class:Re.value},v.label.value)])])])),l.name!==void 0&&l.disable!==!0&&d(le,"push")),z("div",{class:N.value,style:E.value,...v.getNodeData()},le)}}function et(v,x,N,E){const G=[];l.innerTrackColor!=="transparent"&&G.push(z("div",{key:"inner",class:ft.value,style:vt.value})),l.selectionColor!=="transparent"&&G.push(z("div",{key:"selection",class:re.value,style:v.value})),l.markers!==!1&&G.push(z("div",{key:"marker",class:ye.value,style:We.value})),E(G);const fe=[Kr("div",{key:"trackC",class:$.value,tabindex:x.value,...N.value},[z("div",{class:Ue.value,style:Ye.value},G)],"slide",M.value,()=>Ce.value)];if(l.markerLabels!==!1){const Re=l.switchMarkerLabelsSide===!0?"unshift":"push";fe[Re](z("div",{key:"markerL",class:Ze.value},Fe()))}return fe}return it(()=>{document.removeEventListener("mouseup",Ae,!0)}),{state:{active:c,focus:m,preventFocus:u,dragging:p,editable:M,classes:Ie,tabindex:R,attributes:ze,roundValueFn:I,keyStep:A,trackLen:Y,innerMin:f,innerMinRatio:C,innerMax:g,innerMaxRatio:_,positionProp:O,sizeProp:ie,isReversed:k},methods:{onActivate:Be,onMobileClick:Qe,onBlur:Te,onKeyup:Xe,getContent:et,getThumbRenderFn:Ke,convertRatioToModel:xt,convertModelToRatio:gt,getDraggingRatio:Ot}}}const Qi=()=>({}),Xi=Vt({name:"QSlider",props:{...Ui,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:Yi,setup(t,{emit:o}){const{proxy:{$q:a}}=Ft(),{state:s,methods:l}=Wi({updateValue:h,updatePosition:k,getDragging:y,formAttrs:ta(t)}),e=w(null),n=w(0),r=w(0);function i(){r.value=t.modelValue===null?s.innerMin.value:ot(t.modelValue,s.innerMin.value,s.innerMax.value)}ge(()=>`${t.modelValue}|${s.innerMin.value}|${s.innerMax.value}`,i),i();const d=b(()=>l.convertModelToRatio(r.value)),c=b(()=>s.active.value===!0?n.value:d.value),u=b(()=>{const M={[s.positionProp.value]:`${100*s.innerMinRatio.value}%`,[s.sizeProp.value]:`${100*(c.value-s.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(M.backgroundImage=`url(${t.selectionImg}) !important`),M}),m=l.getThumbRenderFn({focusValue:!0,getNodeData:Qi,ratio:c,label:b(()=>t.labelValue!==void 0?t.labelValue:r.value),thumbColor:b(()=>t.thumbColor||t.color),labelColor:b(()=>t.labelColor),labelTextColor:b(()=>t.labelTextColor)}),p=b(()=>s.editable.value!==!0?{}:a.platform.is.mobile===!0?{onClick:l.onMobileClick}:{onMousedown:l.onActivate,onFocus:f,onBlur:l.onBlur,onKeydown:g,onKeyup:l.onKeyup});function h(M){r.value!==t.modelValue&&o("update:modelValue",r.value),M===!0&&o("change",r.value)}function y(){return e.value.getBoundingClientRect()}function k(M,I=s.dragging.value){const A=l.getDraggingRatio(M,I);r.value=l.convertRatioToModel(A),n.value=t.snap!==!0||t.step===0?A:l.convertModelToRatio(r.value)}function f(){s.focus.value=!0}function g(M){if(!pr.includes(M.keyCode))return;oa(M);const I=([34,33].includes(M.keyCode)?10:1)*s.keyStep.value,A=([34,37,40].includes(M.keyCode)?-1:1)*(s.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*I;r.value=ot(s.roundValueFn.value(r.value+A),s.innerMin.value,s.innerMax.value),h()}return()=>{const M=l.getContent(u,s.tabindex,p,I=>{I.push(m())});return z("div",{ref:e,class:s.classes.value+(t.modelValue===null?" q-slider--no-value":""),...s.attributes.value,"aria-valuenow":t.modelValue},M)}}}),Ji=F({__name:"BaseSlider",props:{modelValue:{}},setup(t,{expose:o}){const a=lt(),s=ut(),l=w();return o({sliderRef:l}),(e,n)=>(j(),W(B(Xi),ct({ref_key:"sliderRef",ref:l},B(a),{modelValue:e.modelValue,style:{width:"-webkit-fill-available"}}),Rt({_:2},[Ne(Object.keys(B(s)),(r,i)=>({name:r,fn:D(()=>[ce(e.$slots,r)])}))]),1040,["modelValue"]))}}),Ki=F({__name:"DaysBackSlider",props:{snap:{type:Boolean,default:!0},reverse:{type:Boolean,default:!0},labelAlways:{type:Boolean,default:!0},markers:{type:[Boolean,Number],default:5},min:{default:1},max:{default:30},modelValue:{},switchLabelSide:{type:Boolean,default:!1}},emits:["update:model-value"],setup(t,{expose:o,emit:a}){const s=a,l=t,e=lt(),n=ut(),r=w(),i=b(()=>({...l,...e,markerLabels:d})),d=c=>[l.min,l.max].includes(c)?`${c}`:" ";return o({sliderRef:r}),(c,u)=>{const m=Ji;return j(),W(m,ct({ref_key:"sliderRef",ref:r},i.value,{"onUpdate:modelValue":u[0]||(u[0]=p=>s("update:model-value",p))}),Rt({_:2},[Ne(Object.keys(B(n)),(p,h)=>({name:p,fn:D(()=>[ce(c.$slots,p)])}))]),1040)}}}),el=F({__name:"RegionSelect",props:{region:{},country:{}},emits:["update:region","loading"],setup(t,{emit:o}){const a=o,s=t,{$notify:l}=Mt(),e=Sn(),n=w([]),r=w([]),i=b({get:()=>s.region,set:u=>a("update:region",u)});ge(r,u=>{n.value=u},{deep:!0}),ge(()=>s.country,()=>{i.value=void 0,c()});const d=(u,m)=>{if(!u){m(()=>{n.value=r.value});return}m(()=>{n.value=r.value.filter(p=>p.label.toLowerCase().includes(u.toLowerCase()))})},c=()=>{a("loading",!0),e.getSubRegionListInfo(na.SUBNATIONAL_1,s.country).then(u=>{r.value=u.map(m=>({label:m.name,value:m.code}))}).catch(()=>{l.error("失敗：更新地區")}).finally(()=>{a("loading",!1)})};return so(()=>{c()}),(u,m)=>{const p=Mn;return j(),W(p,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=h=>i.value=h),label:u.$t("region"),options:n.value,clearable:"","input-debounce":"0","use-input":"",onFilter:d},null,8,["modelValue","label","options"])}}}),tl=F({__name:"CountrySelect",props:{country:{default:st.COUNTRYCODE_OF_TAIWAN}},emits:["update:country"],setup(t,{emit:o}){const a=o,s=t,l=An(),{userCountryCode:e}=rt(l),n=Sn(),{countryOptions:r}=rt(n),i=w([]),d=b({get:()=>s.country,set:u=>a("update:country",u)});ge(r,u=>{i.value=u},{immediate:!0,deep:!0});const c=(u,m)=>{if(!u){m(()=>{i.value=r.value});return}m(()=>{i.value=r.value.filter(p=>p.label.toLowerCase().includes(u.toLowerCase()))})};return K(()=>{d.value||(d.value=r.value.find(u=>u.value===e.value).value)}),(u,m)=>{const p=hn("country-flag"),h=Mn;return j(),W(h,{modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=y=>d.value=y),label:u.$t("country"),options:i.value,"input-debounce":"0","use-input":"",onFilter:c},{option:D(y=>[T(Nt,ra(aa(y.itemProps)),{default:D(()=>[T(zt,{avatar:""},{default:D(()=>[T(p,{country:y.opt.value.toLowerCase(),shadow:""},null,8,["country"])]),_:2},1024),T(zt,null,{default:D(()=>[St(X(y.opt.label),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options"])}}}),ol=["top","middle","bottom"],nl=Vt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>ol.includes(t)}},setup(t,{slots:o}){const a=b(()=>t.align!==void 0?{verticalAlign:t.align}:null),s=b(()=>{const l=t.outline===!0&&t.color||t.textColor;return`q-badge flex inline items-center no-wrap q-badge--${t.multiLine===!0?"multi":"single"}-line`+(t.outline===!0?" q-badge--outline":t.color!==void 0?` bg-${t.color}`:"")+(l!==void 0?` text-${l}`:"")+(t.floating===!0?" q-badge--floating":"")+(t.rounded===!0?" q-badge--rounded":"")+(t.transparent===!0?" q-badge--transparent":"")});return()=>z("div",{class:s.value,style:a.value,role:"status","aria-label":t.label},sa(o.default,t.label!==void 0?[t.label]:[]))}}),rl=(t,o)=>oo.get(`/data/obs/${t}/recent/notable`,{params:o});class al{constructor(o){ve(this,"back",5);ve(this,"hotspot",!1);ve(this,"maxResults");ve(this,"sppLocale",at.ENGLISH);if(!o)return;const{back:a=5,hotspot:s=!1,maxResults:l=void 0,sppLocale:e=at.ENGLISH}=o;this.back=a,this.hotspot=s,this.maxResults=l,this.sppLocale=e}}class sl extends al{constructor(a){super(a);ve(this,"detail",Vo.SUBSET);ve(this,"r");if(!a)return;const{detail:s=Vo.SUBSET,r:l=void 0}=a;this.detail=s,this.r=l}}const il={class:"flex justify-center items-baseline gap-1"},ll={class:"comName-font"},ul={class:"sciName-font"},cl={class:"flex justify-between"},hl=F({__name:"RareBirds",setup(t){const{t:o,locale:a}=mn(),{$notify:s,$loading:l}=Mt(),e=Bn(),n=w(!1),r=w(st.COUNTRYCODE_OF_TAIWAN),i=w(null),d=w(new sl),c=w([]),u=w({}),m=w(),p=w(),h=b(()=>{let C=[];return c.value.forEach(_=>{C.find(ie=>ie.lat===_.lat&&ie.lng===_.lng)||C.push(_)}),C}),y=b(()=>h.value.map(C=>C.speciesCode)),k=b(()=>{const C=Object.keys(u.value);return y.value.filter(_=>!C.includes(_))});ge([r,i,d],()=>{localStorage.setItem("rareBirds-searchForm",JSON.stringify({c:r.value,r:i.value,n:d.value})),A()},{deep:!0}),ge(h,C=>{C.length&&m.value.updateCenter([C[0].lat,C[0].lng])},{deep:!0});const f=C=>{e.getEbirdTaxonomyInfo(a.value,C?y.value.join(","):k.value.join(",")).then(_=>{C&&(u.value={}),_&&_.forEach(O=>{u.value[O.speciesCode]=O})})};ge(k,C=>{C.length&&f(!1)}),ge(a,()=>{f(!0)});const g=C=>{r.value=C,m.value.updateZoom(4)},M=C=>{i.value=C||null,C&&m.value.updateZoom(8)},I=()=>{l.on(),m.value&&m.value.setUpdateLoadingState(!0),rl(i.value||r.value,d.value).then(C=>{console.log("notableObsList",C),C.length||s.warning("無紀錄"),c.value=C}).catch(()=>{s.error("失敗：取得近期稀有鳥紀錄")}).finally(()=>{l.off(),m.value&&m.value.setUpdateLoadingState(!1)})},A=ia(()=>{I()},1e3),R=C=>{const{latlng:_}=C;m.value.updateCenter([_.lat,_.lng])},Y=C=>{const _=Ua(C);return _?`${_} ${o("ago")}`:o("today")},ne=C=>{p.value.open(C,u.value)};return so(()=>{const C=localStorage.getItem("rareBirds-searchForm");if(C){const{c:_,r:O,n:ie}=JSON.parse(C);r.value=_,i.value=O,d.value=ie}else I()}),(C,_)=>{const O=tl,ie=el,S=Ki,xe=qi,ze=Fi,Ie=Ei,Le=bn,Oe=zi,re=Ii,ye=cs;return j(),Pe(He,null,[T(re,{ref_key:"mapRef",ref:m,"markers-number":h.value.length,onResearch:I},{"search-menu":D(()=>[T(ua,{class:"q-gutter-md","no-error-focus":"","no-reset-focus":""},{default:D(()=>[T(O,{country:r.value,"onUpdate:country":g},null,8,["country"]),T(ie,{country:r.value,region:i.value,onLoading:_[0]||(_[0]=$=>n.value=$),"onUpdate:region":M},null,8,["country","region"]),V("div",null,[V("span",null,X(C.$t("back")),1),T(S,{modelValue:d.value.back,"onUpdate:modelValue":_[1]||(_[1]=$=>d.value.back=$)},null,8,["modelValue"])])]),_:1}),T(xe,{show:n.value},null,8,["show"])]),markers:D(()=>[(j(!0),Pe(He,null,Ne(h.value,($,P)=>(j(),W(B(ei),{key:P,"lat-lng":[$.lat,$.lng],onClick:R},{default:D(()=>[T(ze),T(Ie,{permanent:""},{default:D(()=>{var te;return[St(X(((te=u.value[$.speciesCode])==null?void 0:te.comName)??$.comName),1)]}),_:2},1024),T(Oe,{"navigation-url":B(In)($.lat,$.lng),onDetail:te=>ne($)},{location:D(()=>[St(X($.locName),1)]),content:D(()=>[T(Le,{href:`https://ebird.org/species/${$.speciesCode}`},{default:D(()=>{var te;return[T(nl,{label:`×${$.howMany}`,color:"warning",floating:"",rounded:""},null,8,["label"]),T(la,{anchor:"top middle"},{default:D(()=>[St(X($.comName),1)]),_:2},1024),V("div",il,[V("div",ll,X(((te=u.value[$.speciesCode])==null?void 0:te.comName)??$.comName),1),V("div",ul,X($.sciName),1)])]}),_:2},1032,["href"])]),remark:D(()=>[V("div",cl,[V("div",null,X($.obsDt),1),V("div",null,X(Y($.obsDt)),1)])]),_:2},1032,["navigation-url","onDetail"])]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["markers-number"]),T(ye,{ref_key:"rbMarkerDetailDialogRef",ref:p},null,512)],64)}}});export{hl as default};
