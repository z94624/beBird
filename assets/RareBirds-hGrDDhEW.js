const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CCsCjOTf.js","assets/index-DH6zruvh.css"])))=>i.map(i=>d[i]);
var fr=Object.defineProperty;var vr=(t,o,a)=>o in t?fr(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a;var He=(t,o,a)=>vr(t,typeof o!="symbol"?o+"":o,a);import{r as w,s as gr,t as sn,a as y,u as _r,i as ln,n as yr,w as ve,b as br,d as to,e as K,g as Et,f as Lr,h as un,j as cn,k as Ft,P as dn,p as G,m as pn,q as Cr,v as Sr,x as F,y as mn,z as Ae,A as Mr,B as hn,o as E,C as W,D,c as $e,F as qe,E as ze,G as It,Q as Bt,H as V,I as T,J as zo,K as X,R as No,L as fn,M as vn,N as gn,O as At,S as Ct,_ as oo,T as no,U as B,V as wr,W as jo,X as Eo,Y as kr,Z as xr,$ as Or,a0 as Tr,a1 as $t,a2 as $r,a3 as de,a4 as J,a5 as pe,a6 as oe,a7 as N,a8 as _n,a9 as ue,aa as st,ab as ro,ac as Pr,ad as Dr,ae as Ir,af as Br,ag as at,ah as ao,ai as ce,aj as Ar,ak as zr,al as Nr,am as yn,an as it,ao as lt,ap as jr,aq as Wt,ar as Er,as as Fr,at as ut,au as bn,av as Rt,aw as Vt,ax as Ln,ay as Rr,az as Cn,aA as Vr,aB as Hr,aC as qr,aD as Zr,aE as Gr,aF as Ur,aG as Yr,aH as Wr,aI as nt,aJ as Qr,aK as Xr,aL as Jr,aM as Kr,aN as ea,aO as Sn,aP as ta,aQ as Mn,aR as zt,aS as oa,aT as na,aU as ra,aV as Fo,aW as aa,aX as sa}from"./index-CCsCjOTf.js";import{Q as ia}from"./QForm-CVN5GlVh.js";function la(t){var o;const a=to(t);return(o=a==null?void 0:a.$el)!=null?o:a}const wn=ln?window:void 0,so=ln?window.navigator:void 0;function io(...t){let o,a,s,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([a,s,l]=t,o=wn):[o,a,s,l]=t,!o)return yr;Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]);const e=[],n=()=>{e.forEach(c=>c()),e.length=0},r=(c,u,m,p)=>(c.addEventListener(u,m,p),()=>c.removeEventListener(u,m,p)),i=ve(()=>[la(o),to(l)],([c,u])=>{if(n(),!c)return;const m=br(u)?{...u}:u;e.push(...a.flatMap(p=>s.map(h=>r(c,p,h,m))))},{immediate:!0,flush:"post"}),d=()=>{i(),n()};return sn(d),d}function ua(){const t=w(!1),o=Et();return o&&K(()=>{t.value=!0},o),t}function lo(t){const o=ua();return y(()=>(o.value,!!t()))}function Ro(t,o={}){const{controls:a=!1,navigator:s=so}=o,l=lo(()=>s&&"permissions"in s);let e;const n=typeof t=="string"?{name:t}:t,r=w(),i=()=>{e&&(r.value=e.state)},d=Lr(async()=>{if(l.value){if(!e)try{e=await s.permissions.query(n),io(e,"change",i),i()}catch{r.value="prompt"}return e}});return d(),a?{state:r,isSupported:l,query:d}:r}function ca(t={}){const{navigator:o=so,read:a=!1,source:s,copiedDuring:l=1500,legacy:e=!1}=t,n=lo(()=>o&&"clipboard"in o),r=Ro("clipboard-read"),i=Ro("clipboard-write"),d=y(()=>n.value||e),c=w(""),u=w(!1),m=_r(()=>u.value=!1,l);function p(){n.value&&g(r.value)?o.clipboard.readText().then(f=>{c.value=f}):c.value=k()}d.value&&a&&io(["copy","cut"],p);async function h(f=to(s)){d.value&&f!=null&&(n.value&&g(i.value)?await o.clipboard.writeText(f):_(f),c.value=f,u.value=!0,m.start())}function _(f){const M=document.createElement("textarea");M.value=f??"",M.style.position="absolute",M.style.opacity="0",document.body.appendChild(M),M.select(),document.execCommand("copy"),M.remove()}function k(){var f,M,I;return(I=(M=(f=document==null?void 0:document.getSelection)==null?void 0:f.call(document))==null?void 0:M.toString())!=null?I:""}function g(f){return f==="granted"||f==="prompt"}return{isSupported:d,text:c,copied:u,copy:h}}function da(t={}){const{enableHighAccuracy:o=!0,maximumAge:a=3e4,timeout:s=27e3,navigator:l=so,immediate:e=!0}=t,n=lo(()=>l&&"geolocation"in l),r=w(null),i=gr(null),d=w({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function c(h){r.value=h.timestamp,d.value=h.coords,i.value=null}let u;function m(){n.value&&(u=l.geolocation.watchPosition(c,h=>i.value=h,{enableHighAccuracy:o,maximumAge:a,timeout:s}))}e&&m();function p(){u&&l&&l.geolocation.clearWatch(u)}return sn(()=>{p()}),{isSupported:n,coords:d,locatedAt:r,error:i,resume:m,pause:p}}function pa(t={}){const{window:o=wn}=t;if(!o)return w(["en"]);const a=o.navigator,s=w(a.languages);return io(o,"languagechange",()=>{s.value=a.languages}),s}const ma="M12 18C12 14.69 14.69 12 18 12C19.09 12 20.12 12.3 21 12.81V12L18.92 6C18.72 5.42 18.16 5 17.5 5H6.5C5.84 5 5.28 5.42 5.08 6L3 12V20C3 20.55 3.45 21 4 21H5C5.55 21 6 20.55 6 20V19H12.09C12.04 18.67 12 18.34 12 18M6.5 6.5H17.5L19 11H5L6.5 6.5M6.5 16C5.67 16 5 15.33 5 14.5S5.67 13 6.5 13 8 13.67 8 14.5 7.33 16 6.5 16M19 21V19H15V17H19V15L22 18L19 21",ha="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z",fa="M20,18H18V9.25L12,13L6,9.25V18H4V6H5.2L12,10.25L18.8,6H20M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z",va="/beBird/assets/lineLogo-CG_4J39D.svg",ga="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20height='72'%20viewBox='0%200%2072%2072'%20width='72'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M36,72%20L36,72%20C55.882251,72%2072,55.882251%2072,36%20L72,36%20C72,16.117749%2055.882251,-3.65231026e-15%2036,0%20L36,0%20C16.117749,3.65231026e-15%20-2.4348735e-15,16.117749%200,36%20L0,36%20C2.4348735e-15,55.882251%2016.117749,72%2036,72%20Z'%20fill='%23007FFF'/%3e%3cpath%20d='M36,12%20C22.7451429,12%2012,21.9491852%2012,34.2222222%20C12,41.2155556%2015.4899876,47.4534815%2020.9440994,51.526963%20L20.9440994,60%20L29.1158758,55.5151111%20C31.2967453,56.1186667%2033.6071553,56.4444444%2036,56.4444444%20C49.2548571,56.4444444%2060,46.4952593%2060,34.2222222%20C60,21.9491852%2049.2548571,12%2036,12%20L36,12%20Z%20M38.3850932,41.9259259%20L32.2732919,35.4074074%20L20.3478261,41.9259259%20L33.4658385,28%20L39.7267081,34.5185185%20L51.5031056,28%20L38.3850932,41.9259259%20L38.3850932,41.9259259%20Z'%20fill='%23FFF'/%3e%3c/g%3e%3c/svg%3e",_a="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20shape-rendering='geometricPrecision'%20text-rendering='geometricPrecision'%20image-rendering='optimizeQuality'%20fill-rule='evenodd'%20clip-rule='evenodd'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M256%200c141.385%200%20256%20114.615%20256%20256S397.385%20512%20256%20512%200%20397.385%200%20256%20114.615%200%20256%200z'/%3e%3cpath%20fill='%23fff'%20fill-rule='nonzero'%20d='M318.64%20157.549h33.401l-72.973%2083.407%2085.85%20113.495h-67.222l-52.647-68.836-60.242%2068.836h-33.423l78.052-89.212-82.354-107.69h68.924l47.59%2062.917%2055.044-62.917zm-11.724%20176.908h18.51L205.95%20176.493h-19.86l120.826%20157.964z'/%3e%3c/svg%3e",ya="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20shape-rendering='geometricPrecision'%20text-rendering='geometricPrecision'%20image-rendering='optimizeQuality'%20fill-rule='evenodd'%20clip-rule='evenodd'%20viewBox='0%200%20512%20512'%3e%3cdefs%3e%3clinearGradient%20id='prefix__a'%20gradientUnits='userSpaceOnUse'%20x1='256'%20y1='3.84'%20x2='256'%20y2='512'%3e%3cstop%20offset='0'%20stop-color='%232AABEE'/%3e%3cstop%20offset='1'%20stop-color='%23229ED9'/%3e%3c/linearGradient%3e%3c/defs%3e%3ccircle%20fill='url(%23prefix__a)'%20cx='256'%20cy='256'%20r='256'/%3e%3cpath%20fill='%23fff'%20d='M115.88%20253.3c74.63-32.52%20124.39-53.95%20149.29-64.31%2071.1-29.57%2085.87-34.71%2095.5-34.88%202.12-.03%206.85.49%209.92%202.98%202.59%202.1%203.3%204.94%203.64%206.93.34%202%20.77%206.53.43%2010.08-3.85%2040.48-20.52%20138.71-29%20184.05-3.59%2019.19-10.66%2025.62-17.5%2026.25-14.86%201.37-26.15-9.83-40.55-19.27-22.53-14.76-35.26-23.96-57.13-38.37-25.28-16.66-8.89-25.81%205.51-40.77%203.77-3.92%2069.27-63.5%2070.54-68.9.16-.68.31-3.2-1.19-4.53s-3.71-.87-5.3-.51c-2.26.51-38.25%2024.3-107.98%2071.37-10.22%207.02-19.48%2010.43-27.77%2010.26-9.14-.2-26.72-5.17-39.79-9.42-16.03-5.21-28.77-7.97-27.66-16.82.57-4.61%206.92-9.32%2019.04-14.14z'/%3e%3c/svg%3e",ba="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20height='72'%20viewBox='0%200%2072%2072'%20width='72'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M36,72%20L36,72%20C55.882251,72%2072,55.882251%2072,36%20L72,36%20C72,16.117749%2055.882251,-3.65231026e-15%2036,0%20L36,0%20C16.117749,3.65231026e-15%20-2.4348735e-15,16.117749%200,36%20L0,36%20C2.4348735e-15,55.882251%2016.117749,72%2036,72%20Z'%20fill='%2303ACEB'/%3e%3cpath%20d='M36.2045973,21.3635462%20C42.8260221,21.7532442%2046.70372,24.678887%2047.0810669,27.4106502%20C47.2653974,29.196281%2046.0831725,30.5844588%2044.0323741,30.5844588%20C41.0377259,30.5844588%2040.7317951,26.5740598%2035.5753641,26.5740598%20C33.2485524,26.5740598%2031.2846113,27.5453965%2031.2846113,29.6528674%20C31.2846113,34.056842%2047.8097035,31.498601%2047.8097035,41.1945185%20C47.8097035,46.7840666%2043.3558519,50.4454824%2036.7074048,50.4454824%20C30.8609405,50.4454824%2024.9835936,47.7835158%2025.0135111,43.1992333%20C25.023162,41.8159025%2026.0509739,40.5469607%2027.4175294,40.5469607%20C30.8609405,40.5469607%2030.8290928,45.6857388%2036.3117214,45.6857388%20C40.1575715,45.6857388%2041.4710476,43.5782679%2041.4710476,42.1086607%20C41.4710476,36.8041155%2024.8475171,40.0564454%2024.8475171,30.0784331%20C24.8475171,24.678887%2029.2646956,20.9544603%2036.2045973,21.3635462%20M15.4534129,36.0159951%20C15.4534129,47.4044813%2024.6438849,56.6389654%2035.9835936,56.6389654%20C37.2999649,56.6389654%2038.5854536,56.5100355%2039.8313739,56.2715636%20C41.6370416,57.3679526%2043.7534655,58%2046.0194771,58%20C52.6351114,57.9980612%2058,52.6091784%2058,45.9620172%20C58,43.6315847%2057.337954,41.4581947%2056.1981927,39.6134306%20C56.4018249,38.4453061%2056.5147394,37.2432528%2056.5147394,36.0159951%20C56.5147394,24.6255701%2047.3223373,15.3939941%2035.9835936,15.3939941%20C34.6932795,15.3939941%2033.4299877,15.5190465%2032.203369,15.7478244%20C30.3899807,14.6388332%2028.2600456,14%2025.9824531,14%20C19.3648886,14%2014,19.3888828%2014,26.036044%20C14,28.3538743%2014.6543253,30.5156315%2015.7834708,32.3526405%20C15.5701878,33.5420917%2015.4534129,34.7645024%2015.4534129,36.0159951'%20fill='%23FFF'/%3e%3c/g%3e%3c/svg%3e",La=t=>un.get(`/product/checklist/view/${t}`),kn=cn("product",()=>{const{$notify:t,$loading:o}=Ft(),a=w();return{getViewChecklistInfo:l=>(o.on(),La(l).then(e=>(console.log("checklistInfo",e),a.value=e,Promise.resolve(e))).catch(e=>(t.error("失敗：取得記錄清單詳細資訊"),Promise.reject(e))).finally(()=>{o.off()})),checklistInfo:a}}),xn=864e5,Ca=36e5,Jt=6e4,On="YYYY-MM-DDTHH:mm:ss.SSSZ",Sa=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ma=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Qt={};function wa(t,o){const a="("+o.days.join("|")+")",s=t+a;if(Qt[s]!==void 0)return Qt[s];const l="("+o.daysShort.join("|")+")",e="("+o.months.join("|")+")",n="("+o.monthsShort.join("|")+")",r={};let i=0;const d=t.replace(Ma,u=>{switch(i++,u){case"YY":return r.YY=i,"(-?\\d{1,2})";case"YYYY":return r.YYYY=i,"(-?\\d{1,4})";case"M":return r.M=i,"(\\d{1,2})";case"Mo":return r.M=i++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return r.M=i,"(\\d{2})";case"MMM":return r.MMM=i,n;case"MMMM":return r.MMMM=i,e;case"D":return r.D=i,"(\\d{1,2})";case"Do":return r.D=i++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return r.D=i,"(\\d{2})";case"H":return r.H=i,"(\\d{1,2})";case"HH":return r.H=i,"(\\d{2})";case"h":return r.h=i,"(\\d{1,2})";case"hh":return r.h=i,"(\\d{2})";case"m":return r.m=i,"(\\d{1,2})";case"mm":return r.m=i,"(\\d{2})";case"s":return r.s=i,"(\\d{1,2})";case"ss":return r.s=i,"(\\d{2})";case"S":return r.S=i,"(\\d{1})";case"SS":return r.S=i,"(\\d{2})";case"SSS":return r.S=i,"(\\d{3})";case"A":return r.A=i,"(AM|PM)";case"a":return r.a=i,"(am|pm)";case"aa":return r.aa=i,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"do":return i++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return i++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return i++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return r.Z=i,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return r.ZZ=i,"(Z|[+-]\\d{2}\\d{2})";case"X":return r.X=i,"(-?\\d+)";case"x":return r.x=i,"(-?\\d{4,})";default:return i--,u[0]==="["&&(u=u.substring(1,u.length-1)),u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:r,regex:new RegExp("^"+d)};return Qt[s]=c,c}function Tn(t,o){return t!==void 0?t:o!==void 0?o.date:Cr.date}function Vo(t,o=""){const a=t>0?"-":"+",s=Math.abs(t),l=Math.floor(s/60),e=s%60;return a+G(l)+o+G(e)}function ka(t,o,a){let s=t.getFullYear(),l=t.getMonth();const e=t.getDate();return o.year!==void 0&&(s+=a*o.year,delete o.year),o.month!==void 0&&(l+=a*o.month,delete o.month),t.setDate(1),t.setMonth(2),t.setFullYear(s),t.setMonth(l),t.setDate(Math.min(e,co(t))),o.date!==void 0&&(t.setDate(t.getDate()+a*o.date),delete o.date),t}function xa(t,o,a){const s=o.year!==void 0?o.year:t[`get${a}FullYear`](),l=o.month!==void 0?o.month-1:t[`get${a}Month`](),e=new Date(s,l+1,0).getDate(),n=Math.min(e,o.date!==void 0?o.date:t[`get${a}Date`]());return t[`set${a}Date`](1),t[`set${a}Month`](2),t[`set${a}FullYear`](s),t[`set${a}Month`](l),t[`set${a}Date`](n),delete o.year,delete o.month,delete o.date,t}function uo(t,o,a){const s=$n(o),l=new Date(t),e=s.year!==void 0||s.month!==void 0||s.date!==void 0?ka(l,s,a):l;for(const n in s){const r=Sr(n);e[`set${r}`](e[`get${r}`]()+a*s[n])}return e}function $n(t){const o={...t};return t.years!==void 0&&(o.year=t.years,delete o.years),t.months!==void 0&&(o.month=t.months,delete o.months),t.days!==void 0&&(o.date=t.days,delete o.days),t.day!==void 0&&(o.date=t.day,delete o.day),t.hour!==void 0&&(o.hours=t.hour,delete o.hour),t.minute!==void 0&&(o.minutes=t.minute,delete o.minute),t.second!==void 0&&(o.seconds=t.second,delete o.second),t.millisecond!==void 0&&(o.milliseconds=t.millisecond,delete o.millisecond),o}function Pn(t,o,a){const s=$n(o),l=a===!0?"UTC":"",e=new Date(t),n=s.year!==void 0||s.month!==void 0||s.date!==void 0?xa(e,s,l):e;for(const r in s){const i=r.charAt(0).toUpperCase()+r.slice(1);n[`set${l}${i}`](s[r])}return n}function Oa(t,o,a){const s=Ta(t,o,a),l=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),e=l.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===e?l:uo(l,{minutes:s.timezoneOffset-e},1)}function Ta(t,o,a,s,l){const e={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(t==null||t===""||typeof t!="string")return e;o===void 0&&(o=On);const n=Tn(a,dn.props),r=n.months,i=n.monthsShort,{regex:d,map:c}=wa(o,n),u=t.match(d);if(u===null)return e;let m="";if(c.X!==void 0||c.x!==void 0){const p=parseInt(u[c.X!==void 0?c.X:c.x],10);if(isNaN(p)===!0||p<0)return e;const h=new Date(p*(c.X!==void 0?1e3:1));e.year=h.getFullYear(),e.month=h.getMonth()+1,e.day=h.getDate(),e.hour=h.getHours(),e.minute=h.getMinutes(),e.second=h.getSeconds(),e.millisecond=h.getMilliseconds()}else{if(c.YYYY!==void 0)e.year=parseInt(u[c.YYYY],10);else if(c.YY!==void 0){const p=parseInt(u[c.YY],10);e.year=p<0?p:2e3+p}if(c.M!==void 0){if(e.month=parseInt(u[c.M],10),e.month<1||e.month>12)return e}else c.MMM!==void 0?e.month=i.indexOf(u[c.MMM])+1:c.MMMM!==void 0&&(e.month=r.indexOf(u[c.MMMM])+1);if(c.D!==void 0){if(e.day=parseInt(u[c.D],10),e.year===null||e.month===null||e.day<1)return e;const p=new Date(e.year,e.month,0).getDate();if(e.day>p)return e}c.H!==void 0?e.hour=parseInt(u[c.H],10)%24:c.h!==void 0&&(e.hour=parseInt(u[c.h],10)%12,(c.A&&u[c.A]==="PM"||c.a&&u[c.a]==="pm"||c.aa&&u[c.aa]==="p.m.")&&(e.hour+=12),e.hour=e.hour%24),c.m!==void 0&&(e.minute=parseInt(u[c.m],10)%60),c.s!==void 0&&(e.second=parseInt(u[c.s],10)%60),c.S!==void 0&&(e.millisecond=parseInt(u[c.S],10)*10**(3-u[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(m=c.Z!==void 0?u[c.Z].replace(":",""):u[c.ZZ],e.timezoneOffset=(m[0]==="+"?-1:1)*(60*m.slice(1,3)+1*m.slice(3,5)))}return e.dateHash=G(e.year,6)+"/"+G(e.month)+"/"+G(e.day),e.timeHash=G(e.hour)+":"+G(e.minute)+":"+G(e.second)+m,e}function $a(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function Pa(t,o){return Pn(new Date,t,o)}function Da(t){const o=new Date(t).getDay();return o===0?7:o}function Pt(t){const o=new Date(t.getFullYear(),t.getMonth(),t.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const a=new Date(o.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const s=o.getTimezoneOffset()-a.getTimezoneOffset();o.setHours(o.getHours()-s);const l=(o-a)/(xn*7);return 1+Math.floor(l)}function Ia(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Xt(t,o){const a=new Date(t);return o===!0?Ia(a):a.getTime()}function Ba(t,o,a,s={}){const l=Xt(o,s.onlyDate),e=Xt(a,s.onlyDate),n=Xt(t,s.onlyDate);return(n>l||s.inclusiveFrom===!0&&n===l)&&(n<e||s.inclusiveTo===!0&&n===e)}function Aa(t,o){return uo(t,o,1)}function za(t,o){return uo(t,o,-1)}function Me(t,o,a){const s=new Date(t),l=`set${a===!0?"UTC":""}`;switch(o){case"year":case"years":s[`${l}Month`](0);case"month":case"months":s[`${l}Date`](1);case"day":case"days":case"date":s[`${l}Hours`](0);case"hour":case"hours":s[`${l}Minutes`](0);case"minute":case"minutes":s[`${l}Seconds`](0);case"second":case"seconds":s[`${l}Milliseconds`](0)}return s}function Na(t,o,a){const s=new Date(t),l=`set${a===!0?"UTC":""}`;switch(o){case"year":case"years":s[`${l}Month`](11);case"month":case"months":s[`${l}Date`](co(s));case"day":case"days":case"date":s[`${l}Hours`](23);case"hour":case"hours":s[`${l}Minutes`](59);case"minute":case"minutes":s[`${l}Seconds`](59);case"second":case"seconds":s[`${l}Milliseconds`](999)}return s}function ja(t){let o=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(a=>{o=Math.max(o,new Date(a))}),o}function Ea(t){let o=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(a=>{o=Math.min(o,new Date(a))}),o}function Ot(t,o,a){return(t.getTime()-t.getTimezoneOffset()*Jt-(o.getTime()-o.getTimezoneOffset()*Jt))/a}function Dn(t,o,a="days"){const s=new Date(t),l=new Date(o);switch(a){case"years":case"year":return s.getFullYear()-l.getFullYear();case"months":case"month":return(s.getFullYear()-l.getFullYear())*12+s.getMonth()-l.getMonth();case"days":case"day":case"date":return Ot(Me(s,"day"),Me(l,"day"),xn);case"hours":case"hour":return Ot(Me(s,"hour"),Me(l,"hour"),Ca);case"minutes":case"minute":return Ot(Me(s,"minute"),Me(l,"minute"),Jt);case"seconds":case"second":return Ot(Me(s,"second"),Me(l,"second"),1e3)}}function Dt(t){return Dn(t,Me(t,"year"),"days")+1}function Fa(t){return pn(t)===!0?"date":typeof t=="number"?"number":"string"}function Ra(t,o,a){const s=new Date(t);if(o){const l=new Date(o);if(s<l)return l}if(a){const l=new Date(a);if(s>l)return l}return s}function Va(t,o,a){const s=new Date(t),l=new Date(o);if(a===void 0)return s.getTime()===l.getTime();switch(a){case"second":case"seconds":if(s.getSeconds()!==l.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==l.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==l.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==l.getDate())return!1;case"month":case"months":if(s.getMonth()!==l.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==l.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${a}`)}return!0}function co(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function ot(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const Ho={YY(t,o,a){const s=this.YYYY(t,o,a)%100;return s>=0?G(s):"-"+G(Math.abs(s))},YYYY(t,o,a){return a??t.getFullYear()},M(t){return t.getMonth()+1},Mo(t){return ot(t.getMonth()+1)},MM(t){return G(t.getMonth()+1)},MMM(t,o){return o.monthsShort[t.getMonth()]},MMMM(t,o){return o.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return ot(this.Q(t))},D(t){return t.getDate()},Do(t){return ot(t.getDate())},DD(t){return G(t.getDate())},DDD(t){return Dt(t)},DDDo(t){return ot(Dt(t))},DDDD(t){return G(Dt(t),3)},d(t){return t.getDay()},do(t){return ot(t.getDay())},dd(t,o){return o.days[t.getDay()].slice(0,2)},ddd(t,o){return o.daysShort[t.getDay()]},dddd(t,o){return o.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return Pt(t)},wo(t){return ot(Pt(t))},ww(t){return G(Pt(t))},H(t){return t.getHours()},HH(t){return G(t.getHours())},h(t){const o=t.getHours();return o===0?12:o>12?o%12:o},hh(t){return G(this.h(t))},m(t){return t.getMinutes()},mm(t){return G(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return G(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return G(Math.floor(t.getMilliseconds()/10))},SSS(t){return G(t.getMilliseconds(),3)},A(t){return t.getHours()<12?"AM":"PM"},a(t){return t.getHours()<12?"am":"pm"},aa(t){return t.getHours()<12?"a.m.":"p.m."},Z(t,o,a,s){const l=s??t.getTimezoneOffset();return Vo(l,":")},ZZ(t,o,a,s){const l=s??t.getTimezoneOffset();return Vo(l)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Ha(t,o,a,s,l){if(t!==0&&!t||t===1/0||t===-1/0)return;const e=new Date(t);if(isNaN(e))return;o===void 0&&(o=On);const n=Tn(a,dn.props);return o.replace(Sa,(r,i)=>r in Ho?Ho[r](e,n,s,l):i===void 0?r:i.split("\\]").join("]"))}function qa(t){return pn(t)===!0?new Date(t.getTime()):t}const qo={isValid:$a,extractDate:Oa,buildDate:Pa,getDayOfWeek:Da,getWeekOfYear:Pt,isBetweenDates:Ba,addToDate:Aa,subtractFromDate:za,adjustDate:Pn,startOfDate:Me,endOfDate:Na,getMaxDate:ja,getMinDate:Ea,getDateDiff:Dn,getDayOfYear:Dt,inferDateFormat:Fa,getDateBetween:Ra,isSameDate:Va,daysInMonth:co,formatDate:Ha,clone:qa},Za=t=>{const o=qo.extractDate(t,"YYYY-MM-DD HH:mm");return qo.getDateDiff(new Date,o,"days")},In=(t,o)=>`http://maps.google.com/?ie=UTF8&t=p&z=13&q=${t},${o}&ll=${t},${o}`,Ga={class:"w-full flex no-wrap items-center gap-4"},Ua={class:"bg-secondary w-[33.33px] h-[33.33px] m-[3.335px] flex justify-center items-center",style:{"border-radius":"50%"}},Ya=F({__name:"RbMarkerDetailFeed",props:{notableObs:{},userComName:{}},setup(t){const o=t,{t:a}=mn(),{copy:s}=ca(),{$notify:l}=Ft(),e=kn(),{checklistInfo:n}=Ae(e),r=y(()=>o.notableObs),i=y(()=>r.value?`https://ebird.org/checklist/${r.value.subId}`:"https://ebird.org/home"),d=y(()=>{var _;return(_=n.value)==null?void 0:_.obs.find(k=>{var g;return k.speciesCode===((g=r.value)==null?void 0:g.speciesCode)})}),c=y(()=>{var R,Y;if(!r.value)return"";const{comName:_,howMany:k,obsDt:g,locName:f,lat:M,lng:I}=r.value,A=In(M,I);return`${o.userComName} (${_}) (${k})<br />
- ${g} by ${(R=n.value)==null?void 0:R.userDisplayName}<br />
- ${f}<br />
- Map: <a href="${A}">${A}</a><br />
- checklist: <a href="${i.value}">${i.value}</a><br />
- Note: ${(Y=d.value)==null?void 0:Y.comments}<br />
(Source: <a href="https://z94624.github.io/beBird/">https://z94624.github.io/beBird/</a>)`}),u=y(()=>Mr(c.value)),h=[{icon:"content_copy",name:"Copy",onClick:()=>{s(u.value||i.value).then(()=>{l.info(a("info_listInfoCopied"))})}},{icon:fa,iconColor:"#d44638",name:"Email",network:"email"},{icon:ha,iconColor:"#1877F2",name:"Facebook",network:"facebook"},{icon:ga,customIcon:!0,name:"Messenger",network:"messenger"},{icon:va,customIcon:!0,name:"LINE",network:"line"},{icon:_a,customIcon:!0,name:"Twitter",network:"twitter"},{icon:ya,customIcon:!0,name:"Telegram",network:"telegram"},{icon:ba,customIcon:!0,name:"Skype",network:"skype"},{icon:"more_horiz",name:"More",onClick:()=>{navigator.share&&navigator.share({title:o.userComName,text:u.value,url:i.value})}}];return(_,k)=>{const g=hn("ShareNetwork");return E(),W(gn,{dense:"",separator:""},{default:D(()=>[(E(),$e(qe,null,ze(h,(f,M)=>(E(),$e(qe,{key:M},[f.onClick?It((E(),W(Bt,{key:0,clickable:"",onClick:f.onClick},{default:D(()=>[V("div",Ga,[V("div",Ua,[T(zo,{name:f.customIcon?`img:${f.icon}`:f.icon,color:"primary",size:"xs"},null,8,["name"])]),V("span",null,X(f.name),1)])]),_:2},1032,["onClick"])),[[No]]):It((E(),W(Bt,{key:1,clickable:""},{default:D(()=>{var I;return[T(g,{description:u.value,hashtags:_.userComName,network:f.network,title:`${_.userComName} [${((I=r.value)==null?void 0:I.sciName)??"{sciName}"}]`,url:i.value,class:"w-full flex no-wrap items-center gap-4"},{default:D(()=>[T(zo,{class:fn([f.customIcon?"m-[3.335px]":""]),name:f.customIcon?`img:${f.icon}`:f.icon,size:f.customIcon?"33.33px":"40px",style:vn({color:f.iconColor})},null,8,["class","name","size","style"]),V("span",null,X(f.name),1)]),_:2},1032,["description","hashtags","network","title","url"])]}),_:2},1024)),[[No]])],64))),64))]),_:1})}}}),Wa={class:"flex items-center gap-1"},Qa={class:"comName-font"},Xa={class:"sciName-font"},Ja=F({__name:"Checklist",props:{info:{},notableSpeciesCode:{}},setup(t){const o=t,a=s=>s===o.notableSpeciesCode;return(s,l)=>(E(),W(gn,{class:"flex flex-col gap-1"},{default:D(()=>[(E(!0),$e(qe,null,ze(s.info.obs,(e,n)=>(E(),W(Bt,{key:n,active:a(e.speciesCode),class:fn([[`${a(e.speciesCode)?"notableItem":"normalItem"}`],"birdItem"]),href:`https://ebird.org/species/${e.speciesCode}`,target:"_blank"},{default:D(()=>[T(At,{avatar:""},{default:D(()=>[Ct(X(e.howManyStr),1)]),_:2},1024),T(At,null,{default:D(()=>{var r,i;return[V("div",Wa,[V("div",Qa,X(((r=e.tax)==null?void 0:r.comName)??e.speciesCode),1),V("div",Xa,X(((i=e.tax)==null?void 0:i.sciName)??e.speciesCode),1)])]}),_:2},1024)]),_:2},1032,["active","class","href"]))),128))]),_:1}))}}),Ka=oo(Ja,[["__scopeId","data-v-2bcc7365"]]),es=F({__name:"RbMarkerDetailList",props:{notableObs:{}},setup(t){const o=t,a=kn(),{checklistInfo:s}=Ae(a),l=no(),{taxInfoDict:e}=Ae(l),n=y(()=>{var i;const r=Object.keys(e.value);return(i=s.value)==null?void 0:i.obs.map(d=>d.speciesCode).filter(d=>!r.includes(d))});return K(()=>{o.notableObs&&a.getViewChecklistInfo(o.notableObs.subId).then(async()=>{var r;(r=n.value)!=null&&r.length&&await l.getEbirdTaxonomyInfo(n.value.join(",")),s.value.obs=s.value.obs.map(i=>({...i,tax:e.value[i.speciesCode]}))})}),(r,i)=>{var c;const d=Ka;return E(),W(d,{info:B(s)||[],notableSpeciesCode:(c=r.notableObs)==null?void 0:c.speciesCode},null,8,["info","notableSpeciesCode"])}}}),ts={class:"flex no-wrap gap-1"},os={class:"text-3xl"},ns={class:"flex flex-col"},rs={class:"text-xs italic"},as={class:"text-xs"},ss=F({__name:"RbMarkerDetailDialog",setup(t,{expose:o}){const{isOpen:a,open:s,onOpen:l,close:e,onClose:n}=wr(),r=no(),{taxInfoDict:i}=Ae(r),d=w(),c=w("list"),u=y(()=>{var m;if(!(!d.value||!i.value))return((m=i.value[d.value.speciesCode])==null?void 0:m.comName)??d.value.comName});return l(m=>{d.value=m}),n(()=>{d.value=void 0,c.value="list"}),o({open:s,close:e}),(m,p)=>{const h=Or,_=es,k=Ya,g=Tr;return E(),W(g,{modelValue:B(a),"onUpdate:modelValue":p[2]||(p[2]=f=>xr(a)?a.value=f:null),onClose:B(e)},{title:D(()=>{var f,M;return[V("div",ts,[V("div",os,X(u.value),1),V("div",ns,[V("div",rs,X(((f=d.value)==null?void 0:f.sciName)??""),1),V("div",as,X(((M=d.value)==null?void 0:M.comName)??""),1)])])]}),content:D(()=>[T(h,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=f=>c.value=f),align:"justify",dense:"",style:{position:"sticky",top:"50px","z-index":"1"}},{default:D(()=>[T(jo,{icon:"list_alt",name:"list"}),T(jo,{icon:"rss_feed",name:"feed"})]),_:1},8,["modelValue"]),T(kr,{modelValue:c.value,"onUpdate:modelValue":p[1]||(p[1]=f=>c.value=f),animated:"","keep-alive":""},{default:D(()=>[T(Eo,{name:"list"},{default:D(()=>[T(_,{notableObs:d.value},null,8,["notableObs"])]),_:1}),T(Eo,{name:"feed"},{default:D(()=>[T(k,{notableObs:d.value,userComName:u.value},null,8,["notableObs","userComName"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onClose"])}}});let is=0,yt;function Zo(t,o){yt===void 0&&(yt=document.createElement("div"),yt.style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(yt));const a=t.getBoundingClientRect(),s=yt.getBoundingClientRect(),{marginLeft:l,marginRight:e,marginTop:n,marginBottom:r}=window.getComputedStyle(t),i=parseInt(l,10)+parseInt(e,10),d=parseInt(n,10)+parseInt(r,10);return{left:a.left-s.left,top:a.top-s.top,width:a.right-a.left,height:a.bottom-a.top,widthM:a.right-a.left+(o===!0?0:i),heightM:a.bottom-a.top+(o===!0?0:d),marginH:o===!0?i:0,marginV:o===!0?d:0}}function Tt(t){return{width:t.scrollWidth,height:t.scrollHeight}}const Go=["Top","Right","Bottom","Left"],Uo=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],ls=/-block|-inline|block-|inline-/,us=/(-block|-inline|block-|inline-).*:/;function Yo(t,o){const a=window.getComputedStyle(t),s={};for(let l=0;l<o.length;l++){const e=o[l];if(a[e]==="")if(e==="cssText"){const n=a.length;let r="";for(let i=0;i<n;i++)ls.test(a[i])!==!0&&(r+=a[i]+": "+a[a[i]]+"; ");s[e]=r}else if(["borderWidth","borderStyle","borderColor"].indexOf(e)!==-1){const n=e.replace("border","");let r="";for(let i=0;i<Go.length;i++){const d="border"+Go[i]+n;r+=a[d]+" "}s[e]=r}else if(e==="borderRadius"){let n="",r="";for(let i=0;i<Uo.length;i++){const d=a[Uo[i]].split(" ");n+=d[0]+" ",r+=(d[1]===void 0?d[0]:d[1])+" "}s[e]=n+"/ "+r}else s[e]=a[e];else e==="cssText"?s[e]=a[e].split(";").filter(n=>us.test(n)!==!0).join(";"):s[e]=a[e]}return s}const cs=["absolute","fixed","relative","sticky"];function Wo(t){let o=t,a=0;for(;o!==null&&o!==document;){const{position:s,zIndex:l}=window.getComputedStyle(o),e=Number(l);e>a&&(o===t||cs.includes(s)===!0)&&(a=e),o=o.parentNode}return a}function ds(t){return{from:t.from,to:t.to!==void 0?t.to:t.from}}function ps(t){return typeof t=="number"?t={duration:t}:typeof t=="function"&&(t={onEnd:t}),{...t,waitFor:t.waitFor===void 0?0:t.waitFor,duration:isNaN(t.duration)===!0?300:parseInt(t.duration,10),easing:typeof t.easing=="string"&&t.easing.length!==0?t.easing:"ease-in-out",delay:isNaN(t.delay)===!0?0:parseInt(t.delay,10),fill:typeof t.fill=="string"&&t.fill.length!==0?t.fill:"none",resize:t.resize===!0,useCSS:t.useCSS===!0||t.usecss===!0,hideFromClone:t.hideFromClone===!0||t.hidefromclone===!0,keepToClone:t.keepToClone===!0||t.keeptoclone===!0,tween:t.tween===!0,tweenFromOpacity:isNaN(t.tweenFromOpacity)===!0?.6:parseFloat(t.tweenFromOpacity),tweenToOpacity:isNaN(t.tweenToOpacity)===!0?.5:parseFloat(t.tweenToOpacity)}}function Qo(t){const o=typeof t;return o==="function"?t():o==="string"?document.querySelector(t):t}function Xo(t){return t&&t.ownerDocument===document&&t.parentNode!==null}function ms(t){let o=()=>!1,a=!1,s=!0;const l=ds(t),e=ps(t),n=Qo(l.from);if(Xo(n)!==!0)return o;typeof n.qMorphCancel=="function"&&n.qMorphCancel();let r,i,d,c;const u=n.parentNode,m=n.nextElementSibling,p=Zo(n,e.resize),{width:h,height:_}=Tt(u),{borderWidth:k,borderStyle:g,borderColor:f,borderRadius:M,backgroundColor:I,transform:A,position:R,cssText:Y}=Yo(n,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),ne=n.classList.toString(),S=n.style.cssText,b=n.cloneNode(!0),O=e.tween===!0?n.cloneNode(!0):void 0;O!==void 0&&(O.className=O.classList.toString().split(" ").filter(C=>/^bg-/.test(C)===!1).join(" ")),e.hideFromClone===!0&&b.classList.add("q-morph--internal"),b.setAttribute("aria-hidden","true"),b.style.transition="none",b.style.animation="none",b.style.pointerEvents="none",u.insertBefore(b,m),n.qMorphCancel=()=>{a=!0,b.remove(),O!==void 0&&O.remove(),e.hideFromClone===!0&&b.classList.remove("q-morph--internal"),n.qMorphCancel=void 0};const ie=()=>{const C=Qo(l.to);if(a===!0||Xo(C)!==!0){typeof n.qMorphCancel=="function"&&n.qMorphCancel();return}n!==C&&typeof C.qMorphCancel=="function"&&C.qMorphCancel(),e.keepToClone!==!0&&C.classList.add("q-morph--internal"),b.classList.add("q-morph--internal");const{width:ke,height:Ne}=Tt(u),{width:De,height:be}=Tt(C.parentNode);e.hideFromClone!==!0&&b.classList.remove("q-morph--internal"),C.qMorphCancel=()=>{a=!0,b.remove(),O!==void 0&&O.remove(),e.hideFromClone===!0&&b.classList.remove("q-morph--internal"),e.keepToClone!==!0&&C.classList.remove("q-morph--internal"),n.qMorphCancel=void 0,C.qMorphCancel=void 0};const xe=()=>{if(a===!0){typeof C.qMorphCancel=="function"&&C.qMorphCancel();return}e.hideFromClone!==!0&&(b.classList.add("q-morph--internal"),b.innerHTML="",b.style.left=0,b.style.right="unset",b.style.top=0,b.style.bottom="unset",b.style.transform="none"),e.keepToClone!==!0&&C.classList.remove("q-morph--internal");const re=C.parentNode,{width:ge,height:$}=Tt(re),P=C.cloneNode(e.keepToClone);P.setAttribute("aria-hidden","true"),e.keepToClone!==!0&&(P.style.left=0,P.style.right="unset",P.style.top=0,P.style.bottom="unset",P.style.transform="none",P.style.pointerEvents="none"),P.classList.add("q-morph--internal");const te=C===n&&u===re?b:C.nextElementSibling;re.insertBefore(P,te);const{borderWidth:q,borderStyle:Ue,borderColor:Ye,borderRadius:We,backgroundColor:ht,transform:ft,position:wt,cssText:vt}=Yo(C,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),kt=C.classList.toString(),xt=C.style.cssText;C.style.cssText=vt,C.style.transform="none",C.style.animation="none",C.style.transition="none",C.className=kt.split(" ").filter(x=>/^bg-/.test(x)===!1).join(" ");const Q=Zo(C,e.resize),_e=p.left-Q.left,me=p.top-Q.top,je=p.width/(Q.width>0?Q.width:10),Qe=p.height/(Q.height>0?Q.height:100),ye=h-ke,he=_-Ne,Ee=ge-De,Fe=$-be,Le=Math.max(p.widthM,ye),Ce=Math.max(p.heightM,he),Oe=Math.max(Q.widthM,Ee),Ie=Math.max(Q.heightM,Fe),Be=n===C&&["absolute","fixed"].includes(wt)===!1&&["absolute","fixed"].includes(R)===!1;let Xe=wt==="fixed",Je=re;for(;Xe!==!0&&Je!==document;)Xe=window.getComputedStyle(Je).position==="fixed",Je=Je.parentNode;if(e.hideFromClone!==!0&&(b.style.display="block",b.style.flex="0 0 auto",b.style.opacity=0,b.style.minWidth="unset",b.style.maxWidth="unset",b.style.minHeight="unset",b.style.maxHeight="unset",b.classList.remove("q-morph--internal")),e.keepToClone!==!0&&(P.style.display="block",P.style.flex="0 0 auto",P.style.opacity=0,P.style.minWidth="unset",P.style.maxWidth="unset",P.style.minHeight="unset",P.style.maxHeight="unset"),P.classList.remove("q-morph--internal"),typeof e.classes=="string"&&(C.className+=" "+e.classes),typeof e.style=="string")C.style.cssText+=" "+e.style;else if($t(e.style)===!0)for(const x in e.style)C.style[x]=e.style[x];const Ke=Wo(b),et=Wo(C),tt=Xe===!0?document.documentElement:{scrollLeft:0,scrollTop:0};C.style.position=Xe===!0?"fixed":"absolute",C.style.left=`${Q.left-tt.scrollLeft}px`,C.style.right="unset",C.style.top=`${Q.top-tt.scrollTop}px`,C.style.margin=0,e.resize===!0&&(C.style.minWidth="unset",C.style.maxWidth="unset",C.style.minHeight="unset",C.style.maxHeight="unset",C.style.overflow="hidden",C.style.overflowX="hidden",C.style.overflowY="hidden"),document.body.appendChild(C),O!==void 0&&(O.style.cssText=Y,O.style.transform="none",O.style.animation="none",O.style.transition="none",O.style.position=C.style.position,O.style.left=`${p.left-tt.scrollLeft}px`,O.style.right="unset",O.style.top=`${p.top-tt.scrollTop}px`,O.style.margin=0,O.style.pointerEvents="none",e.resize===!0&&(O.style.minWidth="unset",O.style.maxWidth="unset",O.style.minHeight="unset",O.style.maxHeight="unset",O.style.overflow="hidden",O.style.overflowX="hidden",O.style.overflowY="hidden"),document.body.appendChild(O));const v=x=>{n===C&&s!==!0?(C.style.cssText=S,C.className=ne):(C.style.cssText=xt,C.className=kt),P.parentNode===re&&re.insertBefore(C,P),b.remove(),P.remove(),O!==void 0&&O.remove(),o=()=>!1,n.qMorphCancel=void 0,C.qMorphCancel=void 0,typeof e.onEnd=="function"&&e.onEnd(s===!0?"to":"from",x===!0)};if(e.useCSS!==!0&&typeof C.animate=="function"){const x=e.resize===!0?{transform:`translate(${_e}px, ${me}px)`,width:`${Le}px`,height:`${Ce}px`}:{transform:`translate(${_e}px, ${me}px) scale(${je}, ${Qe})`},z=e.resize===!0?{width:`${Oe}px`,height:`${Ie}px`}:{},j=e.resize===!0?{width:`${Le}px`,height:`${Ce}px`}:{},Z=e.resize===!0?{transform:`translate(${-1*_e}px, ${-1*me}px)`,width:`${Oe}px`,height:`${Ie}px`}:{transform:`translate(${-1*_e}px, ${-1*me}px) scale(${1/je}, ${1/Qe})`},fe=O!==void 0?{opacity:e.tweenToOpacity}:{backgroundColor:I},Re=O!==void 0?{opacity:1}:{backgroundColor:ht};c=C.animate([{margin:0,borderWidth:k,borderStyle:g,borderColor:f,borderRadius:M,zIndex:Ke,transformOrigin:"0 0",...x,...fe},{margin:0,borderWidth:q,borderStyle:Ue,borderColor:Ye,borderRadius:We,zIndex:et,transformOrigin:"0 0",transform:ft,...z,...Re}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay}),i=O===void 0?void 0:O.animate([{opacity:e.tweenFromOpacity,margin:0,borderWidth:k,borderStyle:g,borderColor:f,borderRadius:M,zIndex:Ke,transformOrigin:"0 0",transform:A,...j},{opacity:0,margin:0,borderWidth:q,borderStyle:Ue,borderColor:Ye,borderRadius:We,zIndex:et,transformOrigin:"0 0",...Z}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay}),r=e.hideFromClone===!0||Be===!0?void 0:b.animate([{margin:`${he<0?he/2:0}px ${ye<0?ye/2:0}px`,width:`${Le+p.marginH}px`,height:`${Ce+p.marginV}px`},{margin:0,width:0,height:0}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay}),d=e.keepToClone===!0?void 0:P.animate([Be===!0?{margin:`${he<0?he/2:0}px ${ye<0?ye/2:0}px`,width:`${Le+p.marginH}px`,height:`${Ce+p.marginV}px`}:{margin:0,width:0,height:0},{margin:`${Fe<0?Fe/2:0}px ${Ee<0?Ee/2:0}px`,width:`${Oe+Q.marginH}px`,height:`${Ie+Q.marginV}px`}],{duration:e.duration,easing:e.easing,fill:e.fill,delay:e.delay});const le=gt=>{r!==void 0&&r.cancel(),i!==void 0&&i.cancel(),d!==void 0&&d.cancel(),c.cancel(),c.removeEventListener("finish",le),c.removeEventListener("cancel",le),v(gt),r=void 0,i=void 0,d=void 0,c=void 0};n.qMorphCancel=()=>{n.qMorphCancel=void 0,a=!0,le()},C.qMorphCancel=()=>{C.qMorphCancel=void 0,a=!0,le()},c.addEventListener("finish",le),c.addEventListener("cancel",le),o=gt=>a===!0||c===void 0?!1:gt===!0?(le(!0),!0):(s=s!==!0,r!==void 0&&r.reverse(),i!==void 0&&i.reverse(),d!==void 0&&d.reverse(),c.reverse(),!0)}else{const x=`q-morph-anim-${++is}`,z=document.createElement("style"),j=e.resize===!0?`
            transform: translate(${_e}px, ${me}px);
            width: ${Le}px;
            height: ${Ce}px;
          `:`transform: translate(${_e}px, ${me}px) scale(${je}, ${Qe});`,Z=e.resize===!0?`
            width: ${Oe}px;
            height: ${Ie}px;
          `:"",fe=e.resize===!0?`
            width: ${Le}px;
            height: ${Ce}px;
          `:"",Re=e.resize===!0?`
            transform: translate(${-1*_e}px, ${-1*me}px);
            width: ${Oe}px;
            height: ${Ie}px;
          `:`transform: translate(${-1*_e}px, ${-1*me}px) scale(${1/je}, ${1/Qe});`,le=O!==void 0?`opacity: ${e.tweenToOpacity};`:`background-color: ${I};`,gt=O!==void 0?"opacity: 1;":`background-color: ${ht};`,dr=O===void 0?"":`
            @keyframes ${x}-from-tween {
              0% {
                opacity: ${e.tweenFromOpacity};
                margin: 0;
                border-width: ${k};
                border-style: ${g};
                border-color: ${f};
                border-radius: ${M};
                z-index: ${Ke};
                transform-origin: 0 0;
                transform: ${A};
                ${fe}
              }

              100% {
                opacity: 0;
                margin: 0;
                border-width: ${q};
                border-style: ${Ue};
                border-color: ${Ye};
                border-radius: ${We};
                z-index: ${et};
                transform-origin: 0 0;
                ${Re}
              }
            }
          `,pr=e.hideFromClone===!0||Be===!0?"":`
            @keyframes ${x}-from {
              0% {
                margin: ${he<0?he/2:0}px ${ye<0?ye/2:0}px;
                width: ${Le+p.marginH}px;
                height: ${Ce+p.marginV}px;
              }

              100% {
                margin: 0;
                width: 0;
                height: 0;
              }
            }
          `,mr=Be===!0?`
            margin: ${he<0?he/2:0}px ${ye<0?ye/2:0}px;
            width: ${Le+p.marginH}px;
            height: ${Ce+p.marginV}px;
          `:`
            margin: 0;
            width: 0;
            height: 0;
          `,hr=e.keepToClone===!0?"":`
            @keyframes ${x}-to {
              0% {
                ${mr}
              }

              100% {
                margin: ${Fe<0?Fe/2:0}px ${Ee<0?Ee/2:0}px;
                width: ${Oe+Q.marginH}px;
                height: ${Ie+Q.marginV}px;
              }
            }
          `;z.innerHTML=`
          @keyframes ${x} {
            0% {
              margin: 0;
              border-width: ${k};
              border-style: ${g};
              border-color: ${f};
              border-radius: ${M};
              background-color: ${I};
              z-index: ${Ke};
              transform-origin: 0 0;
              ${j}
              ${le}
            }

            100% {
              margin: 0;
              border-width: ${q};
              border-style: ${Ue};
              border-color: ${Ye};
              border-radius: ${We};
              background-color: ${ht};
              z-index: ${et};
              transform-origin: 0 0;
              transform: ${ft};
              ${Z}
              ${gt}
            }
          }

          ${pr}

          ${dr}

          ${hr}
        `,document.head.appendChild(z);let Se="normal";b.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Se} ${e.fill} ${x}-from`,O!==void 0&&(O.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Se} ${e.fill} ${x}-from-tween`),P.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Se} ${e.fill} ${x}-to`,C.style.animation=`${e.duration}ms ${e.easing} ${e.delay}ms ${Se} ${e.fill} ${x}`;const Ve=_t=>{_t===Object(_t)&&_t.animationName!==x||(C.removeEventListener("animationend",Ve),C.removeEventListener("animationcancel",Ve),v(),z.remove())};n.qMorphCancel=()=>{n.qMorphCancel=void 0,a=!0,Ve()},C.qMorphCancel=()=>{C.qMorphCancel=void 0,a=!0,Ve()},C.addEventListener("animationend",Ve),C.addEventListener("animationcancel",Ve),o=_t=>a===!0||!C||!b||!P?!1:_t===!0?(Ve(),!0):(s=s!==!0,Se=Se==="normal"?"reverse":"normal",b.style.animationDirection=Se,O.style.animationDirection=Se,P.style.animationDirection=Se,C.style.animationDirection=Se,!0)}};e.waitFor>0||e.waitFor==="transitionend"||e.waitFor===Object(e.waitFor)&&typeof e.waitFor.then=="function"?(e.waitFor>0?new Promise(ge=>setTimeout(ge,e.waitFor)):e.waitFor==="transitionend"?new Promise(ge=>{const $=()=>{P!==null&&(clearTimeout(P),P=null),C&&(C.removeEventListener("transitionend",$),C.removeEventListener("transitioncancel",$)),ge()};let P=setTimeout($,400);C.addEventListener("transitionend",$),C.addEventListener("transitioncancel",$)}):e.waitFor).then(xe).catch(()=>{typeof C.qMorphCancel=="function"&&C.qMorphCancel()}):xe()};return typeof t.onToggle=="function"&&t.onToggle(),requestAnimationFrame(ie),C=>o(C)}const Nt={},hs=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],fs=["resize","useCSS","hideFromClone","keepToClone","tween"];function rt(t,o){t.clsAction!==o&&(t.clsAction=o,t.el.classList[o]("q-morph--invisible"))}function Bn(t){if(t.animating===!0||t.queue.length<2)return;const[o,a]=t.queue;t.animating=!0,o.animating=!0,a.animating=!0,rt(o,"remove"),rt(a,"remove");const s=ms({from:o.el,to:a.el,onToggle(){rt(o,"add"),rt(a,"remove")},...a.opts,onEnd(l,e){a.opts.onEnd!==void 0&&a.opts.onEnd(l,e),e!==!0&&(o.animating=!1,a.animating=!1,t.animating=!1,t.cancel=void 0,t.queue.shift(),Bn(t))}});t.cancel=()=>{s(!0),t.cancel=void 0}}function An(t,o){const a=o.opts;fs.forEach(s=>{a[s]=t[s]===!0})}function vs(t,o){const a=typeof t=="string"&&t.length!==0?t.split(":"):[];o.name=a[0],o.group=a[1],Object.assign(o.opts,{duration:isNaN(a[2])===!0?300:parseFloat(a[2]),waitFor:a[3]})}function gs(t,o){t.group!==void 0&&(o.group=t.group),t.name!==void 0&&(o.name=t.name);const a=o.opts;hs.forEach(s=>{t[s]!==void 0&&(a[s]=t[s])})}function _s(t,o){if(o.name===t){const a=Nt[o.group];a===void 0?(Nt[o.group]={name:o.group,model:t,queue:[o],animating:!1},rt(o,"remove")):a.model!==t&&(a.model=t,a.queue.push(o),a.animating===!1&&a.queue.length===2&&Bn(a));return}o.animating===!1&&rt(o,"add")}function Jo(t,o){let a;Object(o)===o?(a=""+o.model,gs(o,t),An(o,t)):a=""+o,a!==t.model?(t.model=a,_s(a,t)):t.animating===!1&&t.clsAction!==void 0&&t.el.classList[t.clsAction]("q-morph--invisible")}const Ko=$r({name:"morph",mounted(t,o){const a={el:t,animating:!1,opts:{}};An(o.modifiers,a),vs(o.arg,a),Jo(a,o.value),t.__qmorph=a},updated(t,o){Jo(t.__qmorph,o.value)},beforeUnmount(t){const o=t.__qmorph,a=Nt[o.group];a!==void 0&&a.queue.indexOf(o)!==-1&&(a.queue=a.queue.filter(l=>l!==o),a.queue.length===0&&(a.cancel!==void 0&&a.cancel(),delete Nt[o.group])),o.clsAction==="add"&&t.classList.remove("q-morph--invisible"),delete t.__qmorph}}),Kt=(t,o)=>{for(const a of Object.keys(o))t.on(a,o[a])},po=t=>{for(const o of Object.keys(t)){const a=t[o];a&&Te(a.cancel)&&a.cancel()}},zn=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),Te=t=>typeof t=="function",ae=(t,o,a)=>{for(const s in a){const l="set"+zn(s);t[l]?ve(()=>a[s],(e,n)=>{t[l](e,n)}):o[l]&&ve(()=>a[s],e=>{o[l](e)})}},H=(t,o,a={})=>{const s={...a};for(const l in t){const e=o[l],n=t[l];e&&(e&&e.custom===!0||n!==void 0&&(s[l]=n))}return s},we=t=>{const o={},a={};for(const s in t)if(s.startsWith("on")&&!s.startsWith("onUpdate")&&s!=="onReady"){const l=s.slice(2).toLocaleLowerCase();o[l]=t[s]}else a[s]=t[s];return{listeners:o,attrs:a}},Nn=async t=>{const o=await Promise.all([J(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),J(()=>import("./marker-icon-C2eJqgqv.js"),[]),J(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},bt=t=>{const o=w((...s)=>console.warn(`Method ${t} has been invoked without being replaced`)),a=(...s)=>o.value(...s);return a.wrapped=o,ue(t,a),a},Lt=(t,o)=>t.wrapped.value=o,ee=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,U=t=>{const o=de(t);if(o===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return o},jn=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:ee,assertInject:U,bindEventHandlers:Kt,cancelDebounces:po,capitalizeFirstLetter:zn,isFunction:Te,propsBinder:ae,propsToLeafletOptions:H,provideLeafletWrapper:bt,remapEvents:we,resetWebpackIcon:Nn,updateLeafletWrapper:Lt},Symbol.toStringTag,{value:"Module"})),se=Symbol("useGlobalLeaflet"),Pe=Symbol("addLayer"),St=Symbol("removeLayer"),Mt=Symbol("registerControl"),mo=Symbol("registerLayerControl"),ho=Symbol("canSetParentHtml"),fo=Symbol("setParentHtml"),vo=Symbol("setIcon"),go=Symbol("bindPopup"),_o=Symbol("bindTooltip"),yo=Symbol("unbindPopup"),bo=Symbol("unbindTooltip"),En=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:Pe,BindPopupInjection:go,BindTooltipInjection:_o,CanSetParentHtmlInjection:ho,RegisterControlInjection:Mt,RegisterLayerControlInjection:mo,RemoveLayerInjection:St,SetIconInjection:vo,SetParentHtmlInjection:fo,UnbindPopupInjection:yo,UnbindTooltipInjection:bo,UseGlobalLeafletInjection:se},Symbol.toStringTag,{value:"Module"})),ct={options:{type:Object,default:()=>({}),custom:!0}},dt=t=>({options:t.options,methods:{}}),ys=Object.freeze(Object.defineProperty({__proto__:null,componentProps:ct,setupComponent:dt},Symbol.toStringTag,{value:"Module"})),Ze={...ct,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},pt=(t,o,a)=>{const s=U(Pe),l=U(St),{options:e,methods:n}=dt(t),r=H(t,Ze,e),i=()=>s({leafletObject:o.value}),d=()=>l({leafletObject:o.value}),c={...n,setAttribution(u){d(),o.value.options.attribution=u,t.visible&&i()},setName(){d(),t.visible&&i()},setLayerType(){d(),t.visible&&i()},setVisible(u){o.value&&(u?i():d())},bindPopup(u){if(!o.value||!Te(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(u)},bindTooltip(u){if(!o.value||!Te(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(u)},unbindTooltip(){o.value&&(Te(o.value.closeTooltip)&&o.value.closeTooltip(),Te(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(Te(o.value.closePopup)&&o.value.closePopup(),Te(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(u){a.emit("update:visible",u)}};return ue(go,c.bindPopup),ue(_o,c.bindTooltip),ue(yo,c.unbindPopup),ue(bo,c.unbindTooltip),ro(()=>{c.unbindPopup(),c.unbindTooltip(),d()}),{options:r,methods:c}},Ht=(t,o)=>{if(t&&o.default)return N("div",{style:{display:"none"}},o.default())},bs=Object.freeze(Object.defineProperty({__proto__:null,layerProps:Ze,render:Ht,setupLayer:pt},Symbol.toStringTag,{value:"Module"})),Lo={...Ze,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Fn=(t,o,a)=>{const{options:s,methods:l}=pt(t,o,a);return{options:H(t,Lo,s),methods:l}},Ls=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:Lo,setupInteractiveLayer:Fn},Symbol.toStringTag,{value:"Module"})),qt={...Lo,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},Co=(t,o,a)=>{const{options:s,methods:l}=Fn(t,o,a),e=H(t,qt,s),n=U(St),r={...l,setStroke(i){o.value.setStyle({stroke:i})},setColor(i){o.value.setStyle({color:i})},setWeight(i){o.value.setStyle({weight:i})},setOpacity(i){o.value.setStyle({opacity:i})},setLineCap(i){o.value.setStyle({lineCap:i})},setLineJoin(i){o.value.setStyle({lineJoin:i})},setDashArray(i){o.value.setStyle({dashArray:i})},setDashOffset(i){o.value.setStyle({dashOffset:i})},setFill(i){o.value.setStyle({fill:i})},setFillColor(i){o.value.setStyle({fillColor:i})},setFillOpacity(i){o.value.setStyle({fillOpacity:i})},setFillRule(i){o.value.setStyle({fillRule:i})},setClassName(i){o.value.setStyle({className:i})}};return st(()=>{n({leafletObject:o.value})}),{options:e,methods:r}},Cs=Object.freeze(Object.defineProperty({__proto__:null,pathProps:qt,setupPath:Co},Symbol.toStringTag,{value:"Module"})),Zt={...qt,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},So=(t,o,a)=>{const{options:s,methods:l}=Co(t,o,a),e=H(t,Zt,s),n={...l,setRadius(r){o.value.setRadius(r)},setLatLng(r){o.value.setLatLng(r)}};return{options:e,methods:n}},Ss=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:Zt,setupCircleMarker:So},Symbol.toStringTag,{value:"Module"})),Mo={...Zt,radius:{type:Number}},Rn=(t,o,a)=>{const{options:s,methods:l}=So(t,o,a),e=H(t,Mo,s),n={...l};return{options:e,methods:n}},Ms=Object.freeze(Object.defineProperty({__proto__:null,circleProps:Mo,setupCircle:Rn},Symbol.toStringTag,{value:"Module"})),ws=F({name:"LCircle",props:Mo,setup(t,o){const a=w(),s=w(!1),l=de(se),e=U(Pe),{options:n,methods:r}=Rn(t,a,o);return K(async()=>{const{circle:i}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(i(t.latLng,n));const{listeners:d}=we(o.attrs);a.value.on(d),ae(r,a.value,t),e({...t,...r,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),{ready:s,leafletObject:a}},render(){return Ht(this.ready,this.$slots)}}),en=F({name:"LCircleMarker",props:Zt,setup(t,o){const a=w(),s=w(!1),l=de(se),e=U(Pe),{options:n,methods:r}=So(t,a,o);return K(async()=>{const{circleMarker:i}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(i(t.latLng,n));const{listeners:d}=we(o.attrs);a.value.on(d),ae(r,a.value,t),e({...t,...r,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),{ready:s,leafletObject:a}},render(){return Ht(this.ready,this.$slots)}}),Ge={...ct,position:{type:String}},mt=(t,o)=>{const{options:a,methods:s}=dt(t),l=H(t,Ge,a),e={...s,setPosition(n){o.value&&o.value.setPosition(n)}};return ro(()=>{o.value&&o.value.remove()}),{options:l,methods:e}},Vn=t=>t.default?N("div",{ref:"root"},t.default()):null,ks=Object.freeze(Object.defineProperty({__proto__:null,controlProps:Ge,renderLControl:Vn,setupControl:mt},Symbol.toStringTag,{value:"Module"}));F({name:"LControl",props:{...Ge,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,o){const a=w(),s=w(),l=de(se),e=U(Mt),{options:n,methods:r}=mt(t,a);return K(async()=>{const{Control:i,DomEvent:d}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),c=i.extend({onAdd(){return s.value}});a.value=pe(new c(n)),ae(r,a.value,t),e({leafletObject:a.value}),t.disableClickPropagation&&s.value&&d.disableClickPropagation(s.value),t.disableScrollPropagation&&s.value&&d.disableScrollPropagation(s.value),oe(()=>o.emit("ready",a.value))}),{root:s,leafletObject:a}},render(){return Vn(this.$slots)}});const Hn={...Ge,prefix:{type:String}},xs=(t,o)=>{const{options:a,methods:s}=mt(t,o),l=H(t,Hn,a),e={...s,setPrefix(n){o.value.setPrefix(n)}};return{options:l,methods:e}},Os=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:Hn,setupControlAttribution:xs},Symbol.toStringTag,{value:"Module"})),wo={...Ge,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},qn=(t,o)=>{const{options:a}=mt(t,o);return{options:H(t,wo,a),methods:{addLayer(s){s.layerType==="base"?o.value.addBaseLayer(s.leafletObject,s.name):s.layerType==="overlay"&&o.value.addOverlay(s.leafletObject,s.name)},removeLayer(s){o.value.removeLayer(s.leafletObject)}}}},Ts=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:wo,setupControlLayers:qn},Symbol.toStringTag,{value:"Module"})),$s=F({name:"LControlLayers",props:wo,setup(t,o){const a=w(),s=de(se),l=U(mo),{options:e,methods:n}=qn(t,a);return K(async()=>{const{control:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r.layers(void 0,void 0,e)),ae(n,a.value,t),l({...t,...n,leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),ko={...Ge,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Zn=(t,o)=>{const{options:a,methods:s}=mt(t,o);return{options:H(t,ko,a),methods:s}},Ps=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:ko,setupControlScale:Zn},Symbol.toStringTag,{value:"Module"})),Ds=F({name:"LControlScale",props:ko,setup(t,o){const a=w(),s=de(se),l=U(Mt),{options:e,methods:n}=Zn(t,a);return K(async()=>{const{control:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r.scale(e)),ae(n,a.value,t),l({leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),xo={...Ge,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Gn=(t,o)=>{const{options:a,methods:s}=mt(t,o);return{options:H(t,xo,a),methods:s}},Is=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:xo,setupControlZoom:Gn},Symbol.toStringTag,{value:"Module"})),Bs=F({name:"LControlZoom",props:xo,setup(t,o){const a=w(),s=de(se),l=U(Mt),{options:e,methods:n}=Gn(t,a);return K(async()=>{const{control:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r.zoom(e)),ae(n,a.value,t),l({leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),Gt={...Ze},Oo=(t,o,a)=>{const{options:s,methods:l}=pt(t,o,a),e=H(t,Gt,s),n={...l,addLayer(r){o.value.addLayer(r.leafletObject)},removeLayer(r){o.value.removeLayer(r.leafletObject)}};return ue(Pe,n.addLayer),ue(St,n.removeLayer),{options:e,methods:n}},As=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:Gt,setupLayerGroup:Oo},Symbol.toStringTag,{value:"Module"})),Un={...Gt},zs=(t,o,a)=>{const{options:s,methods:l}=Oo(t,o,a),e=H(t,Un,s),n={...l};return{options:e,methods:n}},Ns=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:Un,setupFeatureGroup:zs},Symbol.toStringTag,{value:"Module"})),Yn={...Gt,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},js=(t,o,a)=>{const{options:s,methods:l}=Oo(t,o,a),e=H(t,Yn,s);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(e.style=t.optionsStyle);const n={...l,setGeojson(r){o.value.clearLayers(),o.value.addData(r)},setOptionsStyle(r){o.value.setStyle(r)},getGeoJSONData(){return o.value.toGeoJSON()},getBounds(){return o.value.getBounds()}};return{options:e,methods:n}},Es=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:Yn,setupGeoJSON:js},Symbol.toStringTag,{value:"Module"})),Ut={...Ze,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},To=(t,o,a)=>{const{options:s,methods:l}=pt(t,o,a),e=H(t,Ut,s),n={...l,setTileComponent(){var r;(r=o.value)==null||r.redraw()}};return ro(()=>{o.value.off()}),{options:e,methods:n}},Wn=(t,o,a,s)=>t.extend({initialize(l){this.tileComponents={},this.on("tileunload",this._unloadTile),a.setOptions(this,l)},createTile(l){const e=this._tileCoordsToKey(l);this.tileComponents[e]=o.create("div");const n=N({setup:s,props:["coords"]},{coords:l});return Pr(n,this.tileComponents[e]),this.tileComponents[e]},_unloadTile(l){const e=this._tileCoordsToKey(l.coords);this.tileComponents[e]&&(this.tileComponents[e].innerHTML="",this.tileComponents[e]=void 0)}}),Fs=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Wn,gridLayerProps:Ut,setupGridLayer:To},Symbol.toStringTag,{value:"Module"}));F({props:{...Ut,childRender:{type:Function,required:!0}},setup(t,o){const a=w(),s=w(null),l=w(!1),e=de(se),n=U(Pe),{options:r,methods:i}=To(t,a,o);return K(async()=>{const{GridLayer:d,DomUtil:c,Util:u}=e?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]),m=Wn(d,c,u,t.childRender);a.value=pe(new m(r));const{listeners:p}=we(o.attrs);a.value.on(p),ae(i,a.value,t),n({...t,...i,leafletObject:a.value}),l.value=!0,oe(()=>o.emit("ready",a.value))}),{root:s,ready:l,leafletObject:a}},render(){return this.ready?N("div",{style:{display:"none"},ref:"root"}):null}});const eo={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Rs=Object.freeze(Object.defineProperty({__proto__:null,iconProps:eo},Symbol.toStringTag,{value:"Module"})),Vs=F({name:"LIcon",props:{...eo,...ct},setup(t,o){const a=w(),s=de(se),l=U(ho),e=U(fo),n=U(vo);let r,i,d,c,u;const m=(k,g,f)=>{const M=k&&k.innerHTML;if(!g){f&&u&&l()&&e(M);return}const{listeners:I}=we(o.attrs);u&&i(u,I);const{options:A}=dt(t),R=H(t,eo,A);M&&(R.html=M),u=R.html?d(R):c(R),r(u,I),n(u)},p=()=>{oe(()=>m(a.value,!0,!1))},h=()=>{oe(()=>m(a.value,!1,!0))},_={setIconUrl:p,setIconRetinaUrl:p,setIconSize:p,setIconAnchor:p,setPopupAnchor:p,setTooltipAnchor:p,setShadowUrl:p,setShadowRetinaUrl:p,setShadowAnchor:p,setBgPos:p,setClassName:p,setHtml:p};return K(async()=>{const{DomEvent:k,divIcon:g,icon:f}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);r=k.on,i=k.off,d=g,c=f,ae(_,{},t),new MutationObserver(h).observe(a.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),p()}),{root:a}},render(){const t=this.$slots.default?this.$slots.default():void 0;return N("div",{ref:"root"},t)}}),Qn={...Ze,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},Hs=(t,o,a)=>{const{options:s,methods:l}=pt(t,o,a),e=H(t,Qn,s),n={...l,setOpacity(r){return o.value.setOpacity(r)},setUrl(r){return o.value.setUrl(r)},setBounds(r){return o.value.setBounds(r)},getBounds(){return o.value.getBounds()},getElement(){return o.value.getElement()},bringToFront(){return o.value.bringToFront()},bringToBack(){return o.value.bringToBack()},setZIndex(r){return o.value.setZIndex(r)}};return{options:e,methods:n}},qs=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Qn,setupImageOverlay:Hs},Symbol.toStringTag,{value:"Module"}));function Xn(t,o,a){var s,l,e;o===void 0&&(o=50),a===void 0&&(a={});var n=(s=a.isImmediate)!=null&&s,r=(l=a.callback)!=null&&l,i=a.maxWait,d=Date.now(),c=[];function u(){if(i!==void 0){var p=Date.now()-d;if(p+o>=i)return i-p}return o}var m=function(){var p=[].slice.call(arguments),h=this;return new Promise(function(_,k){var g=n&&e===void 0;if(e!==void 0&&clearTimeout(e),e=setTimeout(function(){if(e=void 0,d=Date.now(),!n){var M=t.apply(h,p);r&&r(M),c.forEach(function(I){return(0,I.resolve)(M)}),c=[]}},u()),g){var f=t.apply(h,p);return r&&r(f),_(f)}c.push({resolve:_,reject:k})})};return m.cancel=function(p){e!==void 0&&clearTimeout(e),c.forEach(function(h){return(0,h.reject)(p)}),c=[]},m}const tn={...ct,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Zs=F({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:tn,setup(t,o){const a=w(),s=_n({ready:!1,layersToAdd:[],layersInControl:[]}),{options:l}=dt(t),e=H(t,tn,l),{listeners:n,attrs:r}=we(o.attrs),i=bt(Pe),d=bt(St),c=bt(Mt),u=bt(mo);ue(se,t.useGlobalLeaflet);const m=y(()=>{const g={};return t.noBlockingAnimations&&(g.animate=!1),g}),p=y(()=>{const g=m.value;return t.padding&&(g.padding=t.padding),t.paddingTopLeft&&(g.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(g.paddingBottomRight=t.paddingBottomRight),g}),h={moveend:Xn(g=>{s.leafletRef&&(o.emit("update:zoom",s.leafletRef.getZoom()),o.emit("update:center",s.leafletRef.getCenter()),o.emit("update:bounds",s.leafletRef.getBounds()))}),overlayadd(g){const f=s.layersInControl.find(M=>M.name===g.name);f&&f.updateVisibleProp(!0)},overlayremove(g){const f=s.layersInControl.find(M=>M.name===g.name);f&&f.updateVisibleProp(!1)}};K(async()=>{t.useGlobalLeaflet&&(ee.L=ee.L||await J(()=>import("./index-CCsCjOTf.js").then(S=>S.l),__vite__mapDeps([0,1])));const{map:g,CRS:f,Icon:M,latLngBounds:I,latLng:A,stamp:R}=t.useGlobalLeaflet?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);try{e.beforeMapMount&&await e.beforeMapMount()}catch(S){console.error(`The following error occurred running the provided beforeMapMount hook ${S.message}`)}await Nn(M);const Y=typeof e.crs=="string"?f[e.crs]:e.crs;e.crs=Y||f.EPSG3857;const ne={addLayer(S){S.layerType!==void 0&&(s.layerControl===void 0?s.layersToAdd.push(S):s.layersInControl.find(b=>R(b.leafletObject)===R(S.leafletObject))||(s.layerControl.addLayer(S),s.layersInControl.push(S))),S.visible!==!1&&s.leafletRef.addLayer(S.leafletObject)},removeLayer(S){S.layerType!==void 0&&(s.layerControl===void 0?s.layersToAdd=s.layersToAdd.filter(b=>b.name!==S.name):(s.layerControl.removeLayer(S.leafletObject),s.layersInControl=s.layersInControl.filter(b=>R(b.leafletObject)!==R(S.leafletObject)))),s.leafletRef.removeLayer(S.leafletObject)},registerLayerControl(S){s.layerControl=S,s.layersToAdd.forEach(b=>{s.layerControl.addLayer(b)}),s.layersToAdd=[],c(S)},registerControl(S){s.leafletRef.addControl(S.leafletObject)},setZoom(S){const b=s.leafletRef.getZoom();S!==b&&s.leafletRef.setZoom(S,m.value)},setCrs(S){const b=s.leafletRef.getBounds();s.leafletRef.options.crs=S,s.leafletRef.fitBounds(b,{animate:!1,padding:[0,0]})},fitBounds(S){s.leafletRef.fitBounds(S,p.value)},setBounds(S){if(!S)return;const b=I(S);b.isValid()&&!(s.lastSetBounds||s.leafletRef.getBounds()).equals(b,0)&&(s.lastSetBounds=b,s.leafletRef.fitBounds(b))},setCenter(S){if(S==null)return;const b=A(S),O=s.lastSetCenter||s.leafletRef.getCenter();(O.lat!==b.lat||O.lng!==b.lng)&&(s.lastSetCenter=b,s.leafletRef.panTo(b,m.value))}};Lt(i,ne.addLayer),Lt(d,ne.removeLayer),Lt(c,ne.registerControl),Lt(u,ne.registerLayerControl),s.leafletRef=pe(g(a.value,e)),ae(ne,s.leafletRef,t),Kt(s.leafletRef,h),Kt(s.leafletRef,n),s.ready=!0,oe(()=>o.emit("ready",s.leafletRef))}),st(()=>{po(h),s.leafletRef&&(s.leafletRef.off(),s.leafletRef.remove())});const _=y(()=>s.leafletRef),k=y(()=>s.ready);return{root:a,ready:k,leafletObject:_,attrs:r}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),N("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Gs=["Symbol(Comment)","Symbol(Text)"],Us=["LTooltip","LPopup"],$o={...Ze,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Jn=(t,o,a)=>{const{options:s,methods:l}=pt(t,o,a),e=H(t,$o,s),n={...l,setDraggable(r){o.value.dragging&&(r?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(r){a.emit("update:latLng",r.latlng),a.emit("update:lat-lng",r.latlng)},setLatLng(r){if(r!=null&&o.value){const i=o.value.getLatLng();(!i||!i.equals(r))&&o.value.setLatLng(r)}}};return{options:e,methods:n}},Kn=(t,o)=>{const a=o.slots.default&&o.slots.default();return a&&a.length&&a.some(Ys)};function Ys(t){return!(Gs.includes(t.type.toString())||Us.includes(t.type.name))}const Ws=Object.freeze(Object.defineProperty({__proto__:null,markerProps:$o,setupMarker:Jn,shouldBlankIcon:Kn},Symbol.toStringTag,{value:"Module"})),Qs=F({name:"LMarker",props:$o,setup(t,o){const a=w(),s=w(!1),l=de(se),e=U(Pe);ue(ho,()=>{var d;return!!((d=a.value)!=null&&d.getElement())}),ue(fo,d=>{var c,u;const m=Te((c=a.value)==null?void 0:c.getElement)&&((u=a.value)==null?void 0:u.getElement());m&&(m.innerHTML=d)}),ue(vo,d=>{var c;return((c=a.value)==null?void 0:c.setIcon)&&a.value.setIcon(d)});const{options:n,methods:r}=Jn(t,a,o),i={moveHandler:Xn(r.latLngSync)};return K(async()=>{const{marker:d,divIcon:c}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);Kn(n,o)&&(n.icon=c({className:""})),a.value=pe(d(t.latLng,n));const{listeners:u}=we(o.attrs);a.value.on(u),a.value.on("move",i.moveHandler),ae(r,a.value,t),e({...t,...r,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),st(()=>po(i)),{ready:s,leafletObject:a}},render(){return Ht(this.ready,this.$slots)}}),Po={...qt,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},er=(t,o,a)=>{const{options:s,methods:l}=Co(t,o,a),e=H(t,Po,s),n={...l,setSmoothFactor(r){o.value.setStyle({smoothFactor:r})},setNoClip(r){o.value.setStyle({noClip:r})},addLatLng(r){o.value.addLatLng(r)}};return{options:e,methods:n}},Xs=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:Po,setupPolyline:er},Symbol.toStringTag,{value:"Module"})),jt={...Po},tr=(t,o,a)=>{const{options:s,methods:l}=er(t,o,a),e=H(t,jt,s),n={...l,toGeoJSON(r){return o.value.toGeoJSON(r)}};return{options:e,methods:n}},Js=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:jt,setupPolygon:tr},Symbol.toStringTag,{value:"Module"})),Do={...ct,content:{type:String,default:null}},Io=(t,o)=>{const{options:a,methods:s}=dt(t),l={...s,setContent(e){o.value&&e!==null&&e!==void 0&&o.value.setContent(e)}};return{options:a,methods:l}},Bo=t=>t.default?N("div",{ref:"root"},t.default()):null,Ks=Object.freeze(Object.defineProperty({__proto__:null,popperProps:Do,render:Bo,setupPopper:Io},Symbol.toStringTag,{value:"Module"})),or={...Do,latLng:{type:[Object,Array],default:()=>[]}},nr=(t,o)=>{const{options:a,methods:s}=Io(t,o);return{options:a,methods:s}},ei=Object.freeze(Object.defineProperty({__proto__:null,popupProps:or,setupPopup:nr},Symbol.toStringTag,{value:"Module"})),ti=F({name:"LPopup",props:or,setup(t,o){const a=w(),s=w(null),l=de(se),e=U(go),n=U(yo),{options:r,methods:i}=nr(t,a);return K(async()=>{const{popup:d}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(d(r)),t.latLng!==void 0&&a.value.setLatLng(t.latLng),ae(i,a.value,t);const{listeners:c}=we(o.attrs);a.value.on(c),a.value.setContent(t.content||s.value||""),e(a.value),oe(()=>o.emit("ready",a.value))}),st(()=>{n()}),{root:s,leafletObject:a}},render(){return Bo(this.$slots)}}),rr={...jt,latLngs:{...jt.latLngs,required:!1},bounds:{type:Object,custom:!0}},oi=(t,o,a)=>{const{options:s,methods:l}=tr(t,o,a),e=H(t,rr,s),n={...l,setBounds(r){o.value.setBounds(r)},setLatLngs(r){o.value.setBounds(r)}};return{options:e,methods:n}},ni=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:rr,setupRectangle:oi},Symbol.toStringTag,{value:"Module"})),Yt={...Ut,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},Ao=(t,o,a)=>{const{options:s,methods:l}=To(t,o,a),e=H(t,Yt,s),n={...l};return{options:e,methods:n}},ri=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:Ao,tileLayerProps:Yt},Symbol.toStringTag,{value:"Module"})),ai=F({props:Yt,setup(t,o){const a=w(),s=de(se),l=U(Pe),{options:e,methods:n}=Ao(t,a,o);return K(async()=>{const{tileLayer:r}=s?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(r(t.url,e));const{listeners:i}=we(o.attrs);a.value.on(i),ae(n,a.value,t),l({...t,...n,leafletObject:a.value}),oe(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}}),ar={...Do},sr=(t,o)=>{const{options:a,methods:s}=Io(t,o),l=U(bo);return st(()=>{l()}),{options:a,methods:s}},si=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:sr,tooltipProps:ar},Symbol.toStringTag,{value:"Module"})),ii=F({name:"LTooltip",props:ar,setup(t,o){const a=w(),s=w(null),l=de(se),e=U(_o),{options:n,methods:r}=sr(t,a);return K(async()=>{const{tooltip:i}=l?ee.L:await J(()=>import("./leaflet-src.esm-HdBnhJze.js"),[]);a.value=pe(i(n)),ae(r,a.value,t);const{listeners:d}=we(o.attrs);a.value.on(d),a.value.setContent(t.content||s.value||""),e(a.value),oe(()=>o.emit("ready",a.value))}),{root:s,leafletObject:a}},render(){return Bo(this.$slots)}}),ir={...Yt,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},li=(t,o,a)=>{const{options:s,methods:l}=Ao(t,o,a);return{options:H(t,ir,s),methods:{...l}}},ui=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:li,wmsTileLayerProps:ir},Symbol.toStringTag,{value:"Module"})),lr=Object.freeze(Object.defineProperty({__proto__:null,Circle:Ms,CircleMarker:Ss,Component:ys,Control:ks,ControlAttribution:Os,ControlLayers:Ts,ControlScale:Ps,ControlZoom:Is,FeatureGroup:Ns,GeoJSON:Es,GridLayer:Fs,Icon:Rs,ImageOverlay:qs,InteractiveLayer:Ls,Layer:bs,LayerGroup:As,Marker:Ws,Path:Cs,Polygon:Js,Polyline:Xs,Popper:Ks,Popup:ei,Rectangle:ni,TileLayer:ri,Tooltip:si,WmsTileLayer:ui},Symbol.toStringTag,{value:"Module"}));var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={exports:{}};(function(t,o){(function(a,s){s(o)})(ci,function(a){var s=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var n=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,n?this._withAnimation:this._noAnimation),this._markerCluster=n?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var n=e,r=this._zoom;if(e.__parent)for(;n.__parent._zoom>=r;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,n):this._animationAddLayerNonAnimated(e,n)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,n){if(!L.Util.isArray(e))return this.addLayer(e);var r=this._featureGroup,i=this._nonPointGroup,d=this.options.chunkedLoading,c=this.options.chunkInterval,u=this.options.chunkProgress,m=e.length,p=0,h=!0,_;if(this._map){var k=new Date().getTime(),g=L.bind(function(){var M=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();p<m;p++){if(d&&p%200===0){var I=new Date().getTime()-M;if(I>c)break}if(_=e[p],_ instanceof L.LayerGroup){h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(_,e),m=e.length;continue}if(!_.getLatLng){i.addLayer(_),n||this.fire("layeradd",{layer:_});continue}if(!this.hasLayer(_)&&(this._addLayer(_,this._maxZoom),n||this.fire("layeradd",{layer:_}),_.__parent&&_.__parent.getChildCount()===2)){var A=_.__parent.getAllChildMarkers(),R=A[0]===_?A[1]:A[0];r.removeLayer(R)}}u&&u(p,m,new Date().getTime()-k),p===m?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(g,this.options.chunkDelay)},this);g()}else for(var f=this._needsClustering;p<m;p++){if(_=e[p],_ instanceof L.LayerGroup){h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(_,e),m=e.length;continue}if(!_.getLatLng){i.addLayer(_);continue}this.hasLayer(_)||f.push(_)}return this},removeLayers:function(e){var n,r,i=e.length,d=this._featureGroup,c=this._nonPointGroup,u=!0;if(!this._map){for(n=0;n<i;n++){if(r=e[n],r instanceof L.LayerGroup){u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(r,e),i=e.length;continue}this._arraySplice(this._needsClustering,r),c.removeLayer(r),this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r})}return this}if(this._unspiderfy){this._unspiderfy();var m=e.slice(),p=i;for(n=0;n<p;n++){if(r=m[n],r instanceof L.LayerGroup){this._extractNonGroupLayers(r,m),p=m.length;continue}this._unspiderfyLayer(r)}}for(n=0;n<i;n++){if(r=e[n],r instanceof L.LayerGroup){u&&(e=e.slice(),u=!1),this._extractNonGroupLayers(r,e),i=e.length;continue}if(!r.__parent){c.removeLayer(r),this.fire("layerremove",{layer:r});continue}this._removeLayer(r,!0,!0),this.fire("layerremove",{layer:r}),d.hasLayer(r)&&(d.removeLayer(r),r.clusterShow&&r.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var n=this._needsClustering.length-1;n>=0;n--)e.extend(this._needsClustering[n].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,n){var r=this._needsClustering.slice(),i=this._needsRemoving,d,c,u;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),c=r.length-1;c>=0;c--){for(d=!0,u=i.length-1;u>=0;u--)if(i[u].layer===r[c]){d=!1;break}d&&e.call(n,r[c])}this._nonPointGroup.eachLayer(e,n)},getLayers:function(){var e=[];return this.eachLayer(function(n){e.push(n)}),e},getLayer:function(e){var n=null;return e=parseInt(e,10),this.eachLayer(function(r){L.stamp(r)===e&&(n=r)}),n},hasLayer:function(e){if(!e)return!1;var n,r=this._needsClustering;for(n=r.length-1;n>=0;n--)if(r[n]===e)return!0;for(r=this._needsRemoving,n=r.length-1;n>=0;n--)if(r[n].layer===e)return!1;return!!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,n){var r=this._map;typeof n!="function"&&(n=function(){});var i=function(){(r.hasLayer(e)||r.hasLayer(e.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",i,this),this.off("animationend",i,this),r.hasLayer(e)?n():e.__parent._icon&&(this.once("spiderfied",n,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?n():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),e.__parent.zoomToBounds())},onAdd:function(e){this._map=e;var n,r,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,n=0,r=this._needsRemoving.length;n<r;n++)i=this._needsRemoving[n],i.newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(n=0,r=this._needsRemoving.length;n<r;n++)i=this._needsRemoving[n],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),r=this._needsClustering,this._needsClustering=[],this.addLayers(r,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var n=e;n&&!n._icon;)n=n.__parent;return n||null},_arraySplice:function(e,n){for(var r=e.length-1;r>=0;r--)if(e[r]===n)return e.splice(r,1),!0},_removeFromGridUnclustered:function(e,n){for(var r=this._map,i=this._gridUnclustered,d=Math.floor(this._map.getMinZoom());n>=d&&i[n].removeObject(e,r.project(e.getLatLng(),n));n--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var n=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),n&&e.target.openPopup()}},_moveChild:function(e,n,r){e._latlng=n,this.removeLayer(e),e._latlng=r,this.addLayer(e)},_childMarkerDragEnd:function(e){var n=e.target.__dragStart;delete e.target.__dragStart,n&&this._moveChild(e.target,n,e.target._latlng)},_removeLayer:function(e,n,r){var i=this._gridClusters,d=this._gridUnclustered,c=this._featureGroup,u=this._map,m=Math.floor(this._map.getMinZoom());n&&this._removeFromGridUnclustered(e,this._maxZoom);var p=e.__parent,h=p._markers,_;for(this._arraySplice(h,e);p&&(p._childCount--,p._boundsNeedUpdate=!0,!(p._zoom<m));)n&&p._childCount<=1?(_=p._markers[0]===e?p._markers[1]:p._markers[0],i[p._zoom].removeObject(p,u.project(p._cLatLng,p._zoom)),d[p._zoom].addObject(_,u.project(_.getLatLng(),p._zoom)),this._arraySplice(p.__parent._childClusters,p),p.__parent._markers.push(_),_.__parent=p.__parent,p._icon&&(c.removeLayer(p),r||c.addLayer(_))):p._iconNeedsUpdate=!0,p=p.__parent;delete e.__parent},_isOrIsParent:function(e,n){for(;n;){if(e===n)return!0;n=n.parentNode}return!1},fire:function(e,n,r){if(n&&n.layer instanceof L.MarkerCluster){if(n.originalEvent&&this._isOrIsParent(n.layer._icon,n.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,n,r)},listens:function(e,n){return L.FeatureGroup.prototype.listens.call(this,e,n)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,n)},_defaultIconCreateFunction:function(e){var n=e.getChildCount(),r=" marker-cluster-";return n<10?r+="small":n<100?r+="medium":r+="large",new L.DivIcon({html:"<div><span>"+n+"</span></div>",className:"marker-cluster"+r,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,n=this.options.spiderfyOnMaxZoom,r=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom;(n||i||d)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),r&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var n=e.layer,r=n;if(!(e.type==="clusterkeypress"&&e.originalEvent&&e.originalEvent.keyCode!==13)){for(;r._childClusters.length===1;)r=r._childClusters[0];r._zoom===this._maxZoom&&r._childCount===n._childCount&&this.options.spiderfyOnMaxZoom?n.spiderfy():this.options.zoomToBoundsOnClick&&n.zoomToBounds(),this.options.spiderfyOnEveryZoom&&n.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var n=this._map;this._inZoomAnimation||(this._shownPolygon&&n.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),n.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick,i=this.options.spiderfyOnEveryZoom,d=this._map;(e||r||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),n=Math.floor(this._map.getMinZoom()),r=this.options.maxClusterRadius,i=r;typeof r!="function"&&(i=function(){return r}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var d=e;d>=n;d--)this._gridClusters[d]=new L.DistanceGrid(i(d)),this._gridUnclustered[d]=new L.DistanceGrid(i(d));this._topClusterLevel=new this._markerCluster(this,n-1)},_addLayer:function(e,n){var r=this._gridClusters,i=this._gridUnclustered,d=Math.floor(this._map.getMinZoom()),c,u;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);n>=d;n--){c=this._map.project(e.getLatLng(),n);var m=r[n].getNearObject(c);if(m){m._addChild(e),e.__parent=m;return}if(m=i[n].getNearObject(c),m){var p=m.__parent;p&&this._removeLayer(m,!1);var h=new this._markerCluster(this,n,m,e);r[n].addObject(h,this._map.project(h._cLatLng,n)),m.__parent=h,e.__parent=h;var _=h;for(u=n-1;u>p._zoom;u--)_=new this._markerCluster(this,u,_),r[u].addObject(_,this._map.project(m.getLatLng(),u));p._addChild(_),this._removeFromGridUnclustered(m,n);return}i[n].addObject(e,c)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(e){var n=this._maxLat;return n!==void 0&&(e.getNorth()>=n&&(e._northEast.lat=1/0),e.getSouth()<=-n&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,n){if(n===e)this._featureGroup.addLayer(e);else if(n._childCount===2){n._addToMap();var r=n.getAllChildMarkers();this._featureGroup.removeLayer(r[0]),this._featureGroup.removeLayer(r[1])}else n._updateIcon()},_extractNonGroupLayers:function(e,n){var r=e.getLayers(),i=0,d;for(n=n||[];i<r.length;i++){if(d=r[i],d instanceof L.LayerGroup){this._extractNonGroupLayers(d,n);continue}n.push(d)}return n},_overrideMarkerIcon:function(e){var n=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return n}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,n){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,n){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,n){this._animationAddLayerNonAnimated(e,n)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,n){var r=this._getExpandedVisibleBounds(),i=this._featureGroup,d=Math.floor(this._map.getMinZoom()),c;this._ignoreMove=!0,this._topClusterLevel._recursively(r,e,d,function(u){var m=u._latlng,p=u._markers,h;for(r.contains(m)||(m=null),u._isSingleParent()&&e+1===n?(i.removeLayer(u),u._recursivelyAddChildrenToMap(null,n,r)):(u.clusterHide(),u._recursivelyAddChildrenToMap(m,n,r)),c=p.length-1;c>=0;c--)h=p[c],r.contains(h._latlng)||i.removeLayer(h)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(r,n),i.eachLayer(function(u){!(u instanceof L.MarkerCluster)&&u._icon&&u.clusterShow()}),this._topClusterLevel._recursively(r,e,n,function(u){u._recursivelyRestoreChildPositions(n)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(r,e,d,function(u){i.removeLayer(u),u.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,n){this._animationZoomOutSingle(this._topClusterLevel,e-1,n),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,n){var r=this,i=this._featureGroup;i.addLayer(e),n!==e&&(n._childCount>2?(n._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(n.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),r._animationEnd()})):(this._forceLayout(),r._animationStart(),r._animationZoomOutSingle(n,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,n,r){var i=this._getExpandedVisibleBounds(),d=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,d,n+1,r);var c=this;this._forceLayout(),e._recursivelyBecomeVisible(i,r),this._enqueue(function(){if(e._childCount===1){var u=e._markers[0];this._ignoreMove=!0,u.setLatLng(u.getLatLng()),this._ignoreMove=!1,u.clusterShow&&u.clusterShow()}else e._recursively(i,r,d,function(m){m._recursivelyRemoveChildrenFromMap(i,d,n+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var l=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,n,r,i){L.Marker.prototype.initialize.call(this,r?r._cLatLng||r.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=n,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,r&&this._addChild(r),i&&this._addChild(i)},getAllChildMarkers:function(e,n){e=e||[];for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r].getAllChildMarkers(e,n);for(var i=this._markers.length-1;i>=0;i--)n&&this._markers[i].__dragStart||e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var n=this._childClusters.slice(),r=this._group._map,i=r.getBoundsZoom(this._bounds),d=this._zoom+1,c=r.getZoom(),u;n.length>0&&i>d;){d++;var m=[];for(u=0;u<n.length;u++)m=m.concat(n[u]._childClusters);n=m}i>d?this._group._map.setView(this._latlng,d):i<=c?this._group._map.setView(this._latlng,c+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,n){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(n||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(n||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e=this._markers,n=this._childClusters,r=0,i=0,d=this._childCount,c,u,m,p;if(d!==0){for(this._resetBounds(),c=0;c<e.length;c++)m=e[c]._latlng,this._bounds.extend(m),r+=m.lat,i+=m.lng;for(c=0;c<n.length;c++)u=n[c],u._boundsNeedUpdate&&u._recalculateBounds(),this._bounds.extend(u._bounds),m=u._wLatLng,p=u._childCount,r+=m.lat*p,i+=m.lng*p;this._latlng=this._wLatLng=new L.LatLng(r/d,i/d),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,n,r){this._recursively(e,this._group._map.getMinZoom(),r-1,function(i){var d=i._markers,c,u;for(c=d.length-1;c>=0;c--)u=d[c],u._icon&&(u._setPos(n),u.clusterHide())},function(i){var d=i._childClusters,c,u;for(c=d.length-1;c>=0;c--)u=d[c],u._icon&&(u._setPos(n),u.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,n,r,i){this._recursively(e,i,n,function(d){d._recursivelyAnimateChildrenIn(e,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),r),d._isSingleParent()&&r-1===i?(d.clusterShow(),d._recursivelyRemoveChildrenFromMap(e,n,r)):d.clusterHide(),d._addToMap()})},_recursivelyBecomeVisible:function(e,n){this._recursively(e,this._group._map.getMinZoom(),n,null,function(r){r.clusterShow()})},_recursivelyAddChildrenToMap:function(e,n,r){this._recursively(r,this._group._map.getMinZoom()-1,n,function(i){if(n!==i._zoom)for(var d=i._markers.length-1;d>=0;d--){var c=i._markers[d];r.contains(c._latlng)&&(e&&(c._backupLatlng=c.getLatLng(),c.setLatLng(e),c.clusterHide&&c.clusterHide()),i._group._featureGroup.addLayer(c))}},function(i){i._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var n=this._markers.length-1;n>=0;n--){var r=this._markers[n];r._backupLatlng&&(r.setLatLng(r._backupLatlng),delete r._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,n,r,i){var d,c;this._recursively(e,n-1,r-1,function(u){for(c=u._markers.length-1;c>=0;c--)d=u._markers[c],(!i||!i.contains(d._latlng))&&(u._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())},function(u){for(c=u._childClusters.length-1;c>=0;c--)d=u._childClusters[c],(!i||!i.contains(d._latlng))&&(u._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())})},_recursively:function(e,n,r,i,d){var c=this._childClusters,u=this._zoom,m,p;if(n<=u&&(i&&i(this),d&&u===r&&d(this)),u<n||u<r)for(m=c.length-1;m>=0;m--)p=c[m],p._boundsNeedUpdate&&p._recalculateBounds(),e.intersects(p._bounds)&&p._recursively(e,n,r,i,d)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,n){var r=this._getCoord(n.x),i=this._getCoord(n.y),d=this._grid,c=d[i]=d[i]||{},u=c[r]=c[r]||[],m=L.Util.stamp(e);this._objectPoint[m]=n,u.push(e)},updateObject:function(e,n){this.removeObject(e),this.addObject(e,n)},removeObject:function(e,n){var r=this._getCoord(n.x),i=this._getCoord(n.y),d=this._grid,c=d[i]=d[i]||{},u=c[r]=c[r]||[],m,p;for(delete this._objectPoint[L.Util.stamp(e)],m=0,p=u.length;m<p;m++)if(u[m]===e)return u.splice(m,1),p===1&&delete c[r],!0},eachObject:function(e,n){var r,i,d,c,u,m,p,h=this._grid;for(r in h){u=h[r];for(i in u)for(m=u[i],d=0,c=m.length;d<c;d++)p=e.call(n,m[d]),p&&(d--,c--)}},getNearObject:function(e){var n=this._getCoord(e.x),r=this._getCoord(e.y),i,d,c,u,m,p,h,_,k=this._objectPoint,g=this._sqCellSize,f=null;for(i=r-1;i<=r+1;i++)if(u=this._grid[i],u){for(d=n-1;d<=n+1;d++)if(m=u[d],m)for(c=0,p=m.length;c<p;c++)h=m[c],_=this._sqDist(k[L.Util.stamp(h)],e),(_<g||_<=g&&f===null)&&(g=_,f=h)}return f},_getCoord:function(e){var n=Math.floor(e/this._cellSize);return isFinite(n)?n:e},_sqDist:function(e,n){var r=n.x-e.x,i=n.y-e.y;return r*r+i*i}},function(){L.QuickHull={getDistant:function(e,n){var r=n[1].lat-n[0].lat,i=n[0].lng-n[1].lng;return i*(e.lat-n[0].lat)+r*(e.lng-n[0].lng)},findMostDistantPointFromBaseLine:function(e,n){var r=0,i=null,d=[],c,u,m;for(c=n.length-1;c>=0;c--){if(u=n[c],m=this.getDistant(u,e),m>0)d.push(u);else continue;m>r&&(r=m,i=u)}return{maxPoint:i,newPoints:d}},buildConvexHull:function(e,n){var r=[],i=this.findMostDistantPointFromBaseLine(e,n);return i.maxPoint?(r=r.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints)),r=r.concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)),r):[e[0]]},getConvexHull:function(e){var n=!1,r=!1,i=!1,d=!1,c=null,u=null,m=null,p=null,h=null,_=null,k;for(k=e.length-1;k>=0;k--){var g=e[k];(n===!1||g.lat>n)&&(c=g,n=g.lat),(r===!1||g.lat<r)&&(u=g,r=g.lat),(i===!1||g.lng>i)&&(m=g,i=g.lng),(d===!1||g.lng<d)&&(p=g,d=g.lng)}r!==n?(_=u,h=c):(_=p,h=m);var f=[].concat(this.buildConvexHull([_,h],e),this.buildConvexHull([h,_],e));return f}}}(),L.MarkerCluster.include({getConvexHull:function(){var e=this.getAllChildMarkers(),n=[],r,i;for(i=e.length-1;i>=0;i--)r=e[i].getLatLng(),n.push(r);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var e=this.getAllChildMarkers(null,!0),n=this._group,r=n._map,i=r.latLngToLayerPoint(this._latlng),d;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?d=this._group.options.spiderfyShapePositions(e.length,i):e.length>=this._circleSpiralSwitchover?d=this._generatePointsSpiral(e.length,i):(i.y+=10,d=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,d)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,n){var r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),i=r/this._2PI,d=this._2PI/e,c=[],u,m;for(i=Math.max(i,35),c.length=e,u=0;u<e;u++)m=this._circleStartAngle+u*d,c[u]=new L.Point(n.x+i*Math.cos(m),n.y+i*Math.sin(m))._round();return c},_generatePointsSpiral:function(e,n){var r=this._group.options.spiderfyDistanceMultiplier,i=r*this._spiralLengthStart,d=r*this._spiralFootSeparation,c=r*this._spiralLengthFactor*this._2PI,u=0,m=[],p;for(m.length=e,p=e;p>=0;p--)p<e&&(m[p]=new L.Point(n.x+i*Math.cos(u),n.y+i*Math.sin(u))._round()),u+=d/i+p*5e-4,i+=c/u;return m},_noanimationUnspiderfy:function(){var e=this._group,n=e._map,r=e._featureGroup,i=this.getAllChildMarkers(null,!0),d,c;for(e._ignoreMove=!0,this.setOpacity(1),c=i.length-1;c>=0;c--)d=i[c],r.removeLayer(d),d._preSpiderfyLatlng&&(d.setLatLng(d._preSpiderfyLatlng),delete d._preSpiderfyLatlng),d.setZIndexOffset&&d.setZIndexOffset(0),d._spiderLeg&&(n.removeLayer(d._spiderLeg),delete d._spiderLeg);e.fire("unspiderfied",{cluster:this,markers:i}),e._ignoreMove=!1,e._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,n){var r=this._group,i=r._map,d=r._featureGroup,c=this._group.options.spiderLegPolylineOptions,u,m,p,h;for(r._ignoreMove=!0,u=0;u<e.length;u++)h=i.layerPointToLatLng(n[u]),m=e[u],p=new L.Polyline([this._latlng,h],c),i.addLayer(p),m._spiderLeg=p,m._preSpiderfyLatlng=m._latlng,m.setLatLng(h),m.setZIndexOffset&&m.setZIndexOffset(1e6),d.addLayer(m);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,n){var r=this,i=this._group,d=i._map,c=i._featureGroup,u=this._latlng,m=d.latLngToLayerPoint(u),p=L.Path.SVG,h=L.extend({},this._group.options.spiderLegPolylineOptions),_=h.opacity,k,g,f,M,I,A;for(_===void 0&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(h.opacity=0,h.className=(h.className||"")+" leaflet-cluster-spider-leg"):h.opacity=_,i._ignoreMove=!0,k=0;k<e.length;k++)g=e[k],A=d.layerPointToLatLng(n[k]),f=new L.Polyline([u,A],h),d.addLayer(f),g._spiderLeg=f,p&&(M=f._path,I=M.getTotalLength()+.1,M.style.strokeDasharray=I,M.style.strokeDashoffset=I),g.setZIndexOffset&&g.setZIndexOffset(1e6),g.clusterHide&&g.clusterHide(),c.addLayer(g),g._setPos&&g._setPos(m);for(i._forceLayout(),i._animationStart(),k=e.length-1;k>=0;k--)A=d.layerPointToLatLng(n[k]),g=e[k],g._preSpiderfyLatlng=g._latlng,g.setLatLng(A),g.clusterShow&&g.clusterShow(),p&&(f=g._spiderLeg,M=f._path,M.style.strokeDashoffset=0,f.setStyle({opacity:_}));this.setOpacity(.3),i._ignoreMove=!1,setTimeout(function(){i._animationEnd(),i.fire("spiderfied",{cluster:r,markers:e})},200)},_animationUnspiderfy:function(e){var n=this,r=this._group,i=r._map,d=r._featureGroup,c=e?i._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):i.latLngToLayerPoint(this._latlng),u=this.getAllChildMarkers(null,!0),m=L.Path.SVG,p,h,_,k,g,f;for(r._ignoreMove=!0,r._animationStart(),this.setOpacity(1),h=u.length-1;h>=0;h--)p=u[h],p._preSpiderfyLatlng&&(p.closePopup(),p.setLatLng(p._preSpiderfyLatlng),delete p._preSpiderfyLatlng,f=!0,p._setPos&&(p._setPos(c),f=!1),p.clusterHide&&(p.clusterHide(),f=!1),f&&d.removeLayer(p),m&&(_=p._spiderLeg,k=_._path,g=k.getTotalLength()+.1,k.style.strokeDashoffset=g,_.setStyle({opacity:0})));r._ignoreMove=!1,setTimeout(function(){var M=0;for(h=u.length-1;h>=0;h--)p=u[h],p._spiderLeg&&M++;for(h=u.length-1;h>=0;h--)p=u[h],p._spiderLeg&&(p.clusterShow&&p.clusterShow(),p.setZIndexOffset&&p.setZIndexOffset(0),M>1&&d.removeLayer(p),i.removeLayer(p._spiderLeg),delete p._spiderLeg);r._animationEnd(),r.fire("unspiderfied",{cluster:n,markers:u})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var n,r;for(n in e)for(r=e[n].__parent;r;)r._iconNeedsUpdate=!0,r=r.__parent},_refreshSingleMarkerModeMarkers:function(e){var n,r;for(n in e)r=e[n],this.hasLayer(r)&&r.setIcon(this._overrideMarkerIcon(r))}}),L.Marker.include({refreshIconOptions:function(e,n){var r=this.options.icon;return L.setOptions(r,e),this.setIcon(r),n&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=s,a.MarkerCluster=l,Object.defineProperty(a,"__esModule",{value:!0})})})(on,on.exports);const nn=(t,o)=>{let a;return(...s)=>{const l=()=>(a=void 0,t.apply(void 0,s));clearTimeout(a),a=setTimeout(l,o)}},{featureGroupProps:di,setupFeatureGroup:pi}=lr.FeatureGroup,{AddLayerInjection:mi,RemoveLayerInjection:hi}=En,{propsToLeafletOptions:fi}=jn,vi=["layeradd","layerremove","click","dblclick","mousedown","mouseup","mouseover","mouseout","contextmenu"],rn=[...vi,"clusterclick","clustermouseover","clustermouseout","animationend","spiderfied","unspiderfied"],ur={...di,maxClusterRadius:{type:[Number,Function],default:80},clusterPane:{type:String,default:"markerPane"},spiderfyOnEveryZoom:{type:Boolean,default:!1},spiderfyOnMaxZoom:{type:Boolean,default:!0},showCoverageOnHover:{type:Boolean,default:!0},zoomToBoundsOnClick:{type:Boolean,default:!0},singleMarkerMode:{type:Boolean,default:!1},disableClusteringAtZoom:{type:Number,default:null},removeOutsideVisibleBounds:{type:Boolean,default:!0},animate:{type:Boolean,default:!0},animateAddingMarkers:{type:Boolean,default:!1},spiderfyShapePositions:{type:Function,default:null},spiderfyDistanceMultiplier:{type:Number,default:1},spiderLegPolylineOptions:{type:Object,default:()=>({weight:1.5,color:"#222",opacity:.5})},chunkedLoading:{type:Boolean,default:!1},chunkInterval:{type:Number,default:200},chunkDelay:{type:Number,default:50},chunkProgress:{type:Function,default:null},polygonOptions:{type:Object,default:()=>({})},iconCreateFunction:{type:Function,default:null}},gi=(t,o,a)=>{const{options:s,methods:l}=pi(t,o,a),e=fi(t,ur,s);let n=[];const r=nn(()=>{var u,m;n.length===1?(u=o.value)==null||u.addLayer(n[0]):(m=o.value)==null||m.addLayers(n),n=[]},0);let i=[];const d=nn(()=>{var u,m;i.length===1?(u=o.value)==null||u.removeLayer(i[0]):(m=o.value)==null||m.removeLayers(i),i=[]},0),c={...l,addLayer(u){var m;if(t.animateAddingMarkers)return(m=o.value)==null?void 0:m.addLayer(u.leafletObject);n.push(u.leafletObject),r()},removeLayer(u){var m;if(t.animateAddingMarkers)return(m=o.value)==null?void 0:m.removeLayer(u.leafletObject);i.push(u.leafletObject),d()},setMaxClusterRadius(){throw new Error("Max cluster radius can't be set dynamically")},setClusterPane(){throw new Error("Cluster pane can't be set dynamically")},setSpiderfyOnEveryZoom(u){o.value&&(o.value._unbindEvents(),o.value.options.spiderfyOnEveryZoom=u,o.value._bindEvents())},setSpiderfyOnMaxZoom(u){o.value&&(o.value._unbindEvents(),o.value.options.spiderfyOnMaxZoom=u,o.value._bindEvents())},setShowCoverageOnHover(u){o.value&&(o.value._unbindEvents(),o.value.options.showCoverageOnHover=u,o.value._bindEvents())},setZoomToBoundsOnClick(u){o.value&&(o.value._unbindEvents(),o.value.options.zoomToBoundsOnClick=u,o.value._bindEvents())},setSingleMarkerMode(){throw new Error("Single marker mode can't be set dynamically")},setDisableClusteringAtZoom(){throw new Error("Disable Clustering at zoom can't be set dynamically")},setRemoveOutsideVisibleBounds(u){o.value&&(o.value.options.removeOutsideVisibleBounds=u)},setAnimate(){throw new Error("Animate can't be set dynamically")},setAnimateAddingMarkers(u){o.value&&(o.value.options.animateAddingMarkers=u)},setSpiderfyShapePositions(u){o.value&&(o.value.options.spiderfyShapePositions=u)},setSpiderfyDistanceMultiplier(u){o.value&&(o.value.options.spiderfyDistanceMultiplier=u)},setSpiderLegPolylineOptions(u){o.value&&(o.value.options.spiderLegPolylineOptions=u)},setChunkedLoading(u){o.value&&(o.value.options.chunkedLoading=u)},setChunkInterval(u){o.value&&(o.value.options.chunkInterval=u)},setChunkDelay(u){o.value&&(o.value.options.chunkDelay=u)},setChunkProgress(u){o.value&&(o.value.options.chunkProgress=u)},setPolygonOptions(u){o.value&&(o.value.options.polygonOptions=u)},setIconCreateFunction(u){o.value&&(o.value._unbindEvents(),o.value.options.iconCreateFunction=u,o.value._bindEvents())}};return ue(mi,c.addLayer),ue(hi,c.removeLayer),{options:e,methods:c}},{propsBinder:_i,assertInject:yi,WINDOW_OR_GLOBAL:bi}=jn,{AddLayerInjection:Li}=En,{render:Ci}=lr.Layer,Si={props:ur,emits:["ready",...rn],setup(t,o){const a=w(),s=w(!1),l=yi(Li),{methods:e,options:n}=gi(t,a,o);return K(async()=>{var r;const{markerClusterGroup:i}=bi.L;a.value=pe(i(n));const d=u=>m=>o.emit(u,m),c=()=>{const u={};for(const m of rn)u[m]=d(m);return u};(r=a.value)==null||r.on(c()),_i(e,a.value,t),l({...t,...e,leafletObject:a.value}),s.value=!0,oe(()=>o.emit("ready",a.value))}),{ready:s,leafletObject:a}},render(){return Ci(this.ready,this.$slots)}},Mi={class:"fullContainer relative"},wi={key:0,class:"searchMenuContainer w-[33%] shadow-3 rounded-borders relative"},ki={class:"bottomRightToolbar flex flex-col gap-1"},xi={class:"mapContainer"},Oi=F({__name:"VlMap",props:{markersNumber:{}},emits:["research"],setup(t,{expose:o,emit:a}){Dr($=>({60185150:m.value}));const s=a,{coords:l,locatedAt:e,error:n,resume:r,pause:i}=da(),{isMobile:d}=Ir(),c=Br(),{mapCenter:u}=Ae(c),m=w("10px"),p=w(!1),h=w(null),_=w(),k=w([at.LATITUDE_OF_TAIWAN,at.LONGITUDE_OF_TAIWAN]),g=w(8),f=w("btn"),M=w(!1),I=w(!1),A=w({textColor:"black",color:"white"}),R=y(()=>[l.value.latitude,l.value.longitude]),Y=_n({center:"",zoom:"",bounds:""}),ne={btn:"panel",panel:"btn"},S=[{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",visible:!0},{name:"OpenTopoMap",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",visible:!1},{name:"Esri_WorldImagery",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",visible:!1},{name:"CartoDB_DarkMatter",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",visible:!1},{name:"CartoDB_Voyager",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",visible:!1},{name:"OPNVKarte",url:"https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",visible:!1},{name:"CyclOSM",url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",visible:!1}];ve(l,()=>{ke(R.value)},{deep:!0});const b=()=>{M.value=!M.value},O=$=>{p.value=$},ie=()=>{A.value={textColor:"white",color:"primary"},r()},C=()=>{A.value={textColor:"black",color:"white"},i()},ke=$=>{k.value=$},Ne=$=>{switch(u.value=$,Y.center){case"locate":Y.center="",setTimeout(()=>De(16),500),Y.zoom="locate";break}},De=$=>{g.value=$},be=()=>{},xe=()=>{},re=()=>{f.value=ne[f.value]},ge=()=>{I.value=!I.value,I.value?(ie(),Y.center="locate"):C()};return ao(()=>{i()}),o({setUpdateLoadingState:O,updateCenter:ke,updateZoom:De}),($,P)=>{const te=yn;return E(),$e("div",Mi,[It(T(te,{class:"map-top-right",color:"primary",fab:"",icon:"search",round:"",size:"lg",onClick:P[0]||(P[0]=q=>B(d)?b():re())},null,512),[[Ko,f.value,"btn",{resize:!0}]]),B(d)?(E(),W(Ar,{key:1,modelValue:M.value,"onUpdate:modelValue":P[1]||(P[1]=q=>M.value=q),behavior:"mobile",bordered:"",class:"p-3",overlay:"",side:"right"},{default:D(()=>[ce($.$slots,"search-menu",{},void 0,!0)]),_:3},8,["modelValue"])):It((E(),$e("div",wi,[T(te,{class:"absolute -left-2 -bottom-2",color:"white",icon:"arrow_outward",round:"",size:"sm","text-color":"primary",onClick:re}),ce($.$slots,"search-menu",{},void 0,!0)])),[[Ko,f.value,"panel",{resize:!0}]]),T(te,{icon:B(zr),loading:p.value,style:vn({top:f.value==="btn"?`calc(${m.value} + 57.6px + 4px)`:`calc(${m.value} + 244px + 4px)`}),class:"researchBtn",color:"secondary",fab:"",round:"",size:"lg","text-color":"primary",onClick:P[2]||(P[2]=q=>s("research"))},null,8,["icon","loading","style"]),V("div",ki,[T(te,{color:A.value.color,"text-color":A.value.textColor,dense:"",icon:"my_location",padding:"6.425px",size:"sm",style:{"border-radius":"8px"},onClick:ge},null,8,["color","text-color"])]),V("div",xi,[T(B(Zs),{center:k.value,"onUpdate:center":[P[3]||(P[3]=q=>k.value=q),Ne],zoom:g.value,"onUpdate:zoom":[P[4]||(P[4]=q=>g.value=q),be],ref_key:"mapRef",ref:h,options:{zoomControl:!1,preferCanvas:!0},"use-global-leaflet":!0,class:"map",onReady:P[5]||(P[5]=q=>_.value=q),"onUpdate:bounds":xe},{default:D(()=>[T(B($s),{position:"bottomleft"}),(E(),$e(qe,null,ze(S,q=>T(B(ai),{key:q.name,name:q.name,url:q.url,visible:q.visible,attribution:"© 2024 smoBEE & Cake","layer-type":"base","onUpdate:visible":q.onUpdateVisibility},null,8,["name","url","visible","onUpdate:visible"])),64)),T(B(Ds)),T(B(Bs),{position:"bottomright"}),B(e)?(E(),$e(qe,{key:0},[T(B(ws),{"lat-lng":R.value,radius:Math.ceil(B(l).accuracy/2),stroke:!1},null,8,["lat-lng","radius"]),T(B(en),{fillOpacity:1,"lat-lng":R.value,radius:6.5,stroke:!1,fillColor:"#fff"},null,8,["lat-lng"]),T(B(en),{fillOpacity:1,"lat-lng":R.value,radius:3.5,fillColor:"#3388ff"},null,8,["lat-lng"])],64)):Nr("",!0),$.markersNumber<=100?ce($.$slots,"markers",{key:1},void 0,!0):(E(),W(B(Si),{key:2},{default:D(()=>[ce($.$slots,"markers",{},void 0,!0)]),_:3}))]),_:3},8,["center","zoom"])])])}}}),Ti=oo(Oi,[["__scopeId","data-v-a5d63a0b"]]),$i={class:"ellipsis-2-lines"},Pi={class:"remark"},Di=F({__name:"VlPopup",props:{options:{},navigationUrl:{}},emits:["detail"],setup(t,{emit:o}){const a=o,s=t,l=it();lt();const e=y(()=>({offset:[0,-25],closeButton:!1,...s.options||{}}));return(n,r)=>{const i=yn,d=bn;return E(),W(B(ti),ut(B(l),{options:e.value}),{default:D(()=>[T(jr,{class:"popupCard flex flex-col gap-2",flat:""},{default:D(()=>[T(Wt,{class:"!px-2 !pt-2 !pb-0"},{default:D(()=>[V("div",$i,[ce(n.$slots,"location",{},void 0,!0)])]),_:3}),T(Wt,{class:"!px-2 !py-0"},{default:D(()=>[ce(n.$slots,"content",{},void 0,!0)]),_:3}),T(Er,{align:"center",class:"!px-2 !py-0 no-wrap"},{default:D(()=>[ce(n.$slots,"buttons",{},()=>[T(i,{label:n.$t("detail"),class:"flex-1",color:"info",icon:"o_info",size:"sm",onClick:r[0]||(r[0]=c=>a("detail"))},null,8,["label"]),T(d,{href:n.navigationUrl,icon:B(ma),label:n.$t("navigation"),color:"positive",size:"sm"},null,8,["href","icon","label"])],!0)]),_:3}),T(Fr),T(Wt,{class:"!px-2 !pt-0 !pb-2"},{default:D(()=>[V("div",Pi,[ce(n.$slots,"remark",{},void 0,!0)])]),_:3})]),_:3})]),_:3},16,["options"])}}}),Ii=oo(Di,[["__scopeId","data-v-7d3f9af3"]]),Bi=F({__name:"VlTooltip",props:{permanent:{type:Boolean},options:{}},setup(t){const o=t,a=it(),s=lt(),l=y(()=>({offset:[0,-17],permanent:o.permanent,...o.options||{}}));return(e,n)=>(E(),W(B(ii),ut(B(a),{options:l.value}),Rt({_:2},[ze(Object.keys(B(s)),(r,i)=>({name:r,fn:D(()=>[ce(e.$slots,r)])}))]),1040,["options"]))}}),Ai="/beBird/assets/twt-Bs4LEmw2.svg",zi=F({__name:"VlIcon",setup(t){const o=it(),a=lt();return(s,l)=>(E(),W(B(Vs),ut(B(o),{"icon-anchor":[7,35],"icon-size":[14,35],"icon-url":B(Ai)}),Rt({_:2},[ze(Object.keys(B(a)),(e,n)=>({name:e,fn:D(()=>[ce(s.$slots,e)])}))]),1040,["icon-url"]))}}),Ni=Vt({name:"QInnerLoading",props:{...Ln,...Rr,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(t,{slots:o}){const a=Et(),s=Cn(t,a.proxy.$q),{transitionProps:l,transitionStyle:e}=Vr(t),n=y(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(s.value===!0?" q-inner-loading--dark":"")),r=y(()=>"q-inner-loading__label"+(t.labelClass!==void 0?` ${t.labelClass}`:""));function i(){const c=[N(qr,{size:t.size,color:t.color})];return t.label!==void 0&&c.push(N("div",{class:r.value,style:t.labelStyle},[t.label])),c}function d(){return t.showing===!0?N("div",{class:n.value,style:e.value},o.default!==void 0?o.default():i()):null}return()=>N(Hr,l.value,d)}}),ji='<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>',Ei=Vt({name:"QSpinnerFacebook",props:Zr,setup(t){const{cSize:o,classes:a}=Gr(t);return()=>N("svg",{class:a.value,width:o.value,height:o.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:ji})}}),Fi=F({__name:"SubLoading",props:{show:{type:Boolean}},setup(t){const o=it();return lt(),(a,s)=>(E(),W(B(Ni),ut(B(o),{showing:a.show,dark:""}),{default:D(()=>[ce(a.$slots,"default",{},()=>[T(B(Ei),{color:B(o).color||"secondary",size:"3em"},null,8,["color"])])]),_:3},16,["showing"]))}}),an="q-slider__marker-labels",Ri=t=>({value:t}),Vi=({marker:t})=>N("div",{key:t.value,style:t.style,class:t.classes},t.label),cr=[34,37,40,33,39,38],Hi={...Ln,...Wr,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},qi=["pan","update:modelValue","change"];function Zi({updateValue:t,updatePosition:o,getDragging:a,formAttrs:s}){const{props:l,emit:e,slots:n,proxy:{$q:r}}=Et(),i=Cn(l,r),d=Jr(s),c=w(!1),u=w(!1),m=w(!1),p=w(!1),h=y(()=>l.vertical===!0?"--v":"--h"),_=y(()=>"-"+(l.switchLabelSide===!0?"switched":"standard")),k=y(()=>l.vertical===!0?l.reverse===!0:l.reverse!==(r.lang.rtl===!0)),g=y(()=>isNaN(l.innerMin)===!0||l.innerMin<l.min?l.min:l.innerMin),f=y(()=>isNaN(l.innerMax)===!0||l.innerMax>l.max?l.max:l.innerMax),M=y(()=>l.disable!==!0&&l.readonly!==!0&&g.value<f.value),I=y(()=>{if(l.step===0)return x=>x;const v=(String(l.step).trim().split(".")[1]||"").length;return x=>parseFloat(x.toFixed(v))}),A=y(()=>l.step===0?1:l.step),R=y(()=>M.value===!0?l.tabindex||0:-1),Y=y(()=>l.max-l.min),ne=y(()=>f.value-g.value),S=y(()=>vt(g.value)),b=y(()=>vt(f.value)),O=y(()=>l.vertical===!0?k.value===!0?"bottom":"top":k.value===!0?"right":"left"),ie=y(()=>l.vertical===!0?"height":"width"),C=y(()=>l.vertical===!0?"width":"height"),ke=y(()=>l.vertical===!0?"vertical":"horizontal"),Ne=y(()=>{const v={role:"slider","aria-valuemin":g.value,"aria-valuemax":f.value,"aria-orientation":ke.value,"data-step":l.step};return l.disable===!0?v["aria-disabled"]="true":l.readonly===!0&&(v["aria-readonly"]="true"),v}),De=y(()=>`q-slider q-slider${h.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(l.vertical===!0?"row":"column")+(l.disable===!0?" disabled":" q-slider--enabled"+(M.value===!0?" q-slider--editable":""))+(m.value==="both"?" q-slider--focus":"")+(l.label||l.labelAlways===!0?" q-slider--label":"")+(l.labelAlways===!0?" q-slider--label-always":"")+(i.value===!0?" q-slider--dark":"")+(l.dense===!0?" q-slider--dense q-slider--dense"+h.value:""));function be(v){const x="q-slider__"+v;return`${x} ${x}${h.value} ${x}${h.value}${_.value}`}function xe(v){const x="q-slider__"+v;return`${x} ${x}${h.value}`}const re=y(()=>{const v=l.selectionColor||l.color;return"q-slider__selection absolute"+(v!==void 0?` text-${v}`:"")}),ge=y(()=>xe("markers")+" absolute overflow-hidden"),$=y(()=>xe("track-container")),P=y(()=>be("pin")),te=y(()=>be("label")),q=y(()=>be("text-container")),Ue=y(()=>be("marker-labels-container")+(l.markerLabelsClass!==void 0?` ${l.markerLabelsClass}`:"")),Ye=y(()=>"q-slider__track relative-position no-outline"+(l.trackColor!==void 0?` bg-${l.trackColor}`:"")),We=y(()=>{const v={[C.value]:l.trackSize};return l.trackImg!==void 0&&(v.backgroundImage=`url(${l.trackImg}) !important`),v}),ht=y(()=>"q-slider__inner absolute"+(l.innerTrackColor!==void 0?` bg-${l.innerTrackColor}`:"")),ft=y(()=>{const v=b.value-S.value,x={[O.value]:`${100*S.value}%`,[ie.value]:v===0?"2px":`${100*v}%`};return l.innerTrackImg!==void 0&&(x.backgroundImage=`url(${l.innerTrackImg}) !important`),x});function wt(v){const{min:x,max:z,step:j}=l;let Z=x+v*(z-x);if(j>0){const fe=(Z-g.value)%j;Z+=(Math.abs(fe)>=j/2?(fe<0?-1:1)*j:0)-fe}return Z=I.value(Z),nt(Z,g.value,f.value)}function vt(v){return Y.value===0?0:(v-l.min)/Y.value}function kt(v,x){const z=Qr(v),j=l.vertical===!0?nt((z.top-x.top)/x.height,0,1):nt((z.left-x.left)/x.width,0,1);return nt(k.value===!0?1-j:j,S.value,b.value)}const xt=y(()=>Ur(l.markers)===!0?l.markers:A.value),Q=y(()=>{const v=[],x=xt.value,z=l.max;let j=l.min;do v.push(j),j+=x;while(j<z);return v.push(z),v}),_e=y(()=>{const v=` ${an}${h.value}-`;return an+`${v}${l.switchMarkerLabelsSide===!0?"switched":"standard"}${v}${k.value===!0?"rtl":"ltr"}`}),me=y(()=>l.markerLabels===!1?null:ye(l.markerLabels).map((v,x)=>({index:x,value:v.value,label:v.label||v.value,classes:_e.value+(v.classes!==void 0?" "+v.classes:""),style:{...he(v.value),...v.style||{}}}))),je=y(()=>({markerList:me.value,markerMap:Ee.value,classes:_e.value,getStyle:he})),Qe=y(()=>{const v=ne.value===0?"2px":100*xt.value/ne.value;return{...ft.value,backgroundSize:l.vertical===!0?`2px ${v}%`:`${v}% 2px`}});function ye(v){if(v===!1)return null;if(v===!0)return Q.value.map(Ri);if(typeof v=="function")return Q.value.map(z=>{const j=v(z);return $t(j)===!0?{...j,value:z}:{value:z,label:j}});const x=({value:z})=>z>=l.min&&z<=l.max;return Array.isArray(v)===!0?v.map(z=>$t(z)===!0?z:{value:z}).filter(x):Object.keys(v).map(z=>{const j=v[z],Z=Number(z);return $t(j)===!0?{...j,value:Z}:{value:Z,label:j}}).filter(x)}function he(v){return{[O.value]:`${100*(v-l.min)/Y.value}%`}}const Ee=y(()=>{if(l.markerLabels===!1)return null;const v={};return me.value.forEach(x=>{v[x.value]=x}),v});function Fe(){if(n["marker-label-group"]!==void 0)return n["marker-label-group"](je.value);const v=n["marker-label"]||Vi;return me.value.map(x=>v({marker:x,...je.value}))}const Le=y(()=>[[Yr,Ce,void 0,{[ke.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ce(v){v.isFinal===!0?(p.value!==void 0&&(o(v.evt),v.touch===!0&&t(!0),p.value=void 0,e("pan","end")),c.value=!1,m.value=!1):v.isFirst===!0?(p.value=a(v.evt),o(v.evt),t(),c.value=!0,e("pan","start")):(o(v.evt),t())}function Oe(){m.value=!1}function Ie(v){o(v,a(v)),t(),u.value=!0,c.value=!0,document.addEventListener("mouseup",Be,!0)}function Be(){u.value=!1,c.value=!1,t(!0),Oe(),document.removeEventListener("mouseup",Be,!0)}function Xe(v){o(v,a(v)),t(!0)}function Je(v){cr.includes(v.keyCode)&&t(!0)}function Ke(v){if(l.vertical===!0)return null;const x=r.lang.rtl!==l.reverse?1-v:v;return{transform:`translateX(calc(${2*x-1} * ${l.thumbSize} / 2 + ${50-100*x}%))`}}function et(v){const x=y(()=>u.value===!1&&(m.value===v.focusValue||m.value==="both")?" q-slider--focus":""),z=y(()=>`q-slider__thumb q-slider__thumb${h.value} q-slider__thumb${h.value}-${k.value===!0?"rtl":"ltr"} absolute non-selectable`+x.value+(v.thumbColor.value!==void 0?` text-${v.thumbColor.value}`:"")),j=y(()=>({width:l.thumbSize,height:l.thumbSize,[O.value]:`${100*v.ratio.value}%`,zIndex:m.value===v.focusValue?2:void 0})),Z=y(()=>v.labelColor.value!==void 0?` text-${v.labelColor.value}`:""),fe=y(()=>Ke(v.ratio.value)),Re=y(()=>"q-slider__text"+(v.labelTextColor.value!==void 0?` text-${v.labelTextColor.value}`:""));return()=>{const le=[N("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[N("path",{d:l.thumbPath})]),N("div",{class:"q-slider__focus-ring fit"})];return(l.label===!0||l.labelAlways===!0)&&(le.push(N("div",{class:P.value+" absolute fit no-pointer-events"+Z.value},[N("div",{class:te.value,style:{minWidth:l.thumbSize}},[N("div",{class:q.value,style:fe.value},[N("span",{class:Re.value},v.label.value)])])])),l.name!==void 0&&l.disable!==!0&&d(le,"push")),N("div",{class:z.value,style:j.value,...v.getNodeData()},le)}}function tt(v,x,z,j){const Z=[];l.innerTrackColor!=="transparent"&&Z.push(N("div",{key:"inner",class:ht.value,style:ft.value})),l.selectionColor!=="transparent"&&Z.push(N("div",{key:"selection",class:re.value,style:v.value})),l.markers!==!1&&Z.push(N("div",{key:"marker",class:ge.value,style:Qe.value})),j(Z);const fe=[Xr("div",{key:"trackC",class:$.value,tabindex:x.value,...z.value},[N("div",{class:Ye.value,style:We.value},Z)],"slide",M.value,()=>Le.value)];if(l.markerLabels!==!1){const Re=l.switchMarkerLabelsSide===!0?"unshift":"push";fe[Re](N("div",{key:"markerL",class:Ue.value},Fe()))}return fe}return st(()=>{document.removeEventListener("mouseup",Be,!0)}),{state:{active:c,focus:m,preventFocus:u,dragging:p,editable:M,classes:De,tabindex:R,attributes:Ne,roundValueFn:I,keyStep:A,trackLen:Y,innerMin:g,innerMinRatio:S,innerMax:f,innerMaxRatio:b,positionProp:O,sizeProp:ie,isReversed:k},methods:{onActivate:Ie,onMobileClick:Xe,onBlur:Oe,onKeyup:Je,getContent:tt,getThumbRenderFn:et,convertRatioToModel:wt,convertModelToRatio:vt,getDraggingRatio:kt}}}const Gi=()=>({}),Ui=Vt({name:"QSlider",props:{...Hi,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:qi,setup(t,{emit:o}){const{proxy:{$q:a}}=Et(),{state:s,methods:l}=Zi({updateValue:h,updatePosition:k,getDragging:_,formAttrs:Kr(t)}),e=w(null),n=w(0),r=w(0);function i(){r.value=t.modelValue===null?s.innerMin.value:nt(t.modelValue,s.innerMin.value,s.innerMax.value)}ve(()=>`${t.modelValue}|${s.innerMin.value}|${s.innerMax.value}`,i),i();const d=y(()=>l.convertModelToRatio(r.value)),c=y(()=>s.active.value===!0?n.value:d.value),u=y(()=>{const M={[s.positionProp.value]:`${100*s.innerMinRatio.value}%`,[s.sizeProp.value]:`${100*(c.value-s.innerMinRatio.value)}%`};return t.selectionImg!==void 0&&(M.backgroundImage=`url(${t.selectionImg}) !important`),M}),m=l.getThumbRenderFn({focusValue:!0,getNodeData:Gi,ratio:c,label:y(()=>t.labelValue!==void 0?t.labelValue:r.value),thumbColor:y(()=>t.thumbColor||t.color),labelColor:y(()=>t.labelColor),labelTextColor:y(()=>t.labelTextColor)}),p=y(()=>s.editable.value!==!0?{}:a.platform.is.mobile===!0?{onClick:l.onMobileClick}:{onMousedown:l.onActivate,onFocus:g,onBlur:l.onBlur,onKeydown:f,onKeyup:l.onKeyup});function h(M){r.value!==t.modelValue&&o("update:modelValue",r.value),M===!0&&o("change",r.value)}function _(){return e.value.getBoundingClientRect()}function k(M,I=s.dragging.value){const A=l.getDraggingRatio(M,I);r.value=l.convertRatioToModel(A),n.value=t.snap!==!0||t.step===0?A:l.convertModelToRatio(r.value)}function g(){s.focus.value=!0}function f(M){if(!cr.includes(M.keyCode))return;ea(M);const I=([34,33].includes(M.keyCode)?10:1)*s.keyStep.value,A=([34,37,40].includes(M.keyCode)?-1:1)*(s.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*I;r.value=nt(s.roundValueFn.value(r.value+A),s.innerMin.value,s.innerMax.value),h()}return()=>{const M=l.getContent(u,s.tabindex,p,I=>{I.push(m())});return N("div",{ref:e,class:s.classes.value+(t.modelValue===null?" q-slider--no-value":""),...s.attributes.value,"aria-valuenow":t.modelValue},M)}}}),Yi=F({__name:"BaseSlider",props:{modelValue:{}},setup(t,{expose:o}){const a=it(),s=lt(),l=w();return o({sliderRef:l}),(e,n)=>(E(),W(B(Ui),ut({ref_key:"sliderRef",ref:l},B(a),{modelValue:e.modelValue,style:{width:"-webkit-fill-available"}}),Rt({_:2},[ze(Object.keys(B(s)),(r,i)=>({name:r,fn:D(()=>[ce(e.$slots,r)])}))]),1040,["modelValue"]))}}),Wi=F({__name:"DaysBackSlider",props:{snap:{type:Boolean,default:!0},reverse:{type:Boolean,default:!0},labelAlways:{type:Boolean,default:!0},markers:{type:[Boolean,Number],default:5},min:{default:1},max:{default:30},modelValue:{},switchLabelSide:{type:Boolean,default:!1}},emits:["update:model-value"],setup(t,{expose:o,emit:a}){const s=a,l=t,e=it(),n=lt(),r=w(),i=y(()=>({...l,...e,markerLabels:d})),d=c=>[l.min,l.max].includes(c)?`${c}`:" ";return o({sliderRef:r}),(c,u)=>{const m=Yi;return E(),W(m,ut({ref_key:"sliderRef",ref:r},i.value,{"onUpdate:modelValue":u[0]||(u[0]=p=>s("update:model-value",p))}),Rt({_:2},[ze(Object.keys(B(n)),(p,h)=>({name:p,fn:D(()=>[ce(c.$slots,p)])}))]),1040)}}}),Qi=F({__name:"RegionSelect",props:{region:{},country:{}},emits:["update:region","loading"],setup(t,{emit:o}){const a=o,s=t,{$notify:l}=Ft(),e=Sn(),n=w([]),r=w([]),i=y({get:()=>s.region,set:u=>a("update:region",u)});ve(r,u=>{n.value=u},{deep:!0}),ve(()=>s.country,()=>{i.value=void 0,c()});const d=(u,m)=>{if(!u){m(()=>{n.value=r.value});return}m(()=>{n.value=r.value.filter(p=>p.label.toLowerCase().includes(u.toLowerCase()))})},c=()=>{a("loading",!0),e.getSubRegionListInfo(ta.SUBNATIONAL_1,s.country).then(u=>{r.value=u.map(m=>({label:m.name,value:m.code}))}).catch(()=>{l.error("失敗：更新地區")}).finally(()=>{a("loading",!1)})};return ao(()=>{c()}),(u,m)=>{const p=Mn;return E(),W(p,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=h=>i.value=h),label:u.$t("region"),options:n.value,clearable:"","input-debounce":"0","use-input":"",onFilter:d},null,8,["modelValue","label","options"])}}}),Xi=cn("preferredLanguage",()=>{const t=pa(),o=y(()=>t.value.filter(e=>e.includes("-")).map(e=>e.split("-")[0])),a=y(()=>o.value.includes(zt.CHINESE)?zt.CHINESE:o.value[0]),s=y(()=>t.value.filter(e=>e.includes("-")).map(e=>e.split("-")[1])),l=y(()=>s.value.includes(at.COUNTRYCODE_OF_TAIWAN)?at.COUNTRYCODE_OF_TAIWAN:s.value[0]);return{userLangs:t,userLangCodes:o,userLangCode:a,userCountryCodes:s,userCountryCode:l}}),Ji=F({__name:"CountrySelect",props:{country:{default:at.COUNTRYCODE_OF_TAIWAN}},emits:["update:country"],setup(t,{emit:o}){const a=o,s=t,l=Xi(),{userCountryCode:e}=Ae(l),n=Sn(),{countryOptions:r}=Ae(n),i=w([]),d=y({get:()=>s.country,set:u=>a("update:country",u)});ve(r,u=>{i.value=u},{immediate:!0,deep:!0});const c=(u,m)=>{if(!u){m(()=>{i.value=r.value});return}m(()=>{i.value=r.value.filter(p=>p.label.toLowerCase().includes(u.toLowerCase()))})};return K(()=>{d.value||(d.value=r.value.find(u=>u.value===e.value).value)}),(u,m)=>{const p=hn("country-flag"),h=Mn;return E(),W(h,{modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=_=>d.value=_),label:u.$t("country"),options:i.value,"input-debounce":"0","use-input":"",onFilter:c},{option:D(_=>[T(Bt,oa(na(_.itemProps)),{default:D(()=>[T(At,{avatar:""},{default:D(()=>[T(p,{country:_.opt.value.toLowerCase(),shadow:""},null,8,["country"])]),_:2},1024),T(At,null,{default:D(()=>[Ct(X(_.opt.label),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options"])}}}),Ki=["top","middle","bottom"],el=Vt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>Ki.includes(t)}},setup(t,{slots:o}){const a=y(()=>t.align!==void 0?{verticalAlign:t.align}:null),s=y(()=>{const l=t.outline===!0&&t.color||t.textColor;return`q-badge flex inline items-center no-wrap q-badge--${t.multiLine===!0?"multi":"single"}-line`+(t.outline===!0?" q-badge--outline":t.color!==void 0?` bg-${t.color}`:"")+(l!==void 0?` text-${l}`:"")+(t.floating===!0?" q-badge--floating":"")+(t.rounded===!0?" q-badge--rounded":"")+(t.transparent===!0?" q-badge--transparent":"")});return()=>N("div",{class:s.value,style:a.value,role:"status","aria-label":t.label},ra(o.default,t.label!==void 0?[t.label]:[]))}}),tl=(t,o)=>un.get(`/data/obs/${t}/recent/notable`,{params:o});class ol{constructor(o){He(this,"back",5);He(this,"hotspot",!1);He(this,"maxResults");He(this,"sppLocale",zt.ENGLISH);if(!o)return;const{back:a=5,hotspot:s=!1,maxResults:l=void 0,sppLocale:e=zt.ENGLISH}=o;this.back=a,this.hotspot=s,this.maxResults=l,this.sppLocale=e}}class nl extends ol{constructor(a){super(a);He(this,"detail",Fo.SUBSET);He(this,"r");if(!a)return;const{detail:s=Fo.SUBSET,r:l=void 0}=a;this.detail=s,this.r=l}}const rl={class:"flex justify-center items-baseline gap-1"},al={class:"comName-font"},sl={class:"sciName-font"},il={class:"flex justify-between"},dl=F({__name:"RareBirds",setup(t){const{t:o,locale:a}=mn(),{$notify:s,$loading:l}=Ft(),e=no(),{taxInfoDict:n}=Ae(e),r=w(!1),i=w(at.COUNTRYCODE_OF_TAIWAN),d=w(null),c=w(new nl),u=w([]),m=w(),p=w(),h=y(()=>{let S=[];return u.value.forEach(b=>{S.find(ie=>ie.lat===b.lat&&ie.lng===b.lng)||S.push(b)}),S}),_=y(()=>h.value.map(S=>S.speciesCode)),k=y(()=>{const S=Object.keys(n.value);return _.value.filter(b=>!S.includes(b))});ve([i,d,c],()=>{localStorage.setItem("rareBirds-searchForm",JSON.stringify({c:i.value,r:d.value,n:c.value})),A()},{deep:!0}),ve(h,S=>{S.length&&m.value.updateCenter([S[0].lat,S[0].lng])},{deep:!0});const g=S=>{e.getEbirdTaxonomyInfo(S?_.value.join(","):k.value.join(","))};ve(k,S=>{S.length&&g(!1)}),ve(a,()=>{g(!0)});const f=S=>{i.value=S,m.value.updateZoom(4)},M=S=>{d.value=S||null,S&&m.value.updateZoom(8)},I=()=>{l.on(),m.value&&m.value.setUpdateLoadingState(!0),tl(d.value||i.value,c.value).then(S=>{console.log("notableObsList",S),S.length||s.warning("無紀錄"),u.value=S}).catch(()=>{s.error("失敗：取得近期稀有鳥紀錄")}).finally(()=>{l.off(),m.value&&m.value.setUpdateLoadingState(!1)})},A=aa(()=>{I()},1e3),R=S=>{const{latlng:b}=S;m.value.updateCenter([b.lat,b.lng])},Y=S=>{const b=Za(S);return b?`${b} ${o("ago")}`:o("today")},ne=S=>{p.value.open(S)};return ao(()=>{const S=localStorage.getItem("rareBirds-searchForm");if(S){const{c:b,r:O,n:ie}=JSON.parse(S);i.value=b,d.value=O,c.value=ie}else I()}),(S,b)=>{const O=Ji,ie=Qi,C=Wi,ke=Fi,Ne=zi,De=Bi,be=bn,xe=Ii,re=Ti,ge=ss;return E(),$e(qe,null,[T(re,{ref_key:"mapRef",ref:m,"markers-number":h.value.length,onResearch:I},{"search-menu":D(()=>[T(ia,{class:"q-gutter-md","no-error-focus":"","no-reset-focus":""},{default:D(()=>[T(O,{country:i.value,"onUpdate:country":f},null,8,["country"]),T(ie,{country:i.value,region:d.value,onLoading:b[0]||(b[0]=$=>r.value=$),"onUpdate:region":M},null,8,["country","region"]),V("div",null,[V("span",null,X(S.$t("back")),1),T(C,{modelValue:c.value.back,"onUpdate:modelValue":b[1]||(b[1]=$=>c.value.back=$)},null,8,["modelValue"])])]),_:1}),T(ke,{show:r.value},null,8,["show"])]),markers:D(()=>[(E(!0),$e(qe,null,ze(h.value,($,P)=>(E(),W(B(Qs),{key:P,"lat-lng":[$.lat,$.lng],onClick:R},{default:D(()=>[T(Ne),T(De,{permanent:""},{default:D(()=>{var te;return[Ct(X(((te=B(n)[$.speciesCode])==null?void 0:te.comName)??$.comName),1)]}),_:2},1024),T(xe,{"navigation-url":B(In)($.lat,$.lng),onDetail:te=>ne($)},{location:D(()=>[Ct(X($.locName),1)]),content:D(()=>[T(be,{href:`https://ebird.org/species/${$.speciesCode}`},{default:D(()=>{var te;return[T(el,{label:`×${$.howMany}`,color:"warning",floating:"",rounded:""},null,8,["label"]),T(sa,{anchor:"top middle"},{default:D(()=>[Ct(X($.comName),1)]),_:2},1024),V("div",rl,[V("div",al,X(((te=B(n)[$.speciesCode])==null?void 0:te.comName)??$.comName),1),V("div",sl,X($.sciName),1)])]}),_:2},1032,["href"])]),remark:D(()=>[V("div",il,[V("div",null,X($.obsDt),1),V("div",null,X(Y($.obsDt)),1)])]),_:2},1032,["navigation-url","onDetail"])]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["markers-number"]),T(ge,{ref_key:"rbMarkerDetailDialogRef",ref:p},null,512)],64)}}});export{dl as default};
